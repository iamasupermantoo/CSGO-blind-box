(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d4c8d5a"],{"5fad":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-list-container",attrs:{id:"data-list-list-view"}},[a("vx-card",{ref:"filterCard",staticClass:"user-list-filters mb-8",attrs:{title:"条件搜索",actionButtons:""},on:{refresh:t.resetColFilters,remove:t.resetColFilters}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("label",{staticClass:"text-sm opacity-75"},[t._v("关键字")]),a("div",{staticStyle:{display:"flex"}},[a("vs-input",{model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("vs-button",{staticClass:"search",on:{click:t.search}},[t._v("搜索")])],1)])])]),a("vs-table",{ref:"table",attrs:{multiple:"","max-items":t.pageSize,data:t.products},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return[a("tbody",t._l(i,(function(e,i){return a("vs-tr",{key:i,attrs:{data:e}},[a("vs-td",{staticClass:"img-container"},[a("img",{staticClass:"product-img",attrs:{src:e.imageUrl}})]),a("vs-td",[a("p",{staticClass:"product-name font-medium truncate"},[t._v(t._s(e.itemName))])]),a("vs-td",[a("p",{staticClass:"product-price"},[t._v("$ "+t._s(e.priceInfo?e.priceInfo.price:0))])]),a("vs-td",[a("p",{staticClass:"product-category"},[t._v(t._s(e.rarityName))])]),a("vs-td",{staticClass:"whitespace-no-wrap"},[a("a",{on:{click:function(a){return a.stopPropagation(),t.addSkin(e)}}},[t._v("添加")])])],1)})),1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"flex flex-wrap-reverse items-center data-list-btn-container"}),a("vs-dropdown",{staticClass:"cursor-pointer mb-4 mr-4 items-per-page-handler",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.pageSize-(t.pageSize-1))+" - "+t._s(t.currentPage*t.pageSize)+" of "+t._s(t.total))]),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(e){t.pageSize=10}}},[a("span",[t._v("10")])]),a("vs-dropdown-item",{on:{click:function(e){t.pageSize=20}}},[a("span",[t._v("20")])]),a("vs-dropdown-item",{on:{click:function(e){t.pageSize=30}}},[a("span",[t._v("30")])]),a("vs-dropdown-item",{on:{click:function(e){t.pageSize=50}}},[a("span",[t._v("50")])])],1)],1)],1),a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"imageUrl"}},[t._v("图片")]),a("vs-th",{attrs:{"sort-key":"itemName"}},[t._v("名称")]),a("vs-th",{attrs:{"sort-key":"priceInfo.price"}},[t._v("价格")]),a("vs-th",{attrs:{"sort-key":"rarityName"}},[t._v("分类")]),a("vs-th",[t._v("操作")])],1)],2),a("vs-pagination",{attrs:{total:t.totalPages,max:7},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},s=[],r=a("bd58"),n=(a("4e06"),a("aab0")),o=a.n(n),c=a("ee31"),d={components:{AgGridVue:r["AgGridVue"],vSelect:o.a},data:function(){return{selected:[],isMounted:!1,addNewDataSidebar:!1,sidebarData:{},products:[],total:0,currentPage:1,pageSize:10,totalPages:0,roleOptions:[],roleFilter:{label:"所有",value:""},keyword:""}},computed:{},watch:{currentPage:{handler:function(t){var e=this;e.currentPage=t,e.getSkinList()},deep:!0},pageSize:{handler:function(t){var e=this;e.pageSize=t,e.getSkinList()},deep:!0},keyword:{handler:function(t){var e=this;e.keyword=t,e.keyword||e.getSkinList()},deep:!0}},methods:{search:function(){var t=this;t.keyword&&t.getSkinList()},getSkinList:function(){var t=this;t.$axios({url:"/admin/Box/skinList",method:"post",data:{keyword:t.keyword,page:t.currentPage,pageSize:t.pageSize}}).then((function(e){0==e.data.success?t.$vs.notify({color:"danger",title:"提示",text:e.data.errorMsg}):(t.products=e.data.data.list,t.total=e.data.data.total,t.totalPages=e.data.data.pages)}))},addSkin:function(t){var e=this;e.$axios({url:"/admin/Box/addSkin",method:"post",data:t}).then((function(t){console.log(t),1==t.data.status?e.$vs.notify({color:"success",title:"提示",text:t.data.msg}):e.$vs.notify({color:"danger",title:"提示",text:t.data.msg})}))},addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},deleteData:function(t){this.$store.dispatch("dataList/removeItem",t).catch((function(t){console.error(t)}))},editData:function(t){this.sidebarData=t,this.toggleDataSidebar(!0)},getOrderStatusColor:function(t){return"on_hold"===t?"warning":"delivered"===t?"success":"canceled"===t?"danger":"primary"},getPopularityColor:function(t){return t>90?"success":t>70?"primary":t>=50?"warning":t<50?"danger":"primary"},toggleDataSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=t},resetColFilters:function(){this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged(),this.roleFilter=this.statusFilter=this.isVerifiedFilter=this.departmentFilter={label:"All",value:"all"},this.$refs.filterCard.removeRefreshAnimation()}},created:function(){c["a"].isRegistered||(this.$store.registerModule("dataList",c["a"]),c["a"].isRegistered=!0),this.$store.dispatch("dataList/fetchDataListItems")},mounted:function(){this.isMounted=!0,this.getSkinList()}},l=d,u=(a("9153"),a("5d22")),p=Object(u["a"])(l,i,s,!1,null,null,null);e["default"]=p.exports},9153:function(t,e,a){"use strict";a("f291")},ee31:function(t,e,a){"use strict";var i={products:[]},s=(a("a1d1"),{ADD_ITEM:function(t,e){t.products.unshift(e)},SET_PRODUCTS:function(t,e){t.products=e},UPDATE_PRODUCT:function(t,e){var a=t.products.findIndex((function(t){return t.id===e.id}));Object.assign(t.products[a],e)},REMOVE_ITEM:function(t,e){var a=t.products.findIndex((function(t){return t.id===e}));t.products.splice(a,1)}}),r=a("bb36"),n={addItem:function(t,e){var a=t.commit;return new Promise((function(t,i){r["a"].post("/api/data-list/products/",{item:e}).then((function(i){a("ADD_ITEM",Object.assign(e,{id:i.data.id})),t(i)})).catch((function(t){i(t)}))}))},fetchDataListItems:function(t){var e=t.commit;return new Promise((function(t,a){r["a"].get("/api/data-list/products").then((function(a){e("SET_PRODUCTS",a.data),t(a)})).catch((function(t){a(t)}))}))},updateItem:function(t,e){var a=t.commit;return new Promise((function(t,i){r["a"].post("/api/data-list/products/".concat(e.id),{item:e}).then((function(e){a("UPDATE_PRODUCT",e.data),t(e)})).catch((function(t){i(t)}))}))},removeItem:function(t,e){var a=t.commit;return new Promise((function(t,i){r["a"].delete("/api/data-list/products/".concat(e)).then((function(i){a("REMOVE_ITEM",e),t(i)})).catch((function(t){i(t)}))}))}},o={};e["a"]={isRegistered:!1,namespaced:!0,state:i,mutations:s,actions:n,getters:o}},f291:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2d4c8d5a.f96d982b.js.map