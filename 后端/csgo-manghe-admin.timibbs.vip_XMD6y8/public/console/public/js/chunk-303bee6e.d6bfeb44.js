(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-303bee6e"],{"042d":function(t,e,a){"use strict";a("e3f7")},"14e8":function(t,e,a){"use strict";a("235f")},2269:function(t,e,a){},"235f":function(t,e,a){},"23e9":function(t,e,a){},"4faa":function(t,e,a){"use strict";var i={users:[]},s=(a("a1d1"),{SET_USERS:function(t,e){t.users=e},REMOVE_RECORD:function(t,e){var a=t.users.findIndex((function(t){return t.id===e}));t.users.splice(a,1)}}),r=a("bb36"),n={fetchUsers:function(t){var e=t.commit;return new Promise((function(t,a){r["a"].get("/api/user-management/users").then((function(a){e("SET_USERS",a.data),t(a)})).catch((function(t){a(t)}))}))},fetchUser:function(t,e){return new Promise((function(t,a){r["a"].get("/api/user-management/users/".concat(e)).then((function(e){t(e)})).catch((function(t){a(t)}))}))},removeRecord:function(t,e){var a=t.commit;return new Promise((function(t,i){r["a"].delete("/api/user-management/users/".concat(e)).then((function(i){a("REMOVE_RECORD",e),t(i)})).catch((function(t){i(t)}))}))}},l={};e["a"]={isRegistered:!1,namespaced:!0,state:i,mutations:s,actions:n,getters:l}},"5ce6":function(t,e,a){"use strict";a.r(e);var i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"page-user-edit"}},[a("vs-alert",{attrs:{color:"danger",title:"Box Not Found",active:t.user_not_found},on:{"update:active":function(e){t.user_not_found=e}}},[a("span",[t._v("Box record with id: "+t._s(t.$route.params.userId)+" not found. ")]),a("span",[a("span",[t._v("Check ")]),a("router-link",{staticClass:"text-inherit underline",attrs:{to:{name:"page-user-list"}}},[t._v("All Box")])],1)]),t.user_data?a("vx-card",[a("div",{staticClass:"tabs-container px-6 pt-6",attrs:{slot:"no-body"},slot:"no-body"},[a("vs-tabs",{staticClass:"tab-action-btn-fill-conatiner",model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("vs-tab",{attrs:{label:"箱子信息","icon-pack":"feather",icon:"icon-user"}},[a("div",{staticClass:"tab-text"},[a("user-edit-tab-account",{staticClass:"mt-4",attrs:{data:t.user_data},on:{reload:t.getBoxInfo}})],1)]),a("vs-tab",{attrs:{label:"箱子饰品","icon-pack":"feather",icon:"icon-info"}},[a("div",{staticClass:"tab-text"},[a("user-edit-tab-information",{staticClass:"mt-4",attrs:{data:t.user_data,totalProbability:t.totalProbability},on:{reload:t.getBoxInfo}})],1)])],1)],1)]):t._e()],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"user-edit-tab-info"}},[a("p",{staticClass:"text-lg font-medium mb-2 mt-4 sm:mt-0"},[t._v("\n            "+t._s(t.data.name)+"\n          ")]),a("div",{staticClass:"vx-row imgs-1"},[a("div",{staticClass:"vx-col w-full"},[a("div",{staticClass:"flex items-start flex-col sm:flex-row"},[t.img_main?a("img",{staticClass:"mr-8 rounded h-24 w-24 img_main",attrs:{src:t.img_main}}):t._e(),a("div",[a("input",{ref:"update_main_img_input",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.update_main_img}}),a("vs-button",{staticClass:"mr-4 mb-4 change",attrs:{type:"border"},on:{click:function(e){return t.$refs.update_main_img_input.click()}}},[t._v("更换主图")])],1)])]),a("div",{staticClass:"vx-col w-full"},[a("div",{staticClass:"flex items-start flex-col sm:flex-row"},[t.img_active?a("img",{staticClass:"mr-8 rounded h-24 w-24 img_active",attrs:{src:t.img_active}}):t._e(),a("div",[a("input",{ref:"update_active_img_input",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.update_active_img}}),a("vs-button",{staticClass:"mr-4 mb-4 change",attrs:{type:"border"},on:{click:function(e){return t.$refs.update_active_img_input.click()}}},[t._v("更换动图")])],1)])])]),a("div",{staticClass:"vx-row box_input"},[a("div",{staticClass:"w-full mt-4 edit"},[a("vs-input",{staticClass:"w-full mt-4",attrs:{label:"名称",name:"name"},model:{value:t.data_local.name,callback:function(e){t.$set(t.data_local,"name",e)},expression:"data_local.name"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("name")))])],1),a("div",{staticClass:"w-full mt-4 edit"},[a("vs-input",{staticClass:"w-full mt-4",attrs:{label:"价格",name:"price"},model:{value:t.data_local.price,callback:function(e){t.$set(t.data_local,"price",e)},expression:"data_local.price"}})],1),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("price"),expression:"errors.has('price')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("price")))]),a("div",{staticClass:"w-full mt-4 edit"},[a("label",{staticClass:"text-sm opacity-75"},[t._v("盲盒类型")]),a("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:t.boxTypeOptions,clearable:!1,dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.boxTypeFilter,callback:function(e){t.boxTypeFilter=e},expression:"boxTypeFilter"}})],1),a("div",{staticClass:"w-full mt-4 edit"},[a("label",{staticClass:"text-sm opacity-75"},[t._v("是否为对战")]),a("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:t.battleOptions,clearable:!1,dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.battleFilter,callback:function(e){t.battleFilter=e},expression:"battleFilter"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("email"),expression:"errors.has('email')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("email")))])],1),a("div",{staticClass:"w-full mt-4 edit"},[a("label",{staticClass:"text-sm opacity-75"},[t._v("稀有度")]),a("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:t.roleOptions,clearable:!1,dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.roleFilter,callback:function(e){t.roleFilter=e},expression:"roleFilter"}})],1),a("div",{staticClass:"w-full mt-4 edit"},[a("label",{staticClass:"text-sm opacity-75"},[t._v("状态")]),a("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:t.roleOptions1,clearable:!1,dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.roleFilter1,callback:function(e){t.roleFilter1=e},expression:"roleFilter1"}})],1),a("div",{staticClass:"w-full mt-4 edit"},[a("vs-input",{staticClass:"w-full mt-4",attrs:{label:"普通自动补充库存比(%)",name:"mendBillie"},model:{value:t.data_local.mendBillie,callback:function(e){t.$set(t.data_local,"mendBillie",e)},expression:"data_local.mendBillie"}})],1),a("div",{staticClass:"w-full mt-4 edit"},[a("vs-input",{staticClass:"w-full mt-4",attrs:{label:"Vip自动补充库存比(%)",name:"mendVipBillie"},model:{value:t.data_local.mendVipBillie,callback:function(e){t.$set(t.data_local,"mendVipBillie",e)},expression:"data_local.mendVipBillie"}})],1)]),a("div",{staticClass:"vx-row box_input"},[t._l(t.skins_type,(function(e,i){return a("div",{key:i,staticClass:"w-full mt-4 edit"},[a("vs-input",{staticClass:"w-full mt-4",attrs:{label:e.name+"概率(%)",name:"mendVipBillie"},model:{value:e.probability,callback:function(a){t.$set(e,"probability",a)},expression:"item.probability"}})],1)})),a("div",{staticClass:"w-full mt-4 edit"},[a("vs-input",{staticClass:"w-full mt-4",attrs:{label:"创建时间",name:"create_time"},model:{value:t.data_local.create_time,callback:function(e){t.$set(t.data_local,"create_time",e)},expression:"data_local.create_time"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("create_time"),expression:"errors.has('create_time')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("create_time")))])],1)],2),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("div",{staticClass:"mt-8 flex flex-wrap items-center justify-end"},[a("vs-button",{staticClass:"ml-auto mt-2",attrs:{disabled:!t.validateForm},on:{click:t.save_changes}},[t._v("保存")])],1)])])])},l=[],o=(a("3a23"),a("612f"),a("bd58")),c=a("aab0"),d=a.n(c),u={components:{vSelect:d.a,AgGridVue:o["AgGridVue"]},props:{data:{type:Object,required:!0}},data:function(){return{date:"2020-12-28",roleFilter:{},roleOptions:[],boxTypeOptions:[],boxTypeFilter:{},roleFilter1:{label:"正常",value:"1"},roleOptions1:[{label:"正常",value:"1"},{label:"禁用",value:"2"}],battleOptions:[{label:"是",value:"1"},{label:"否",value:"0"}],battleFilter:{},data_local:JSON.parse(JSON.stringify(this.data)),img_main:"",img_active:"",img_main_file:"",img_active_file:"",boxType:"",skins_type:this.data.skins_type}},computed:{status_local:{get:function(){return{label:this.capitalize(this.data_local.status),value:this.data_local.status}},set:function(t){this.data_local.status=t.value}},role_local:{get:function(){return{label:this.capitalize(this.data_local.role),value:this.data_local.role}},set:function(t){this.data_local.role=t.value}},validateForm:function(){return!this.errors.any()}},methods:{getBoxRarity:function(){var t=this;t.$axios({url:"/admin/Box/boxRarity",method:"post",params:{}}).then((function(e){e.data.data.forEach((function(t){t["value"]=t["id"],t["label"]=t["rarity_name"]})),t.roleOptions=e.data.data}))},getBoxType:function(){var t=this;t.$axios({url:"/admin/Box/getBoxType",method:"post",params:{}}).then((function(e){e.data.data.forEach((function(e){e["value"]=e["id"],e["label"]=e["type_name"],t.boxType==e["id"]&&(t.boxTypeFilter=e)})),t.boxTypeOptions=e.data.data}))},capitalize:function(t){return t.slice(0,1).toUpperCase()+t.slice(1,t.length)},save_changes:function(){var t=this;console.log(t.skins_type);var e={box_id:t.data_local.id,name:t.data_local.name,img_main:t.data_local.img_main,img_active:t.data_local.img_active,price:t.data_local.price,rarity:t.roleFilter.value,flag:t.roleFilter1.value,type:t.boxTypeFilter.value,battle:t.battleFilter.value,billie:t.data_local.mendBillie,vip_billie:t.data_local.mendVipBillie,skins_type:t.skins_type},a=new FormData;a.append("data",JSON.stringify(e)),a.append("img_main",t.img_main_file),a.append("img_active",t.img_active_file),t.$axios({url:"/admin/Box/editBox",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){1==e.data.status?(t.$vs.notify({title:"提示",text:e.data.msg,iconPack:"feather",icon:"icon-alert-circle",color:"success"}),t.$emit("reload")):t.$vs.notify({title:"提示",text:e.data.msg,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},reset_data:function(){this.data_local=JSON.parse(JSON.stringify(this.data))},update_main_img:function(t){console.log(t);var e,a=t.target.files[0];console.log(a),this.img_main_file=a;var i=window.URL||window.webkitURL;e=i.createObjectURL(a),this.img_main=e},update_active_img:function(t){console.log(t);var e,a=t.target.files[0];this.img_active_file=a;var i=window.URL||window.webkitURL;e=i.createObjectURL(a),this.img_active=e}},mounted:function(){var t=this;t.getBoxRarity(),t.getBoxType(),t.roleFilter=t.data.roleFilter,t.boxType=t.data.type,t.roleFilter1=1==t.data.flag?{label:"正常",value:"1"}:{label:"禁用",value:"0"},t.battleFilter=1==t.data.battle?{label:"是",value:"1"}:{label:"否",value:"0"},t.img_main=t.data.img_main,t.img_active=t.data.img_active}},m=u,p=(a("c16a"),a("5d22")),f=Object(p["a"])(m,n,l,!1,null,null,null),v=f.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"page-user-list"}},[a("data-sider-skin",{attrs:{isSidebarActive:t.addNewDataSidebar,data:t.sidebarData},on:{closeSidebar:t.toggleDataSidebar,reload:t.reload}}),a("add-skin-sider",{attrs:{addSkinActive:t.addSkinSidebar,data:t.sidebarData},on:{closeSidebar:function(e){t.addSkinSidebar=!1}}}),a("div",{staticClass:"vx-card p-6"},[a("div",{staticClass:"flex flex-wrap items-center"},[a("div",{staticClass:"flex-grow"},[a("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.paginationPageSize-(t.paginationPageSize-1))+" - "+t._s(t.list.length-t.currentPage*t.paginationPageSize>0?t.currentPage*t.paginationPageSize:t.list.length)+" of "+t._s(t.total))]),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(e){return t.gridApi.paginationSetPageSize(10)}}},[a("span",[t._v("10")])]),a("vs-dropdown-item",{on:{click:function(e){return t.gridApi.paginationSetPageSize(20)}}},[a("span",[t._v("20")])]),a("vs-dropdown-item",{on:{click:function(e){return t.gridApi.paginationSetPageSize(25)}}},[a("span",[t._v("25")])]),a("vs-dropdown-item",{on:{click:function(e){return t.gridApi.paginationSetPageSize(30)}}},[a("span",[t._v("30")])])],1)],1)],1),a("vs-input",{staticClass:"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4",attrs:{placeholder:"Search..."},on:{input:t.updateSearchQuery},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),a("vs-button",{staticClass:"s-a",on:{click:function(e){return t.getBoxSkins("search")}}},[t._v("搜索")]),a("vs-button",{staticClass:"s-a",staticStyle:{"margin-left":"15px"},on:{click:t.addSkin}},[t._v("添加")]),a("vs-button",{staticClass:"s-a",staticStyle:{"margin-left":"15px"},on:{click:function(e){return t.mendStock()}}},[t._v("一键补货")])],1),a("ag-grid-vue",{ref:"agGridTable",staticClass:"ag-theme-material w-100 my-4 ag-grid-table",attrs:{components:t.components,gridOptions:t.gridOptions,columnDefs:t.columnDefs,defaultColDef:t.defaultColDef,rowData:t.list,rowSelection:"multiple",colResizeDefault:"shift",animateRows:!0,floatingFilter:!1,pagination:!0,paginationPageSize:t.paginationPageSize,suppressPaginationPanel:!0,enableRtl:t.$vs.rtl}}),a("vs-pagination",{attrs:{total:t.totalPages,max:7},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},h=[],_=(a("b06f"),a("4e06"),a("4faa")),b=a("8e20"),k=a("dcbd"),x=a("e652"),S=a("c626"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex items-center image-url"},[a("div",[a("img",{attrs:{src:t.params.data.imageUrl,alt:""}})])])},C=[],w={name:"CellRenderImg",data:function(){return{}},methods:{},mounted:function(){}},$=w,P=Object(p["a"])($,y,C,!1,null,null,null),T=P.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-sidebar",{staticClass:"add-new-data-sidebar items-no-padding",attrs:{"click-not-close":"","position-right":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:t.isSidebarActiveLocal,callback:function(e){t.isSidebarActiveLocal=e},expression:"isSidebarActiveLocal"}},[a("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[a("h4",[t._v("\n      编辑饰品\n    ")]),a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(e){e.stopPropagation(),t.isSidebarActiveLocal=!1}}})],1),a("vs-divider",{staticClass:"mb-0"}),a(t.scrollbarTag,{key:t.$vs.rtl,tag:"component",staticClass:"scroll-area--data-list-add-new",attrs:{settings:t.settings}},[a("div",{staticClass:"p-6"},[t.dataImg?[a("div",{staticClass:"img-container w-64 mx-auto flex items-center justify-center"},[a("img",{staticClass:"responsive",attrs:{src:t.dataImg,alt:"img"}})])]:t._e(),a("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"饰品名称",name:"item-name",disabled:""},model:{value:t.dataName,callback:function(e){t.dataName=e},expression:"dataName"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("item-name"),expression:"errors.has('item-name')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("item-name")))]),a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,regex:/\d+(\.\d+)?$/},expression:"{ required: true, regex: /\\d+(\\.\\d+)?$/ }"}],staticClass:"mt-5 w-full",attrs:{"icon-pack":"feather",icon:"icon-dollar-sign",label:"饰品价格",name:"item-price",disabled:""},model:{value:t.dataPrice,callback:function(e){t.dataPrice=e},expression:"dataPrice"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("item-price"),expression:"errors.has('item-price')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("item-price")))]),a("vs-select",{staticClass:"mt-5 w-full",attrs:{label:"饰品类型",name:"item-category"},model:{value:t.dataSkinType,callback:function(e){t.dataSkinType=e},expression:"dataSkinType"}},t._l(t.skinTypeList,(function(t){return a("vs-select-item",{key:t.id,attrs:{value:t.id,text:t.name}})})),1),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("item-category"),expression:"errors.has('item-category')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("item-category")))]),a("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"概率",name:"item-probability"},model:{value:t.dataProbability,callback:function(e){t.dataProbability=e},expression:"dataProbability"}}),a("div",{staticStyle:{display:"flex"}},[a("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"库存",name:"item-probability"},model:{value:t.dataStock,callback:function(e){t.dataStock=e},expression:"dataStock"}}),a("vs-input",{staticClass:"mt-5 w-full",staticStyle:{"margin-left":"5px"},attrs:{label:"初始库存",name:"item-probability"},model:{value:t.dataStock_set_stock,callback:function(e){t.dataStock_set_stock=e},expression:"dataStock_set_stock"}})],1),a("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"库存(概率组)",name:"item-probability"},model:{value:t.dataStock_group,callback:function(e){t.dataStock_group=e},expression:"dataStock_group"}}),a("div",{staticStyle:{display:"flex"}},[a("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"库存(vip)",name:"item-probability"},model:{value:t.dataStock_group_vip,callback:function(e){t.dataStock_group_vip=e},expression:"dataStock_group_vip"}}),a("vs-input",{staticClass:"mt-5 w-full",staticStyle:{"margin-left":"5px"},attrs:{label:"初始库存(vip)",name:"item-probability"},model:{value:t.dataStock_set_stock_vip,callback:function(e){t.dataStock_set_stock_vip=e},expression:"dataStock_set_stock_vip"}})],1)],2)]),a("div",{staticClass:"flex flex-wrap items-center p-6",attrs:{slot:"footer"},slot:"footer"},[a("vs-button",{staticClass:"mr-6",on:{click:t.submitData}},[t._v("提交")]),a("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(e){t.isSidebarActiveLocal=!1}}},[t._v("取消")])],1)],1)},B=[],O=(a("bd70"),a("c322")),F=a.n(O),I={name:"DataSiderSkin",props:{isSidebarActive:{type:Boolean,required:!0},data:{type:Object,default:function(){}}},components:{VuePerfectScrollbar:F.a},data:function(){return{dataId:null,dataName:"",dataCategory:null,dataImg:null,dataOrder_status:"pending",dataPrice:0,dataTime:"",dataProbability:"",dataStock:"",dataSkinType:"",dataBoxSkinsId:"",dataStock_group:"",dataStock_group_vip:"",dataStock_set_stock:0,dataStock_set_stock_vip:0,category_choices:[],order_status_choices:[{text:"Pending",value:"pending"},{text:"Canceled",value:"canceled"},{text:"Delivered",value:"delivered"},{text:"On Hold",value:"on_hold"}],settings:{maxScrollbarLength:60,wheelSpeed:.6},file:"",skinTypeList:[]}},watch:{isSidebarActive:function(t){if(t){if(console.log(this.data),0===Object.entries(this.data).length)this.initValues(),this.$validator.reset();else{var e=JSON.parse(JSON.stringify(this.data)),a=e.stock,i=e.stock_group,s=e.stock_vip,r=e.id,n=e.imageUrl,l=e.itemName,o=e.probability,c=e.price,d=e.plat_type_id,u=e.box_skins_id,m=e.set_stock,p=e.set_stock_vip;this.dataId=r,this.dataImg=n,this.dataName=l,this.dataProbability=o,this.dataPrice=c,this.dataStock=a,this.dataStock_group=i,this.dataStock_group_vip=s,this.dataSkinType=d,this.dataBoxSkinsId=u,this.dataStock_set_stock=m,this.dataStock_set_stock_vip=p,this.initValues()}this.skinTypeList=this.$parent.skinTypeList}}},computed:{isSidebarActiveLocal:{get:function(){return this.isSidebarActive},set:function(t){t||this.$emit("closeSidebar")}},isFormValid:function(){return!this.errors.any()&&this.dataName&&this.dataCategory&&this.dataPrice>0},scrollbarTag:function(){return this.$store.getters.scrollbarTag}},methods:{initValues:function(){this.data.id||(this.dataId=null,this.dataImg=null,this.dataName="",this.dataProbability="",this.dataPrice=0,this.dataStock=0,this.dataStock_group=0,this.dataStock_group_vip=0,this.dataSkinType="",this.dataBoxSkinsId="",this.dataStock_set_stock=0,this.dataStock_set_stock_vip=0)},submitData:function(){var t=this;this.$validator.validateAll().then((function(e){if(e){var a={skin_id:t.dataId,box_skins_id:t.dataBoxSkinsId,price:t.dataPrice,probability:t.dataProbability,stock:t.dataStock,stock_group:t.dataStock_group,stock_vip:t.dataStock_group_vip,type_id:t.dataSkinType,set_stock:t.dataStock_set_stock,set_stock_vip:t.dataStock_set_stock_vip},i=t;i.$axios({url:"/admin/Box/editSkin",method:"post",data:{skin_info:a}}).then((function(e){1==e.data.status&&(t.$emit("closeSidebar"),t.$emit("reload"),t.initValues(),t.$parent.getBoxSkins(),t.$vs.notify({color:"success",title:"提示",text:e.data.msg}))}))}}))},updateCurrImg:function(t){var e=this;if(t.target.files&&t.target.files[0]){var a=new FileReader;a.onload=function(t){e.dataImg=t.target.result},a.readAsDataURL(t.target.files[0]),this.file=t.target.files[0]}}},mounted:function(){}},A=I,D=(a("9719a"),Object(p["a"])(A,R,B,!1,null,"38c2c1af",null)),N=D.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-sidebar",{staticClass:"add-new-data-sidebar items-no-padding",attrs:{"click-not-close":"","position-right":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:t.addSkinActiveLocal,callback:function(e){t.addSkinActiveLocal=e},expression:"addSkinActiveLocal"}},[a("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[a("h4",[t._v("\n      添加饰品\n    ")]),a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(e){e.stopPropagation(),t.addSkinActiveLocal=!1,t.selected=[],t.pageSize=10}}})],1),a("vs-divider",{staticClass:"mb-0"}),a(t.scrollbarTag,{key:t.$vs.rtl,tag:"component",staticClass:"scroll-area--data-list-add-new",attrs:{settings:t.settings}},[a("div",{staticClass:"p-6"},[a("div",{staticClass:"data-list-container",attrs:{id:"data-list-list-view"}},[a("vs-table",{ref:"table",attrs:{multiple:"","max-items":t.pageSize,data:t.products},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return[a("tbody",t._l(i,(function(e,i){return a("vs-tr",{key:i,attrs:{data:e}},[a("vs-td",{staticClass:"img-container"},[a("img",{staticClass:"product-img",attrs:{src:e.imageUrl}})]),a("vs-td",[a("p",{staticClass:"product-name font-medium truncate"},[t._v(t._s(e.itemName))])]),a("vs-td",[a("p",{staticClass:"product-price"},[t._v("$"+t._s(e.price))])]),a("vs-td",[a("p",{staticClass:"product-category"},[t._v(t._s(e.rarityName))])]),a("vs-td",{staticClass:"whitespace-no-wrap"},[a("a",{on:{click:function(a){return a.stopPropagation(),t.addSkin(e)}}},[t._v("添加")])])],1)})),1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between t-s",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"flex flex-wrap-reverse items-center data-list-btn-container"}),a("div",{staticClass:"flex-grow"},[a("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.pageSize-(t.pageSize-1))+"\n                  -\n                  "+t._s(t.currentPage*t.pageSize)+"\n                  of "+t._s(t.total))]),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),a("vs-dropdown-menu",{staticClass:"check"},[a("vs-dropdown-item",{on:{click:function(e){t.pageSize=10}}},[a("span",[t._v("10")])]),a("vs-dropdown-item",{on:{click:function(e){t.pageSize=20}}},[a("span",[t._v("20")])]),a("vs-dropdown-item",{on:{click:function(e){t.pageSize=30}}},[a("span",[t._v("30")])]),a("vs-dropdown-item",{on:{click:function(e){t.pageSize=50}}},[a("span",[t._v("50")])])],1)],1)],1),a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("vs-input",{staticClass:"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4",attrs:{placeholder:"关键字"},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1),a("vs-button",{staticClass:"s-a-1",on:{click:t.getSkinList}},[t._v("搜索")])],1),a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"imageUrl"}},[t._v("图片")]),a("vs-th",{attrs:{"sort-key":"itemName"}},[t._v("名称")]),a("vs-th",{attrs:{"sort-key":"priceInfo.price"}},[t._v("价格")]),a("vs-th",{attrs:{"sort-key":"rarityName"}},[t._v("分类")]),a("vs-th",[t._v("操作")])],1)],2)],1)])]),a("div",{staticClass:"flex flex-wrap items-center p-6 pagination",staticStyle:{display:"flex"},attrs:{slot:"footer"},slot:"footer"},[a("vs-button",{staticClass:"mr-6",on:{click:t.btn}},[t._v("提交")]),a("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(e){t.addSkinActiveLocal=!1,t.selected=[],t.pageSize=10}}},[t._v("取消")]),a("vs-pagination",{attrs:{total:t.totalPages,max:7},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},E=[],j=a("7dd6"),z=(i={name:"DataSiderSkin",components:{},props:{addSkinActive:{type:Boolean,required:!0},data:{type:Object,default:function(){}}}},Object(j["a"])(i,"components",{VuePerfectScrollbar:F.a}),Object(j["a"])(i,"data",(function(){return{dataBoxId:null,settings:{maxScrollbarLength:60,wheelSpeed:.6},file:"",skinTypeList:[],selected:[],isMounted:!1,addNewDataSidebar:!1,sidebarData:{},products:[],total:0,currentPage:1,pageSize:10,totalPages:0,gridApi:null,searchKey:""}})),Object(j["a"])(i,"watch",{addSkinActive:function(t){t&&(0===Object.entries(this.data).length?(console.log(this.data),this.getSkinList()):(this.getSkinList(),this.dataBoxId=this.data.box_id),this.skinTypeList=this.$parent.skinTypeList)},currentPage:{handler:function(t){var e=this;e.currentPage=t,e.getSkinList()},deep:!0},pageSize:{handler:function(t){var e=this;e.pageSize=t,e.getSkinList()},deep:!0}}),Object(j["a"])(i,"computed",{addSkinActiveLocal:{get:function(){return this.addSkinActive},set:function(t){t||this.$emit("closeSidebar")}},isFormValid:function(){return!this.errors.any()&&this.dataName&&this.dataCategory&&this.dataPrice>0},scrollbarTag:function(){return this.$store.getters.scrollbarTag}}),Object(j["a"])(i,"methods",{btn:function(){console.log(this.selected);var t=this;t.$axios({url:"/admin/Box/addToBoxByBatch",method:"post",data:{box_id:t.dataBoxId,skin_info:t.selected}}).then((function(e){1==e.data.status?(t.$emit("closeSidebar"),t.$parent.getBoxSkins(),t.$vs.notify({color:"success",title:"提示",text:e.data.msg})):t.$vs.notify({color:"warning",title:"提示",text:e.data.msg})}))},getSkinList:function(){var t=this;t.$axios({url:"/admin/all_skin/allSkinList",method:"post",data:{page:t.currentPage,pageSize:t.pageSize,searchKey:t.searchKey}}).then((function(e){t.products=e.data.data.list,t.total=e.data.data.total,t.totalPages=t.pageTotal(t.total,t.pageSize)}))},addSkin:function(t){console.log(t);var e=this,a={box_id:e.dataBoxId,skin_id:t.id};console.log(a),e.$axios({url:"/admin/Box/putSkinToBox",method:"post",data:{skin_info:a}}).then((function(t){1==t.data.status?(e.$emit("closeSidebar"),e.$parent.getBoxSkins(),e.$vs.notify({color:"success",title:"提示",text:t.data.msg})):e.$vs.notify({color:"warning",title:"提示",text:t.data.msg})}))},pageTotal:function(t,e){return null==t||""==t?0:0!=e&&t%e==0?parseInt(t/e):0!=e&&t%e!=0?parseInt(t/e)+1:void 0}}),Object(j["a"])(i,"mounted",(function(){})),i),V=z,U=(a("cf05"),Object(p["a"])(V,L,E,!1,null,"7ce276a8",null)),M=U.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{direction:t.$vs.rtl?"rtl":"ltr"}},[a("div",[t._v(t._s(t.params.data.stock)+" / "+t._s(t.params.data.set_stock?t.params.data.set_stock:0))])])},Q=[],q={name:"CellStock",data:function(){return{}},methods:{}},G=q,K=Object(p["a"])(G,J,Q,!1,null,null,null),X=K.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{direction:t.$vs.rtl?"rtl":"ltr"}},[a("div",[t._v(t._s(t.params.data.stock_vip)+" / "+t._s(t.params.data.set_stock_vip?t.params.data.set_stock_vip:0))])])},W=[],Y={name:"CellStock",data:function(){return{}},methods:{}},Z=Y,tt=Object(p["a"])(Z,H,W,!1,null,null,null),et=tt.exports,at={components:{AgGridVue:o["AgGridVue"],vSelect:d.a,CellRendererLink:b["a"],CellRendererStatus:k["a"],CellRendererVerified:x["a"],CellRendererActions:S["a"],CellRenderImg:T,DataSiderSkin:N,AddSkinSider:M,CellStock:X,CellStockVip:et},props:{totalProbability:Number},data:function(){return{total:0,totalPages:0,currentPage:1,addNewDataSidebar:!1,addSkinSidebar:!1,sidebarData:{},searchQuery:"",list:[],skinTypeList:[],gridApi:null,gridOptions:{},defaultColDef:{sortable:!0,resizable:!0,suppressMenu:!0},columnDefs:[{headerName:"名称",field:"itemName",filter:!0},{headerName:"价格",field:"price",filter:!0,width:120},{headerName:"饰品品质",field:"exteriorName",filter:!0,width:150},{headerName:"几率",field:"probability",filter:!0,width:80},{headerName:"库存",filter:!0,width:135,cellRendererFramework:"CellStock"},{headerName:"库存(概率组)",field:"stock_group",filter:!0,width:130},{headerName:"库存(vip)",field:"stock_vip",filter:!0,width:135,cellRendererFramework:"CellStockVip"},{headerName:"分类",field:"plat_type_name",filter:!0,width:100},{headerName:"添加时间",field:"create_time",filter:!0},{headerName:"操作",field:"rem",filter:!0,width:150,cellRendererFramework:"CellRendererActions"}],components:{CellRendererLink:b["a"],CellRendererStatus:k["a"],CellRendererVerified:x["a"],CellRendererActions:S["a"],CellStock:X,CellStockVip:et},box_id:this.$route.params.userId}},watch:{roleFilter:function(t){this.setColumnFilter("role",t.value)},statusFilter:function(t){this.setColumnFilter("status",t.value)},isVerifiedFilter:function(t){var e="all"===t.value?"all":"yes"===t.value?"true":"false";this.setColumnFilter("is_verified",e)},departmentFilter:function(t){this.setColumnFilter("department",t.value)},currentPage:{handler:function(t){var e=this;e.currentPage=t,e.getBoxSkins()},deep:!0},searchQuery:function(t){t||this.getBoxSkins()}},computed:{usersData:function(){},paginationPageSize:function(){return this.gridApi?this.gridApi.paginationGetPageSize():10}},methods:{getBoxSkins:function(){var t=this;t.$axios({url:"/admin/Box/boxSkinList",method:"post",data:{box_id:t.box_id,page:t.currentPage,pageSize:t.paginationPageSize,searchKey:t.searchQuery}}).then((function(e){1==e.data.status?(t.list=e.data.data.list,t.total=e.data.data.total,t.totalPages=t.pageTotal(t.total,t.paginationPageSize)):(t.list=[],t.total=0,t.totalPages=1)}))},mendStock:function(){var t=this;t.$axios({url:"/admin/Box/mendStock",method:"post",data:{box_id:t.box_id}}).then((function(e){1==e.data.status&&t.getBoxSkins()}))},pageTotal:function(t,e){return null==t||""==t?0:0!=e&&t%e==0?parseInt(t/e):0!=e&&t%e!=0?parseInt(t/e)+1:void 0},getSkinType:function(){var t=this;t.$axios({url:"/admin/Box/skinType",method:"post",data:{}}).then((function(e){t.skinTypeList=e.data.data}))},editSkin:function(t){this.sidebarData=t.data,this.toggleDataSidebar(!0)},addSkin:function(){this.sidebarData={},this.sidebarData.box_id=this.box_id,this.toggleAddSkinSidebar(!0)},reload:function(){this.$emit("reload")},toggleDataSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=t},toggleAddSkinSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addSkinSidebar=t},setColumnFilter:function(t,e){var a=this.gridApi.getFilterInstance(t),i=null;"all"!==e&&(i={type:"equals",filter:e}),a.setModel(i),this.gridApi.onFilterChanged()},resetColFilters:function(){this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged(),this.roleFilter=this.statusFilter=this.isVerifiedFilter=this.departmentFilter={label:"All",value:"all"},this.$refs.filterCard.removeRefreshAnimation()},updateSearchQuery:function(t){console.log(this.searchQuery)}},mounted:function(){if(this.gridApi=this.gridOptions.api,this.getBoxSkins(),this.getSkinType(),this.$vs.rtl){var t=this.$refs.agGridTable.$el.querySelector(".ag-header-container");t.style.left="-".concat(String(Number(t.style.transform.slice(11,-3))+9),"px")}},created:function(){_["a"].isRegistered||(this.$store.registerModule("userManagement",_["a"]),_["a"].isRegistered=!0),this.$store.dispatch("userManagement/fetchUsers").catch((function(t){console.error(t)}))}},it=at,st=(a("14e8"),a("b226"),Object(p["a"])(it,g,h,!1,null,null,null)),rt=st.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-list-container",attrs:{id:"data-list-thumb-view"}},[a("vs-table",{ref:"table",attrs:{multiple:"",pagination:"","max-items":t.itemsPerPage,search:"",data:t.products},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return[a("tbody",t._l(i,(function(e,i){return a("vs-tr",{key:i,attrs:{data:e}},[a("vs-td",{staticClass:"img-container"},[a("img",{staticClass:"product-img",attrs:{src:e.img}})]),a("vs-td",[a("p",{staticClass:"product-name "},[t._v(t._s(e.name))])]),a("vs-td",[a("p",{staticClass:"product-category"},[t._v(t._s(e.category))])]),a("vs-td",[a("p",{staticClass:"product-price"},[t._v("$"+t._s(e.price))])]),a("vs-td",[a("p",{staticClass:"product-price"},[t._v("$"+t._s(e.price))])]),a("vs-td",[a("p",{staticClass:"product-price"},[t._v("$"+t._s(e.price))])])],1)})),1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"flex flex-wrap-reverse items-center"})]),a("template",{slot:"thead"},[a("vs-th",[t._v("饰品图片")]),a("vs-th",{attrs:{"sort-key":"name"}},[t._v("饰品名称")]),a("vs-th",{attrs:{"sort-key":"category"}},[t._v("饰品品质")]),a("vs-th",{attrs:{"sort-key":"price"}},[t._v("饰品价格")]),a("vs-th",{attrs:{"sort-key":"price"}},[t._v("饰品在售价格")]),a("vs-th",{attrs:{"sort-key":"price"}},[t._v("接口在售数量")])],1)],2)],1)},lt=[],ot=a("ee31"),ct={data:function(){return{selected:[],itemsPerPage:10,isMounted:!1,addNewDataSidebar:!1,data:[]}},computed:{products:function(){return this.$store.state.dataList.products}},methods:{},created:function(){ot["a"].isRegistered||(this.$store.registerModule("dataList",ot["a"]),ot["a"].isRegistered=!0),this.$store.dispatch("dataList/fetchDataListItems")},mounted:function(){this.isMounted=!0}},dt=ct,ut=(a("042d"),Object(p["a"])(dt,nt,lt,!1,null,null,null)),mt=ut.exports,pt={components:{UserEditTabAccount:v,UserEditTabInformation:rt,UserEditTabSocial:mt},data:function(){return{user_data:null,user_not_found:!1,box_id:this.$route.params.userId,activeTab:0,totalProbability:0}},watch:{activeTab:function(){}},methods:{getBoxInfo:function(){var t=this,e=this;e.$axios({url:"/admin/Box/boxInfo",method:"post",data:{box_id:e.box_id}}).then((function(e){t.user_data=e.data.data,t.user_data.mendBillie=e.data.data.mend?e.data.data.mend.billie:"",t.user_data.mendVipBillie=e.data.data.mend?e.data.data.mend.vip_billie:"",t.totalProbability=e.data.data.totalProbability,t.user_data.roleFilter={label:e.data.data.rarity_name,value:e.data.data.rarity}}))}},created:function(){_["a"].isRegistered||(this.$store.registerModule("userManagement",_["a"]),_["a"].isRegistered=!0),this.getBoxInfo(),console.log(this.box_id)}},ft=pt,vt=Object(p["a"])(ft,s,r,!1,null,null,null);e["default"]=vt.exports},"8e20":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex items-center"},[a("router-link",{staticClass:"text-inherit hover:text-primary",attrs:{to:t.url}},[t._v(t._s(t.params.value))])],1)},s=[],r={name:"CellRendererLink",data:function(){return{}},computed:{url:function(){return"/ui-elements/box/box-edit/"+this.params.data.id}}},n=r,l=a("5d22"),o=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=o.exports},"9719a":function(t,e,a){"use strict";a("b442")},b226:function(t,e,a){"use strict";a("23e9")},b442:function(t,e,a){},c16a:function(t,e,a){"use strict";a("2269")},c626:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{direction:t.$vs.rtl?"rtl":"ltr"}},[a("feather-icon",{attrs:{icon:"Edit3Icon",svgClasses:"h-5 w-5 mr-4 hover:text-primary cursor-pointer"},on:{click:function(e){return t.editRecord(t.params)}}}),a("feather-icon",{attrs:{icon:"Trash2Icon",svgClasses:"h-5 w-5 hover:text-danger cursor-pointer"},on:{click:function(e){return t.confirmDeleteRecord(t.params)}}})],1)},s=[],r={name:"CellRendererActions",data:function(){return{delete_id:"",box_id:""}},methods:{editRecord:function(t){this.$parent.$parent.editSkin(t)},confirmDeleteRecord:function(t){console.log(t),this.delete_id=t.data.box_skins_id,this.box_id=t.data.box_id,this.$vs.dialog({type:"confirm",color:"danger",title:"提示",text:'确定删除 "'.concat(this.params.data.itemName,'"？'),accept:this.deleteRecord,acceptText:"确定",cancelText:"取消"})},deleteRecord:function(){var t=this;t.$axios({url:"/admin/Box/delSkin",method:"post",data:{box_id:t.box_id,id:t.delete_id}}).then((function(e){1==e.data.status&&(t.$parent.$parent.getBoxSkins(),t.showDeleteSuccess())}))},showDeleteSuccess:function(){this.$vs.notify({color:"success",title:"提示",text:"删除成功"})}}},n=r,l=a("5d22"),o=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=o.exports},cc4f:function(t,e,a){},cf05:function(t,e,a){"use strict";a("e337")},dcbd:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-chip",{staticClass:"ag-grid-cell-chip",attrs:{color:t.chipColor(t.params.value)}},[a("span",[t._v(t._s(t.params.value))])])},s=[],r={name:"CellRendererStatus",computed:{chipColor:function(){return function(t){return"active"===t?"success":"blocked"===t?"danger":"deactivated"===t?"warning":"primary"}}}},n=r,l=(a("fdc7"),a("5d22")),o=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=o.exports},e337:function(t,e,a){},e3f7:function(t,e,a){},e652:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("feather-icon",{attrs:{icon:"CircleIcon",svgClasses:["fill-current h-4 w-4",t.textColor]}})},s=[],r={name:"CellRendererVerified",computed:{textColor:function(){return this.params.value?"text-primary":"text-grey"}}},n=r,l=a("5d22"),o=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=o.exports},ee31:function(t,e,a){"use strict";var i={products:[]},s=(a("a1d1"),{ADD_ITEM:function(t,e){t.products.unshift(e)},SET_PRODUCTS:function(t,e){t.products=e},UPDATE_PRODUCT:function(t,e){var a=t.products.findIndex((function(t){return t.id===e.id}));Object.assign(t.products[a],e)},REMOVE_ITEM:function(t,e){var a=t.products.findIndex((function(t){return t.id===e}));t.products.splice(a,1)}}),r=a("bb36"),n={addItem:function(t,e){var a=t.commit;return new Promise((function(t,i){r["a"].post("/api/data-list/products/",{item:e}).then((function(i){a("ADD_ITEM",Object.assign(e,{id:i.data.id})),t(i)})).catch((function(t){i(t)}))}))},fetchDataListItems:function(t){var e=t.commit;return new Promise((function(t,a){r["a"].get("/api/data-list/products").then((function(a){e("SET_PRODUCTS",a.data),t(a)})).catch((function(t){a(t)}))}))},updateItem:function(t,e){var a=t.commit;return new Promise((function(t,i){r["a"].post("/api/data-list/products/".concat(e.id),{item:e}).then((function(e){a("UPDATE_PRODUCT",e.data),t(e)})).catch((function(t){i(t)}))}))},removeItem:function(t,e){var a=t.commit;return new Promise((function(t,i){r["a"].delete("/api/data-list/products/".concat(e)).then((function(i){a("REMOVE_ITEM",e),t(i)})).catch((function(t){i(t)}))}))}},l={};e["a"]={isRegistered:!1,namespaced:!0,state:i,mutations:s,actions:n,getters:l}},fdc7:function(t,e,a){"use strict";a("cc4f")}}]);
//# sourceMappingURL=chunk-303bee6e.d6bfeb44.js.map