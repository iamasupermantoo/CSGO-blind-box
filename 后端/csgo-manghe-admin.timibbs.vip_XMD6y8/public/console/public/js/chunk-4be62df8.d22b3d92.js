(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4be62df8"],{"0cd7":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div")},s=[],n=(i("b06f"),{name:"DelFrame",props:{delValide:{type:Boolean,required:!0},delStatus:{type:[String,Number],default:null},delMsg:{type:String,default:null}},watch:{delValide:{handler:function(t){t&&this.confirmDeleteRecord()},deep:!0},delStatus:{handler:function(t){1==t?this.showDeleteSuccess(this.delMsg):2==t&&this.showDeleteDefault(this.delMsg)},deep:!0}},data:function(){return{delete_id:""}},methods:{confirmDeleteRecord:function(t){this.$vs.dialog({type:"confirm",color:"danger",title:"提示",text:"确定删除？",accept:this.deleteRecord,cancel:this.cancel,acceptText:"确定",cancelText:"取消"})},deleteRecord:function(){var t=this;t.$emit("closeDel",!0),t.$parent.delValide=!1},cancel:function(){var t=this;t.$emit("closeDel",!1),t.$parent.delValide=!1},showDeleteSuccess:function(t){this.$vs.notify({color:"success",title:"提示",text:t||"删除成功"})},showDeleteDefault:function(t){this.$vs.notify({color:"danger",title:"提示",text:t||"删除失败"})}},mounted:function(){}}),l=n,r=i("5d22"),c=Object(r["a"])(l,a,s,!1,null,null,null);e["a"]=c.exports},"9dbe":function(t,e,i){"use strict";i("a02d")},a02d:function(t,e,i){},d91f:function(t,e,i){"use strict";i("fc09")},de32:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("del-frame",{attrs:{delValide:t.delValide,delStatus:t.delStatus},on:{closeDel:t.isDel}}),i("data-editer",{attrs:{isSidebarActive:t.addNewDataSidebar,data:t.sidebarData},on:{closeSidebar:t.toggleDataSidebar,get:t.getActiveList}}),i("vx-card",{attrs:{"code-toggler":""}},[i("vs-dropdown",{staticClass:"cursor-pointer mb-4 mr-4 items-per-page-handler",attrs:{"vs-trigger-click":""}},[i("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[i("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.pageSize-(t.pageSize-1))+" - "+t._s(t.currentPage*t.pageSize)+" of "+t._s(t.total))]),i("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),i("vs-dropdown-menu",[i("vs-dropdown-item",{on:{click:function(e){t.pageSize=10}}},[i("span",[t._v("10")])]),i("vs-dropdown-item",{on:{click:function(e){t.pageSize=20}}},[i("span",[t._v("20")])]),i("vs-dropdown-item",{on:{click:function(e){t.pageSize=30}}},[i("span",[t._v("30")])]),i("vs-dropdown-item",{on:{click:function(e){t.pageSize=50}}},[i("span",[t._v("50")])])],1)],1),i("div",{staticClass:"vx-card p-6"},[i("div",{staticClass:"flex flex-wrap items-center"},[i("vs-button",{on:{click:t.addNewData}},[t._v("添加")])],1)]),i("vs-table",{attrs:{stripe:"",data:t.users},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,a){return i("vs-tr",{key:a},[i("vs-td",[t._v("\n            "+t._s(e.id)+"\n          ")]),i("vs-td",[i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(i){return t.toEdit(e)}}},[t._v(t._s(e.name))])]),i("vs-td",[t._v("\n            "+t._s(e.desc)+"\n          ")]),i("vs-td",[t._v("\n            "+t._s(e.start_time)+"\n          ")]),i("vs-td",[t._v("\n            "+t._s(e.end_time)+"\n          ")]),i("vs-td",[t._v("\n            "+t._s(e.create_time)+"\n          ")]),i("vs-td",[i("div",{style:{direction:t.$vs.rtl?"rtl":"ltr"}},[i("feather-icon",{attrs:{icon:"Edit3Icon",svgClasses:"h-5 w-5 mr-4 hover:text-primary cursor-pointer"},on:{click:function(i){return t.toEdit(e)}}}),i("feather-icon",{attrs:{icon:"Trash2Icon",svgClasses:"h-5 w-5 hover:text-danger cursor-pointer"},on:{click:function(i){return t.Delete(e.id)}}})],1)])],1)}))}}])},[i("template",{slot:"thead"},[i("vs-th",[t._v("id")]),i("vs-th",[t._v("活动类型")]),i("vs-th",{staticStyle:{width:"60px"}},[t._v("描述")]),i("vs-th",[t._v("开始时间")]),i("vs-th",[t._v("结束时间")]),i("vs-th",[t._v("添加时间")]),i("vs-th",[t._v("操作")])],1)],2)],1),i("vs-pagination",{attrs:{total:t.totalPages,max:7},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},s=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vs-sidebar",{staticClass:"add-new-data-sidebar items-no-padding",attrs:{"click-not-close":"","position-right":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:t.isSidebarActiveLocal,callback:function(e){t.isSidebarActiveLocal=e},expression:"isSidebarActiveLocal"}},[i("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[i("h4",[t._v(t._s(0===Object.entries(this.data).length?"添加":"编辑"))]),i("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(e){e.stopPropagation(),t.isSidebarActiveLocal=!1,t.activity={},t.imgFile=null}}})],1),i("vs-divider",{staticClass:"mb-0"}),i(t.scrollbarTag,{key:t.$vs.rtl,tag:"component",staticClass:"scroll-area--data-list-add-new",attrs:{settings:t.settings}},[[this.dataImgs?i("div",t._l(t.dataImgs,(function(e,a){return i("div",{key:a,staticClass:"img-container w-64 mx-auto flex items-center justify-center img-1-1"},[i("img",{staticClass:"responsive",attrs:{src:e,alt:"img"}}),i("feather-icon",{staticClass:"delete",attrs:{icon:"Trash2Icon",svgClasses:"h-5 w-5 hover:text-danger cursor-pointer"},on:{click:function(e){return t.Delete("data",a)}}})],1)})),0):t._e(),this.baseImgs?i("div",t._l(t.baseImgs,(function(e,a){return i("div",{key:a,staticClass:"img-container w-64 mx-auto flex items-center justify-center img-1-1"},[i("img",{staticClass:"responsive",attrs:{src:e,alt:"img"}}),i("feather-icon",{staticClass:"delete",attrs:{icon:"Trash2Icon",svgClasses:"h-5 w-5 hover:text-danger cursor-pointer"},on:{click:function(e){return t.Delete("base",a)}}})],1)})),0):t._e()],i("div",{staticClass:"upload-img mt-5"},[i("input",{ref:"uploadImgInput",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.updateCurrImg}}),0==t.dataImgs.length&&0==t.baseImgs.length?i("vs-button",{on:{click:function(e){return t.$refs.uploadImgInput.click()}}},[t._v("上传图片")]):t._e()],1),i("div",{staticClass:"p-6"},[i("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"名称",name:"item-name"},model:{value:t.activity.name,callback:function(e){t.$set(t.activity,"name",e)},expression:"activity.name"}}),i("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"赠送比列(%)",name:"item-name"},model:{value:t.activity.billie,callback:function(e){t.$set(t.activity,"billie",e)},expression:"activity.billie"}}),i("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"门槛(不设置或为0则不限制)",name:"item-name",placeholder:"不设置或0则为不限制"},model:{value:t.activity.money,callback:function(e){t.$set(t.activity,"money",e)},expression:"activity.money"}}),i("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"上限(不设置或为0则不限制)",name:"item-name",placeholder:"不设置或0则为不限制"},model:{value:t.activity.limit,callback:function(e){t.$set(t.activity,"limit",e)},expression:"activity.limit"}}),i("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"描述",name:"item-name"},model:{value:t.activity.desc,callback:function(e){t.$set(t.activity,"desc",e)},expression:"activity.desc"}}),i("vs-select",{staticClass:"mt-5 w-full",attrs:{label:"类型"},model:{value:t.activity.type,callback:function(e){t.$set(t.activity,"type",e)},expression:"activity.type"}},[i("vs-select-item",{key:"",attrs:{value:"",text:"请选择类型",disabled:"",checked:""}}),t._l(t.typeOption,(function(t,e){return i("vs-select-item",{key:e,attrs:{value:t.value,text:t.name}})}))],2),i("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"活动链接",name:"item-name"},model:{value:t.activity.url,callback:function(e){t.$set(t.activity,"url",e)},expression:"activity.url"}}),i("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"开始时间(不设置为不限制)",type:"datetime-local"},model:{value:t.activity.start_time,callback:function(e){t.$set(t.activity,"start_time",e)},expression:"activity.start_time"}}),i("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"结束时间(不设置为不限制)",type:"datetime-local"},model:{value:t.activity.end_time,callback:function(e){t.$set(t.activity,"end_time",e)},expression:"activity.end_time"}})],1)],2),i("div",{staticClass:"flex flex-wrap items-center p-6",attrs:{slot:"footer"},slot:"footer"},[i("vs-button",{staticClass:"mr-6",attrs:{disabled:!t.isFormValid},on:{click:t.submitData}},[t._v("提交")]),i("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(e){t.isSidebarActiveLocal=!1,t.activity={},t.imgFile=null}}},[t._v("取消")])],1)],1)},l=[],r=(i("f91a"),i("3a23"),i("612f"),i("bd70"),i("c322")),c=i.n(r),o={props:{isSidebarActive:{type:Boolean,required:!0},data:{type:Object,default:function(){}}},components:{VuePerfectScrollbar:c.a},data:function(){return{dataId:null,dataName:"",dataCategory:null,dataImg:null,dataImgs:[],baseImgs:[],dataOrder_status:"pending",dataPrice:0,dataTime:"",settings:{maxScrollbarLength:60,wheelSpeed:.6},activity:{id:"",type:"",name:"",desc:"",start_time:"",end_time:"",img:[],url:""},imgFile:"",imgFiles:[],typeOption:[{name:"首充",value:"1"},{name:"非首充",value:"2"}]}},watch:{isSidebarActive:function(t){if(t)if(0===Object.entries(this.data).length)this.initValues(),this.$validator.reset();else{var e=JSON.parse(JSON.stringify(this.data)),i=e.id,a=e.name,s=e.desc,n=e.start_time,l=e.end_time,r=e.type,c=e.url,o=e.img,d=e.billie,u=e.money,v=e.limit;this.activity.id=i,this.activity.name=a,this.activity.desc=s,this.activity.billie=d,this.activity.money=u,this.activity.limit=v,this.activity.url=c,this.activity.img=this.dataImgs=o,this.activity.start_time=n?n.replace(" ","T"):"",this.activity.end_time=l?l.replace(" ","T"):"",this.activity.type=r}else this.initValues()}},computed:{isSidebarActiveLocal:{get:function(){return this.isSidebarActive},set:function(t){t||this.$emit("closeSidebar")}},isFormValid:function(){return!0},scrollbarTag:function(){return this.$store.getters.scrollbarTag}},methods:{initValues:function(){this.activity={type:""},this.imgFiles=[],this.dataImgs=[],this.baseImgs=[]},submitData:function(){var t=this,e=this,i=new FormData;i.append("data",JSON.stringify(e.activity)),e.imgFiles.forEach((function(t,a){i.append("img"+a,e.imgFiles[a])}));var a="/admin/activity/addActivity";e.$axios({url:a,method:"post",data:i,headers:{"Content-Type":"multipart/form-data"}}).then((function(i){console.log(i),1==i.data.status?(e.$vs.notify({title:"提示",text:i.data.msg,iconPack:"feather",icon:"icon-alert-circle",color:"success"}),t.$emit("closeSidebar"),t.$emit("get")):e.$vs.notify({title:"提示",text:i.data.msg,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},Delete:function(t,e){"data"==t?this.dataImgs.splice(e,1):"base"==t&&(this.baseImgs.splice(e,1),this.imgFiles.splice(e,1))},updateCurrImg:function(t){var e=this;if(t.target.files&&t.target.files[0]){var i=new FileReader;i.onload=function(i){e.dataImg=i.target.result,e.baseImgs.push(i.target.result),e.imgFile=t.target.files[0],e.imgFiles.push(t.target.files[0])},i.readAsDataURL(t.target.files[0])}}}},d=o,u=(i("d91f"),i("5d22")),v=Object(u["a"])(d,n,l,!1,null,"9c258a9e",null),m=v.exports,p=i("0cd7"),f={components:{DataEditer:m,DelFrame:p["a"]},data:function(){return{addNewDataSidebar:!1,sidebarData:{},users:[],total:0,totalPages:0,currentPage:1,pageSize:10,delValide:!1,delStatus:0,del_id:""}},computed:{},watch:{currentPage:{handler:function(t){this.getActiveList()}},pageSize:{handler:function(t){this.getActiveList()}}},methods:{getActiveList:function(){var t=this;t.$axios({url:"/admin/Activity/rechargeActivity",method:"post",data:{page:t.currentPage,pageSize:t.pageSize}}).then((function(e){1==e.data.status?(t.users=e.data.data.list,t.total=e.data.data.total,t.totalPages=t.pageTotal(t.total,t.pageSize)):t.users=[]}))},pageTotal:function(t,e){return null==t||""==t?0:0!=e&&t%e==0?parseInt(t/e):0!=e&&t%e!=0?parseInt(t/e)+1:void 0},toEdit:function(t){this.sidebarData=t,this.toggleDataSidebar(!0)},addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},toggleDataSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=t},Delete:function(t){var e=this;e.del_id=t,e.closeDel()},closeDel:function(){var t=this;t.delValide=!0},isDel:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t){var e=this;e.$axios({url:"/admin/Activity/delRechargeActivity",method:"post",data:{id:e.del_id}}).then((function(t){1==t.data.status?(e.getActiveList(),e.delStatus=1):e.delStatus=2}))}}},mounted:function(){this.getActiveList()}},g=f,h=(i("9dbe"),Object(u["a"])(g,a,s,!1,null,null,null));e["default"]=h.exports},fc09:function(t,e,i){}}]);
//# sourceMappingURL=chunk-4be62df8.d22b3d92.js.map