(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-499b5a01"],{"137b":function(t,a,e){"use strict";e("1c8a")},"1c8a":function(t,a,e){},4811:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("data-view-sidebar",{attrs:{isSidebarActive:t.addNewDataSidebar,data:t.sidebarData},on:{closeSidebar:t.toggleDataSidebar}}),e("vx-card",{attrs:{"code-toggler":""}},[e("div",{staticClass:"vx-card p-6"},[e("div",{staticClass:"flex flex-wrap items-center"},[e("vs-button",{on:{click:t.addNewData}},[t._v("添加")])],1)]),e("vs-table",{attrs:{stripe:"",data:t.task},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.data;return t._l(i,(function(a,i){return e("vs-tr",{key:i},[e("vs-td",[t._v("\n            "+t._s(a.name)+"\n          ")]),e("vs-td",[t._v("\n            "+t._s(a.num)+"\n          ")]),e("vs-td",[t._v("\n            "+t._s(a.min)+" s ~ "+t._s(a.max)+" s\n          ")]),e("vs-td",[e("vs-switch",{nativeOn:{change:function(a){return t.change(i)}},model:{value:a.status,callback:function(e){t.$set(a,"status",e)},expression:"tr.status"}})],1),e("vs-td",[t._v("\n            "+t._s(a.create_time)+"\n          ")]),e("vs-td",[e("div",{staticStyle:{display:"flex"},style:{direction:t.$vs.rtl?"rtl":"ltr"}},[e("feather-icon",{attrs:{icon:"Edit3Icon",svgClasses:"h-5 w-5 mr-4 hover:text-primary cursor-pointer"},on:{click:function(e){return t.toEdit(a)}}})],1)])],1)}))}}])},[e("template",{slot:"thead"},[e("vs-th",[t._v("任务名称")]),e("vs-th",[t._v("任务描述")]),e("vs-th",[t._v("执行时间间隔")]),e("vs-th",[t._v("状态")]),e("vs-th",[t._v("添加时间")]),e("vs-th",[t._v("操作")])],1)],2),e("vs-pagination",{staticStyle:{"margin-top":"15px"},attrs:{total:t.totalPages,max:7},model:{value:t.currentPage,callback:function(a){t.currentPage=a},expression:"currentPage"}})],1)],1)},s=[],n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("vs-sidebar",{staticClass:"add-new-data-sidebar items-no-padding",attrs:{"click-not-close":"","position-right":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:t.isSidebarActiveLocal,callback:function(a){t.isSidebarActiveLocal=a},expression:"isSidebarActiveLocal"}},[e("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[e("h4",[t._v(t._s(0===Object.entries(this.data).length?"添加":"编辑")+" 任务")]),e("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(a){a.stopPropagation(),t.isSidebarActiveLocal=!1}}})],1),e("vs-divider",{staticClass:"mb-0"}),e(t.scrollbarTag,{key:t.$vs.rtl,tag:"component",staticClass:"scroll-area--data-list-add-new",attrs:{settings:t.settings}},[e("div",{staticClass:"p-6"},[e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"任务名称",name:"item-name"},model:{value:t.name,callback:function(a){t.name=a},expression:"name"}}),e("vs-select",{staticClass:"mt-5 w-full",attrs:{label:"任务类型",name:"item-category"},model:{value:t.type,callback:function(a){t.type=a},expression:"type"}},t._l(t.taskType,(function(t){return e("vs-select-item",{key:t.value,attrs:{value:t.value,text:t.label}})})),1),e("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"任务描述",name:"item-name"},model:{value:t.desc,callback:function(a){t.desc=a},expression:"desc"}}),e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"执行最小间隔(秒)",name:"item-name"},model:{value:t.min,callback:function(a){t.min=a},expression:"min"}}),e("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"执行最大间隔(秒)",name:"item-name"},model:{value:t.max,callback:function(a){t.max=a},expression:"max"}})],1)]),e("div",{staticClass:"flex flex-wrap items-center p-6",attrs:{slot:"footer"},slot:"footer"},[e("vs-button",{staticClass:"mr-6",attrs:{disabled:!t.isFormValid},on:{click:t.submitData}},[t._v("保存")]),e("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(a){t.isSidebarActiveLocal=!1}}},[t._v("取消")])],1)],1)},r=[],l=(e("3a23"),e("612f"),e("bd70"),e("c322")),o=e.n(l),c={props:{isSidebarActive:{type:Boolean,required:!0},data:{type:Object,default:function(){}}},components:{VuePerfectScrollbar:o.a},data:function(){return{name:"",type:"",desc:"",min:"",max:"",settings:{maxScrollbarLength:60,wheelSpeed:.6},taskType:[{value:1,label:"对战"},{value:2,label:"盲盒开箱"}]}},watch:{isSidebarActive:function(t){if(t)if(0===Object.entries(this.data).length)this.initValues(),this.$validator.reset();else{var a=JSON.parse(JSON.stringify(this.data)),e=a.id,i=a.name,s=a.type,n=a.min,r=a.max;this.dataId=e,this.name=i,this.type=s,this.min=n,this.max=r,this.initValues()}}},computed:{isSidebarActiveLocal:{get:function(){return this.isSidebarActive},set:function(t){t||this.$emit("closeSidebar")}},isFormValid:function(){return!this.errors.any()&&this.name&&this.type&&this.min&&this.max>0},scrollbarTag:function(){return this.$store.getters.scrollbarTag}},methods:{initValues:function(){this.data.id||(this.dataId="",this.name="",this.type="",this.min="",this.max="")},submitData:function(){var t=this;t.$validator.validateAll().then((function(a){if(a){var e={id:t.dataId,name:t.name,type:t.type,min:t.min,max:t.max};t.$axios({url:"/admin/Robot/addTask",method:"post",data:e}).then((function(a){1==a.data.status?(t.$emit("closeSidebar"),t.initValues(),t.notify("success","保存成功")):t.notify("danger",a.data.msg)}))}}))},notify:function(t,a){this.$vs.notify({title:"提示",text:a,iconPack:"feather",icon:"icon-alert-circle",color:t})},updateCurrImg:function(t){var a=this;if(t.target.files&&t.target.files[0]){var e=new FileReader;e.onload=function(t){a.dataImg=t.target.result},e.readAsDataURL(t.target.files[0])}}}},d=c,u=(e("e759"),e("5d22")),v=Object(u["a"])(d,n,r,!1,null,"7fce3517",null),m=v.exports,f={components:{DataViewSidebar:m},data:function(){return{addNewDataSidebar:!1,sidebarData:{},task:[],currentPage:1,pageSize:10,total:0,totalPages:1}},computed:{},methods:{getTask:function(){var t=this;t.$axios({url:"/admin/Robot/getTask",method:"post",data:{page:t.currentPage,pageSize:t.pageSize}}).then((function(a){1==a.data.status?t.task=a.data.data.list:t.task=[]}))},toEdit:function(t){this.addNewDataSidebar=!0,this.sidebarData=t,console.log(t)},restart:function(t){console.log(t)},change:function(t){var a=this;a.$axios({url:"/admin/Task/start",method:"post",data:{id:a.task[t].id,status:a.task[t].status,type:a.task[t].type}}).then((function(t){t.data.status}))},notify:function(t,a){this.$vs.notify({title:"提示",text:a,iconPack:"feather",icon:"icon-alert-circle",color:t})},addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},toggleDataSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=t,this.getTask()},alter:function(t){console.log(t)},rem:function(t){console.log(t)}},mounted:function(){this.getTask()}},p=f,h=(e("137b"),Object(u["a"])(p,i,s,!1,null,null,null));a["default"]=h.exports},"8b89":function(t,a,e){},e759:function(t,a,e){"use strict";e("8b89")}}]);
//# sourceMappingURL=chunk-499b5a01.8e3d28b5.js.map