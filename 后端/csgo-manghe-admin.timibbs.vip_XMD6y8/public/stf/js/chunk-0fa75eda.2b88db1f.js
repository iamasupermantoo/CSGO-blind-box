(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fa75eda"],{"07f7":function(e,t,a){},"0d3e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"page-user-list"}},[t("data-view-sidebar",{attrs:{isSidebarActive:e.addNewDataSidebar,data:e.sidebarData},on:{closeSidebar:e.toggleDataSidebar,reload:e.getBoxList}}),t("vx-card",{ref:"filterCard",staticClass:"user-list-filters mb-8",attrs:{title:"条件搜索",actionButtons:""},on:{refresh:e.resetColFilters,remove:e.resetColFilters}},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[t("label",{staticClass:"text-sm opacity-75"},[e._v("箱子类型")]),t("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.roleOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.roleFilter,callback:function(t){e.roleFilter=t},expression:"roleFilter"}})],1)])]),t("div",{staticClass:"vx-card p-6"},[t("div",{staticClass:"flex flex-wrap items-center"},[t("div",{staticClass:"flex-grow"},[t("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-trigger-click":""}},[t("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[t("span",{staticClass:"mr-2"},[e._v(e._s(e.currentPage*e.paginationPageSize-(e.paginationPageSize-1))+"\n              -\n              "+e._s(e.currentPage*e.paginationPageSize)+"\n              of "+e._s(e.total))]),t("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),t("vs-dropdown-menu",[t("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(10)}}},[t("span",[e._v("10")])]),t("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(20)}}},[t("span",[e._v("20")])]),t("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(30)}}},[t("span",[e._v("30")])]),t("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(50)}}},[t("span",[e._v("50")])])],1)],1)],1),t("vs-input",{staticClass:"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4",attrs:{placeholder:"搜索"},on:{input:e.updateSearchQuery},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),t("vs-button",{on:{click:e.addNewData}},[e._v("添加")])],1),t("ag-grid-vue",{ref:"agGridTable",staticClass:"ag-theme-material w-100 my-4 ag-grid-table",attrs:{components:e.components,gridOptions:e.gridOptions,columnDefs:e.columnDefs,defaultColDef:e.defaultColDef,rowData:e.boxList,rowSelection:"multiple",colResizeDefault:"shift",animateRows:!0,floatingFilter:!1,pagination:!0,paginationPageSize:e.paginationPageSize,suppressPaginationPanel:!0,enableRtl:e.$vs.rtl}}),t("vs-pagination",{attrs:{total:e.totalPages,max:7},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)},r=[],s=(a("c5f6"),a("ac6a"),a("f3e2"),a("401b")),n=(a("4e06"),a("4a7a")),o=a.n(n),l=a("4faa"),c=a("8e20"),d=a("dcbd"),u=a("e652"),f=a("c626"),p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex items-center opp"},[t("feather-icon",{attrs:{icon:"EditIcon",svgClasses:"w-5 h-5 hover:text-primary stroke-current"},on:{click:function(t){return t.stopPropagation(),e.editData(e.params)}}}),t("feather-icon",{staticClass:"ml-2",attrs:{icon:"TrashIcon",svgClasses:"w-5 h-5 hover:text-danger stroke-current"},on:{click:function(t){return t.stopPropagation(),e.deleteData(e.params.id)}}})],1)},g=[],m={name:"CellRendererOpp",data:function(){return{}},methods:{editData:function(e){var t=this;t.$parent.$parent.sidebarData=e.data,t.$parent.$parent.toggleDataSidebar(!0)}}},h=m,v=(a("813e"),a("2877")),b=Object(v["a"])(h,p,g,!1,null,null,null),x=b.exports,w=(a("ffc1"),function(){var e=this,t=e._self._c;return t("vs-sidebar",{staticClass:"add-new-data-sidebar items-no-padding",attrs:{"click-not-close":"","position-right":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:e.isSidebarActiveLocal,callback:function(t){e.isSidebarActiveLocal=t},expression:"isSidebarActiveLocal"}},[t("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[t("h4",[e._v("\n      "+e._s(0===Object.entries(this.data).length?"添加":"编辑")+" 箱子\n    ")]),t("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(t){t.stopPropagation(),e.isSidebarActiveLocal=!1}}})],1),t("vs-divider",{staticClass:"mb-0"}),t(e.scrollbarTag,{key:e.$vs.rtl,tag:"component",staticClass:"scroll-area--data-list-add-new",attrs:{settings:e.settings}},[t("div",{staticClass:"p-6"},[t("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"箱子名称",name:"item-name"},model:{value:e.boxName,callback:function(t){e.boxName=t},expression:"boxName"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("item-name"),expression:"errors.has('item-name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("item-name")))])],1)]),t("div",{staticClass:"flex flex-wrap items-center p-6",attrs:{slot:"footer"},slot:"footer"},[t("vs-button",{staticClass:"mr-6",on:{click:e.submitData}},[e._v("提交")]),t("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(t){e.isSidebarActiveLocal=!1}}},[e._v("取消")])],1)],1)}),C=[],S=a("9d63"),y=a.n(S),P={props:{isSidebarActive:{type:Boolean,required:!0},data:{type:Object,default:function(){}}},components:{VuePerfectScrollbar:y.a},data:function(){return{boxId:null,boxName:"",boxPrice:"",dataCategory:[],category_choices:[],settings:{maxScrollbarLength:60,wheelSpeed:.6},file:""}},watch:{isSidebarActive:function(e){}},computed:{isSidebarActiveLocal:{get:function(){return this.isSidebarActive},set:function(e){e||this.$emit("closeSidebar")}},isFormValid:function(){return!this.errors.any()&&this.dataName&&this.dataCategory&&this.dataPrice>0},scrollbarTag:function(){return this.$store.getters.scrollbarTag}},methods:{initValues:function(){this.data.id||(this.dataId=null,this.boxName="")},submitData:function(){var e=this,t={name:this.boxName};console.log(t);var a=this;a.$axios({url:"/admin/Box/addBox",method:"post",data:t}).then((function(t){1==t.data.status?(a.$vs.notify({title:"提示",text:t.data.msg,iconPack:"feather",icon:"icon-alert-circle",color:"success"}),e.$emit("closeSidebar"),e.$emit("reload"),e.initValues()):a.$vs.notify({title:"提示",text:t.data.msg,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},updateCurrImg:function(e){var t=this;if(e.target.files&&e.target.files[0]){var a=new FileReader;a.onload=function(e){t.dataImg=e.target.result},a.readAsDataURL(e.target.files[0]),this.file=e.target.files[0]}}}},k=P,_=(a("51ca"),Object(v["a"])(k,w,C,!1,null,"58c53a12",null)),D=_.exports,A={components:{AgGridVue:s["AgGridVue"],vSelect:o.a,DataViewSidebar:D,CellRendererLink:c["a"],CellRendererStatus:d["a"],CellRendererVerified:u["a"],CellRendererActions:f["a"],CellRenderOpp:x},data:function(){return{addNewDataSidebar:!1,sidebarData:{},roleFilter:{label:"所有",value:""},roleOptions:[],searchQuery:"",gridApi:null,gridOptions:{},defaultColDef:{sortable:!0,resizable:!1,suppressMenu:!1},columnDefs:[{headerName:"名称",field:"name",filter:!0,width:200,cellRendererFramework:"CellRendererLink"},{headerName:"价格",field:"price",width:125},{headerName:"类型",field:"rarity_name",width:100},{headerName:"是否对战",field:"battle",width:130},{headerName:"总库存",field:"total_stock",width:120},{headerName:"总库存(G)",field:"total_stock_group",width:125},{headerName:"总库存(V)",field:"total_stock_vip",width:125},{headerName:"状态",field:"flag",width:100},{headerName:"创建时间",field:"create_time",width:200}],components:{CellRendererLink:c["a"],CellRendererStatus:d["a"],CellRendererVerified:u["a"],CellRendererActions:f["a"]},boxList:[],boxRarity:[],params:{},total:0,totalPages:0,currentPage:1}},watch:{roleFilter:function(e){this.setColumnFilter("role",e.value)},statusFilter:function(e){this.setColumnFilter("status",e.value)},isVerifiedFilter:function(e){var t="all"===e.value?"all":"yes"===e.value?"true":"false";this.setColumnFilter("is_verified",t)},departmentFilter:function(e){this.setColumnFilter("department",e.value)},currentPage:{handler:function(e){var t=this;t.getBoxList()},deep:!0},paginationPageSize:{handler:function(e){var t=this;t.getBoxList()},deep:!0}},computed:{paginationPageSize:function(){return this.gridApi?this.gridApi.paginationGetPageSize():10}},methods:{getBoxList:function(){var e=this,t={page:e.currentPage,pageSize:e.paginationPageSize};e.$axios({url:"/admin/Box/boxList",method:"post",data:t}).then((function(t){console.log(t),1==t.data.status?(t.data.data.list.forEach((function(e){e["flag"]=1==e["flag"]?"正常":"禁用",e["battle"]=1==e["battle"]?"是":"否"})),e.boxList=t.data.data.list,e.total=t.data.data.total,e.totalPages=e.pageTotal(e.total,e.paginationPageSize)):(e.boxList=[],e.total=0)}))},pageTotal:function(e,t){return null==e||""==e?0:0!=t&&e%t==0?parseInt(e/t):0!=t&&e%t!=0?parseInt(e/t)+1:void 0},getBoxRarity:function(){var e=this;e.$axios({url:"/admin/Box/boxRarity",method:"post",params:{}}).then((function(t){t.data.data.forEach((function(e){e["value"]=e["id"],e["label"]=e["rarity_name"]}));var a={label:"所有",value:""};t.data.data.unshift(a),e.roleOptions=t.data.data}))},addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},toggleDataSidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=e},setColumnFilter:function(e,t){console.log(e,t);var a=this;a.params={box_rarity_id:t},a.getBoxList()},resetColFilters:function(){this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged(),this.roleFilter=this.statusFilter=this.isVerifiedFilter=this.departmentFilter={label:"All",value:"all"},this.$refs.filterCard.removeRefreshAnimation()},updateSearchQuery:function(e){this.gridApi.setQuickFilter(e)}},mounted:function(){if(this.getBoxList(),this.getBoxRarity(),this.gridApi=this.gridOptions.api,this.$vs.rtl){var e=this.$refs.agGridTable.$el.querySelector(".ag-header-container");e.style.left="-".concat(String(Number(e.style.transform.slice(11,-3))+9),"px")}},created:function(){l["a"].isRegistered||(this.$store.registerModule("userManagement",l["a"]),l["a"].isRegistered=!0),this.$store.dispatch("userManagement/fetchUsers").catch((function(e){console.error(e)}))}},F=A,R=(a("27fd"),Object(v["a"])(F,i,r,!1,null,null,null));t["default"]=R.exports},"1ee5":function(e,t,a){},"27fd":function(e,t,a){"use strict";a("1ee5")},"2c1e":function(e,t,a){},"51ca":function(e,t,a){"use strict";a("07f7")},"813e":function(e,t,a){"use strict";a("2c1e")}}]);
//# sourceMappingURL=chunk-0fa75eda.2b88db1f.js.map