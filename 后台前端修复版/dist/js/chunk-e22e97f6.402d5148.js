(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e22e97f6"],{"2a7a":function(e,t,a){"use strict";a("ef94")},4613:function(e,t,a){},"4faa":function(e,t,a){"use strict";var i={users:[]},n=(a("20d6"),{SET_USERS:function(e,t){e.users=t},REMOVE_RECORD:function(e,t){var a=e.users.findIndex((function(e){return e.id===t}));e.users.splice(a,1)}}),s=a("bb36"),r={fetchUsers:function(e){var t=e.commit;return new Promise((function(e,a){s["a"].get("/api/user-management/users").then((function(a){t("SET_USERS",a.data),e(a)})).catch((function(e){a(e)}))}))},fetchUser:function(e,t){return new Promise((function(e,a){s["a"].get("/api/user-management/users/".concat(t)).then((function(t){e(t)})).catch((function(e){a(e)}))}))},removeRecord:function(e,t){var a=e.commit;return new Promise((function(e,i){s["a"].delete("/api/user-management/users/".concat(t)).then((function(i){a("REMOVE_RECORD",t),e(i)})).catch((function(e){i(e)}))}))}},l={};t["a"]={isRegistered:!1,namespaced:!0,state:i,mutations:n,actions:r,getters:l}},"5b61":function(e,t,a){"use strict";a("80a4")},"80a4":function(e,t,a){},a95f:function(e,t,a){"use strict";a.r(t);a("386d");var i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"page-user-list"}},[t("vx-card",{ref:"filterCard",staticClass:"user-list-filters mb-8",attrs:{title:"条件搜索",actionButtons:""},on:{refresh:e.resetColFilters,remove:e.resetColFilters}},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[t("label",{staticClass:"text-sm opacity-75"},[e._v("状态")]),t("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.statusOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.roleFilter,callback:function(t){e.roleFilter=t},expression:"roleFilter"}})],1),t("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[t("vs-input",{staticClass:"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4",attrs:{label:"关键字搜索",placeholder:"关键字"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),t("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[t("vs-input",{staticClass:"w-full",attrs:{label:"开始时间",type:"date"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),t("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[t("vs-input",{staticClass:"w-full",attrs:{label:"结束时间",type:"date"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1),t("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[t("vs-button",{staticClass:"search",on:{click:e.search}},[e._v("搜索")]),t("vs-button",{staticClass:"search",on:{click:e.clear}},[e._v("清空")])],1)])]),t("div",{staticClass:"vx-card p-6"},[t("div",{staticClass:"flex flex-wrap items-center"},[t("div",{staticClass:"flex-grow"},[t("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-trigger-click":""}},[t("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[t("span",{staticClass:"mr-2"},[e._v(e._s(e.currentPage*e.pageSize-(e.pageSize-1))+"\n              -\n              "+e._s(e.currentPage*e.pageSize)+"\n              of "+e._s(e.total))]),t("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),t("vs-dropdown-menu",[t("vs-dropdown-item",{on:{click:function(t){e.pageSize=10}}},[t("span",[e._v("10")])]),t("vs-dropdown-item",{on:{click:function(t){e.pageSize=20}}},[t("span",[e._v("20")])]),t("vs-dropdown-item",{on:{click:function(t){e.pageSize=30}}},[t("span",[e._v("30")])]),t("vs-dropdown-item",{on:{click:function(t){e.pageSize=50}}},[t("span",[e._v("50")])])],1)],1)],1)]),t("ag-grid-vue",{ref:"agGridTable",staticClass:"ag-theme-material w-100 my-4 ag-grid-table",attrs:{gridOptions:e.gridOptions,columnDefs:e.columnDefs,defaultColDef:e.defaultColDef,rowData:e.list,rowSelection:"multiple",colResizeDefault:"shift",pagination:!0,paginationPageSize:e.pageSize,suppressPaginationPanel:!0,enableRtl:e.$vs.rtl}}),t("vs-pagination",{attrs:{total:e.totalPages,max:7},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)},n=[],s=(a("c5f6"),a("a481"),a("6b54"),a("87b3"),a("7f7f"),a("28a5"),a("ac6a"),a("f3e2"),a("401b")),r=(a("4e06"),a("4a7a")),l=a.n(r),o=a("4faa"),c=function(){var e=this,t=e._self._c;return t("div",{staticClass:"items-center"},[t("div",{staticClass:"just"},e._l(e.player_info,(function(a,i){return t("span",{key:i,staticClass:"span"},[e._v("\n              "+e._s(a.name)+" \n          ")])})),0)])},u=[],d={name:"CellPlayer",data:function(){return{player_info:[]}},computed:{url:function(){}},mounted:function(){this.player_info=this.params.data.player_info}},f=d,m=(a("5b61"),a("2877")),h=Object(m["a"])(f,c,u,!1,null,null,null),p=h.exports,g=function(){var e=this,t=e._self._c;return t("div",{staticClass:"items-center"},[t("div",{staticClass:"just"},e._l(e.boxInfo,(function(a,i){return t("span",{key:i},[e._v("\n        "+e._s(a.name)+"   \n      ")])})),0)])},v=[],w={name:"CellPlayer",data:function(){return{boxInfo:[]}},computed:{url:function(){}},mounted:function(){this.boxInfo=this.params.data.boxInfo,console.log(this.boxInfo)}},b=w,_=(a("d703"),Object(m["a"])(b,g,v,!1,null,null,null)),C=_.exports,x={components:{AgGridVue:s["AgGridVue"],vSelect:l.a,CellPlayer:p,CellBox:C},data:function(){return{list:[],statusOptions:[{label:"所有",value:""},{label:"已支付",value:"3"},{label:"未支付",value:"1"}],startTime:"0000-00-00 00:00:00",endTime:this.dateFormat("y-m-d h:i:s",new Date),currentPage:1,pageSize:10,totalPages:0,total:0,status:"",roleFilter:{label:"所有",value:"1"},roleOptions:[{label:"所有",value:"1"},{label:"未开始",value:"2"},{label:"以结束",value:"3"},{label:"以解散",value:"4"}],input1:"2020-12-28",input2:"2020-12-29",searchQuery:"",gridApi:null,gridOptions:{},defaultColDef:{sortable:!0,resizable:!0,suppressMenu:!0},columnDefs:[{headerName:"Id",field:"id",filter:!0,width:125},{headerName:"时间",field:"create_time",filter:!0,width:190},{headerName:"房主",field:"home_owner_name",filter:!0,width:135},{headerName:"创建金额",field:"total_price",filter:!0,width:125},{headerName:"开出饰品价值",field:"total_value",filter:!0,width:135},{headerName:"获胜者",field:"winner_name",filter:!0,width:150},{headerName:"胜利奖励",field:"winner_total",filter:!0,width:150},{headerName:"参与人员",filter:!0,cellRendererFramework:"CellPlayer"},{headerName:"加入的箱子",filter:!0,cellRendererFramework:"CellBox"},{headerName:"状态",field:"statusStr",filter:!0,width:125}],components:{CellPlayer:p,CellBox:C}}},watch:{currentPage:function(){this.getList()},pageSize:function(){this.getList()}},computed:{},methods:{getList:function(){var e=this;e.$axios({url:"/admin/Record/battleRecord",method:"post",data:{page:e.currentPage,pageSize:e.pageSize,status:e.status,searchKey:e.searchQuery,startTime:e.startTime,endTime:e.endTime}}).then((function(t){if(1==t.data.status){var a=t.data.data.list;a.forEach((function(e){if(e.total_price=e.total_price,""==e.winner||null==e.winner){e.winner_name=3==e.status||2==e.status?"平局":"";var t=0;e.result_info?(e.result_info.forEach((function(e){e.forEach((function(e){t+=parseFloat(e.price)}))})),e.winner_total=(t/e.mode).toFixed(2)+" * "+e.mode):e.winner_total="0.00"}else{var a=e.winner.split(","),i="";e.winner&&e.player_info&&e.player_info.forEach((function(t){1==a.length&&e.winner==t.id&&(e.winner_name=t.name),a.length>1&&(a.forEach((function(e,a){e==t.id&&(console.log(t.name),0==a?i=t.name:i+=","+t.name)})),e.winner_name=i)}));var n=0;e.result_info&&(e.result_info.forEach((function(e){e.forEach((function(e){n+=parseFloat(e.price)}))})),e.winner_total=(n/a.length).toFixed(2)+(a.length>1?" * "+a.length:""))}})),e.list=a,e.total=t.data.data.total,e.totalPages=e.pageTotal(e.total,e.pageSize)}else e.list=[],e.total=0,e.totalPages=1}))},search:function(){this.status=this.roleFilter.value,this.currentPage=1,this.getList()},clear:function(){""==this.startTime&&""==this.endTime&&""==this.status||(this.startTime="",this.endTime="",this.status="",this.searchQuery="",this.roleFilter={label:"所有",value:""},this.getList())},pageTotal:function(e,t){return null==e||""==e?0:0!=t&&e%t==0?parseInt(e/t):0!=t&&e%t!=0?parseInt(e/t)+1:void 0},dateFormat:function(e,t){var a,i="ymdhis";e||(e="y-m-d h:i:s"),a=t?new Date(t):new Date;for(var n=[a.getFullYear().toString(),(a.getMonth()+1).toString(),a.getDate().toString(),a.getHours().toString(),a.getMinutes().toString(),a.getSeconds().toString()],s=0;s<n.length;s++)e=e.replace(i.charAt(s),n[s]);return e},geiTime:function(){var e=new Date;e.setTime(e.getTime());var t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),a=new Date;a.setTime(a.getTime()+864e5);var i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();this.input1=t,this.input2=i},setColumnFilter:function(e,t){var a=this.gridApi.getFilterInstance(e),i=null;"all"!==t&&(i={type:"equals",filter:t}),a.setModel(i),this.gridApi.onFilterChanged()},resetColFilters:function(){this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged(),this.roleFilter=this.statusFilter=this.isVerifiedFilter=this.departmentFilter={label:"All",value:"all"},this.$refs.filterCard.removeRefreshAnimation()},updateSearchQuery:function(e){this.gridApi.setQuickFilter(e)}},mounted:function(){if(this.geiTime(),this.gridApi=this.gridOptions.api,this.getList(),this.$vs.rtl){var e=this.$refs.agGridTable.$el.querySelector(".ag-header-container");e.style.left="-".concat(String(Number(e.style.transform.slice(11,-3))+9),"px")}},created:function(){o["a"].isRegistered||(this.$store.registerModule("userManagement",o["a"]),o["a"].isRegistered=!0),this.$store.dispatch("userManagement/fetchUsers").catch((function(e){console.error(e)}))}},y=x,S=(a("2a7a"),Object(m["a"])(y,i,n,!1,null,null,null));t["default"]=S.exports},d703:function(e,t,a){"use strict";a("4613")},ef94:function(e,t,a){}}]);
//# sourceMappingURL=chunk-e22e97f6.402d5148.js.map