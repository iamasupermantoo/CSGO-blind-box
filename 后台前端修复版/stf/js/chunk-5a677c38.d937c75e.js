(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a677c38"],{"477d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"page-user-list"}},[a("vx-card",{ref:"filterCard",staticClass:"user-list-filters mb-8",attrs:{title:"条件搜索",actionButtons:""},on:{refresh:e.resetColFilters,remove:e.resetColFilters}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("label",{staticClass:"text-sm opacity-75"},[e._v("额外概率")]),a("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.statusOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.statusFilter,callback:function(t){e.statusFilter=t},expression:"statusFilter"}})],1),a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("label",{staticClass:"text-sm opacity-75"},[e._v("Vip")]),a("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.vipOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.vipFilter,callback:function(t){e.vipFilter=t},expression:"vipFilter"}})],1),a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("label",{staticClass:"text-sm opacity-75"},[e._v("主播")]),a("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.anchorOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.anchorFilter,callback:function(t){e.anchorFilter=t},expression:"anchorFilter"}})],1),a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("label",{staticClass:"text-sm opacity-75"},[e._v("关键字搜索")]),a("vs-input",{staticClass:"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4",attrs:{placeholder:"关键字"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("vs-button",{staticClass:"search",on:{click:e.search}},[e._v("搜索")]),a("vs-button",{staticClass:"search",on:{click:e.clear}},[e._v("清空")])],1)])]),a("div",{staticClass:"vx-card p-6"},[a("div",{staticClass:"flex flex-wrap items-center"},[a("div",{staticClass:"flex-grow"},[a("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[e._v(e._s(e.currentPage*e.paginationPageSize-(e.paginationPageSize-1))+" - "+e._s(e.currentPage*e.paginationPageSize)+" of "+e._s(e.total))]),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(t){e.pageSize=10}}},[a("span",[e._v("10")])]),a("vs-dropdown-item",{on:{click:function(t){e.pageSize=20}}},[a("span",[e._v("20")])]),a("vs-dropdown-item",{on:{click:function(t){e.pageSize=30}}},[a("span",[e._v("30")])]),a("vs-dropdown-item",{on:{click:function(t){e.pageSize=50}}},[a("span",[e._v("50")])])],1)],1)],1),a("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-trigger-click":""}})],1),a("ag-grid-vue",{ref:"agGridTable",staticClass:"ag-theme-material w-100 my-4 ag-grid-table",attrs:{components:e.components,gridOptions:e.gridOptions,columnDefs:e.columnDefs,defaultColDef:e.defaultColDef,rowData:e.usersData,rowSelection:"multiple",colResizeDefault:"shift",pagination:!0,paginationPageSize:e.paginationPageSize,suppressPaginationPanel:!0,enableRtl:e.$vs.rtl}}),a("vs-pagination",{attrs:{total:e.totalPages,max:7},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)},s=[],i=(a("c5f6"),a("ac6a"),a("f3e2"),a("8449"),a("401b")),l=(a("4e06"),a("4a7a")),n=a.n(l),o=a("4faa"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex items-center"},[a("vs-avatar",{staticClass:"flex-shrink-0 mr-2",attrs:{src:e.params.data.avatar,size:"30px"},on:{click:function(t){return e.$router.push(e.url)}}}),a("router-link",{staticClass:"text-inherit hover:text-primary",attrs:{to:e.url},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[e._v(e._s(e.params.value))])],1)},u=[],d={name:"CellRendererLink",computed:{url:function(){return"/apps/user/user-view/"+this.params.data.id}},mounted:function(){}},f=d,p=a("2877"),h=Object(p["a"])(f,c,u,!1,null,null,null),m=h.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vs-chip",{staticClass:"ag-grid-cell-chip",attrs:{color:e.chipColor(e.params.value)}},[a("span",[e._v(e._s(1==e.params.value?"是":"否"))])])},g=[],C={name:"CellRendererStatus",computed:{chipColor:function(){return function(e){return"1"==e||"是"==e?"success":"danger"}}}},w=C,b=(a("5fe9"),Object(p["a"])(w,v,g,!1,null,null,null)),x=b.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("feather-icon",{attrs:{icon:"CircleIcon",svgClasses:["fill-current h-4 w-4",e.textColor]}})},R=[],S={name:"CellRendererVerified",computed:{textColor:function(){return this.params.value?"text-primary":"text-grey"}}},_=S,D=Object(p["a"])(_,F,R,!1,null,null,null),k=D.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{direction:e.$vs.rtl?"rtl":"ltr"}},[a("vs-button",{attrs:{size:"small"},on:{click:function(t){return e.confirmDeleteRecord(e.params)}}},[e._v("初始化")])],1)},P=[],$=(a("7f7f"),{name:"CellRendererActions",methods:{initData:function(e){var t=this;t.$axios({url:"/index/System/init",method:"post",data:{mobile:t.params.data.mobile}}).then((function(e){1==e.data.status?(t.$parent.$parent.getUsersData(),t.showDeleteSuccess(e.data.msg)):t.showDeleteFail(e.data.msg)}))},editRecord:function(){this.$router.push("/apps/user/user-edit/".concat(268)).catch((function(){}))},confirmDeleteRecord:function(){this.$vs.dialog({type:"confirm",color:"danger",title:"提示",text:'确定对"'.concat(this.params.data.name,'"数据初始化？'),accept:this.initData,acceptText:"确定",cancelText:"取消"})},deleteRecord:function(){this.showDeleteSuccess()},showDeleteSuccess:function(e){this.$vs.notify({color:"success",title:"提示",text:e})},showDeleteFail:function(e){this.$vs.notify({color:"warning",title:"提示",text:e})}}}),z=$,O=Object(p["a"])(z,y,P,!1,null,null,null),A=O.exports,E={components:{AgGridVue:i["AgGridVue"],vSelect:n.a,CellRendererLink:m,CellRendererStatus:x,CellRendererVerified:k,CellRendererActions:A},data:function(){return{roleFilter:{label:"正常玩家",value:"1"},roleOptions:[{label:"所有",value:""},{label:"正常玩家",value:"1"},{label:"机器人",value:"2"}],statusFilter:{label:"所有",value:""},statusOptions:[{label:"所有",value:""},{label:"否",value:"0"},{label:"是",value:"1"}],vipFilter:{label:"所有",value:""},vipOptions:[{label:"所有",value:""},{label:"否",value:"0"},{label:"是",value:"1"}],anchorFilter:{label:"所有",value:""},anchorOptions:[{label:"所有",value:""},{label:"否",value:"0"},{label:"是",value:"1"}],searchQuery:"",gridApi:null,gridOptions:{},defaultColDef:{sortable:!0,resizable:!0,suppressMenu:!0},usersData:[],columnDefs:[{headerName:"昵称",field:"name",filter:!0,width:180,cellRendererFramework:"CellRendererLink"},{headerName:"账号",field:"mobile",filter:!0,width:150},{headerName:"余额",field:"total_amount",filter:!0,width:180},{headerName:"状态",field:"status",filter:!0,width:125},{headerName:"允许取回",field:"allow",filter:!0,width:125,cellRendererFramework:"CellRendererStatus"},{headerName:"概率组",field:"group",filter:!0,width:100,cellRendererFramework:"CellRendererStatus"},{headerName:"Vip",field:"group_vip",filter:!0,width:100,cellRendererFramework:"CellRendererStatus"},{headerName:"主播",field:"anchor",filter:!0,width:100,cellRendererFramework:"CellRendererStatus"},{headerName:"类型",field:"type",filter:!0,width:125},{headerName:"注册时间",field:"create_time",filter:!0,width:180},{headerName:"操作",width:120,cellRendererFramework:"CellRendererActions",cellClass:"text-center"}],components:{CellRendererLink:m,CellRendererStatus:x,CellRendererVerified:k,CellRendererActions:A},group:"",vip:"",anchor:"",total:0,totalPages:0,currentPage:1,pageSize:10}},watch:{currentPage:{handler:function(e){this.getUsersData()}},pageSize:{handler:function(e){this.getUsersData()}},roleFilter:function(e){},statusFilter:function(e){console.log(e),this.group=e.value,this.currentPage=1,this.getUsersData()},vipFilter:function(e){this.vip=e.value,this.currentPage=1,this.getUsersData()},anchorFilter:function(e){this.anchor=e.value,this.currentPage=1,this.getUsersData()},isVerifiedFilter:function(e){var t="all"===e.value?"all":"yes"===e.value?"true":"false";this.setColumnFilter("is_verified",t)},departmentFilter:function(e){this.setColumnFilter("department",e.value)}},computed:{paginationPageSize:function(){return this.gridApi?this.gridApi.paginationGetPageSize():10}},methods:{getUsersData:function(){var e=this;e.$axios({url:"/admin/user/playerList",method:"post",data:{page:e.currentPage,pageSize:e.pageSize,group:e.group,vip:e.vip,anchor:e.anchor,searchKey:e.searchQuery}}).then((function(t){1==t.data.status?(t.data.data.list.forEach((function(e){e["status"]=1==e["status"]?"正常":"冻结",e["type"]=1==e["type"]?"正常玩家":"非正常玩家"})),e.usersData=t.data.data.list,e.total=t.data.data.total,e.totalPages=e.pageTotal(e.total,e.pageSize)):e.usersData=[]}))},pageTotal:function(e,t){return null==e||""==e?0:0!=t&&e%t==0?parseInt(e/t):0!=t&&e%t!=0?parseInt(e/t)+1:void 0},search:function(){this.currentPage=1,this.getUsersData()},clear:function(){this.searchQuery="",this.statusFilter={label:"所有",value:""},this.vipFilter={label:"所有",value:""},this.currentPage=1,this.getUsersData()},setColumnFilter:function(e,t){var a=this.gridApi.getFilterInstance(e),r=null;"all"!==t&&(r={type:"equals",filter:t}),a.setModel(r),this.gridApi.onFilterChanged()},resetColFilters:function(){console.log(this.statusFilter),this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged(),this.roleFilter=this.isVerifiedFilter=this.departmentFilter=this.statusFilter,this.$refs.filterCard.removeRefreshAnimation(),this.getUsersData()},updateSearchQuery:function(e){this.gridApi.setQuickFilter(e)}},mounted:function(){if(this.getUsersData(),this.gridApi=this.gridOptions.api,this.$vs.rtl){var e=this.$refs.agGridTable.$el.querySelector(".ag-header-container");e.style.left="-".concat(String(Number(e.style.transform.slice(11,-3))+9),"px")}},created:function(){o["a"].isRegistered||(this.$store.registerModule("userManagement",o["a"]),o["a"].isRegistered=!0),this.$store.dispatch("userManagement/fetchUsers").catch((function(e){console.error(e)}))}},U=E,N=(a("671d"),Object(p["a"])(U,r,s,!1,null,null,null));t["default"]=N.exports},"4faa":function(e,t,a){"use strict";var r={users:[]},s=(a("20d6"),{SET_USERS:function(e,t){e.users=t},REMOVE_RECORD:function(e,t){var a=e.users.findIndex((function(e){return e.id===t}));e.users.splice(a,1)}}),i=a("bb36"),l={fetchUsers:function(e){var t=e.commit;return new Promise((function(e,a){i["a"].get("/api/user-management/users").then((function(a){t("SET_USERS",a.data),e(a)})).catch((function(e){a(e)}))}))},fetchUser:function(e,t){return new Promise((function(e,a){i["a"].get("/api/user-management/users/".concat(t)).then((function(t){e(t)})).catch((function(e){a(e)}))}))},removeRecord:function(e,t){var a=e.commit;return new Promise((function(e,r){i["a"].delete("/api/user-management/users/".concat(t)).then((function(r){a("REMOVE_RECORD",t),e(r)})).catch((function(e){r(e)}))}))}},n={};t["a"]={isRegistered:!1,namespaced:!0,state:r,mutations:s,actions:l,getters:n}},5687:function(e,t,a){},"5fe9":function(e,t,a){"use strict";a("acf6")},"671d":function(e,t,a){"use strict";a("5687")},8449:function(e,t,a){"use strict";a("386b")("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},acf6:function(e,t,a){}}]);
//# sourceMappingURL=chunk-5a677c38.d937c75e.js.map