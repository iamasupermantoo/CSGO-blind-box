(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fb0106b"],{"1c0a":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"page-user-list"}},[a("vx-card",{ref:"filterCard",staticClass:"user-list-filters mb-8",attrs:{title:"条件搜索",actionButtons:""},on:{refresh:e.resetColFilters,remove:e.resetColFilters}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("vs-input",{staticClass:"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4",attrs:{label:"关键字搜索",placeholder:"关键字"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("label",{staticClass:"text-sm opacity-75"},[e._v("状态")]),a("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:e.roleOptions,clearable:!1,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.roleFilter,callback:function(t){e.roleFilter=t},expression:"roleFilter"}})],1),a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("vs-input",{staticClass:"w-full",attrs:{label:"开始时间",type:"date"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("vs-input",{staticClass:"w-full",attrs:{label:"结束时间",type:"date"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1),a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("vs-button",{staticClass:"search",on:{click:e.search}},[e._v("搜索")]),a("vs-button",{staticClass:"search",on:{click:e.clear}},[e._v("清空")])],1)])]),a("div",{staticClass:"vx-card p-6"},[a("div",{staticClass:"flex flex-wrap items-center"},[a("div",{staticClass:"flex-grow"},[a("vs-dropdown",{staticClass:"cursor-pointer",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[e._v(e._s(e.currentPage*e.paginationPageSize-(e.paginationPageSize-1))+"\n              -\n              "+e._s(e.list.length-e.currentPage*e.paginationPageSize>0?e.currentPage*e.paginationPageSize:e.list.length)+"\n              of "+e._s(e.list.length))]),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(10)}}},[a("span",[e._v("10")])]),a("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(20)}}},[a("span",[e._v("20")])]),a("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(25)}}},[a("span",[e._v("25")])]),a("vs-dropdown-item",{on:{click:function(t){return e.gridApi.paginationSetPageSize(30)}}},[a("span",[e._v("30")])])],1)],1)],1),a("vs-input",{staticClass:"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4",attrs:{placeholder:"搜索"},on:{input:e.updateSearchQuery},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1),a("ag-grid-vue",{ref:"agGridTable",staticClass:"ag-theme-material w-100 my-4 ag-grid-table",attrs:{gridOptions:e.gridOptions,columnDefs:e.columnDefs,defaultColDef:e.defaultColDef,rowData:e.list,rowSelection:"multiple",colResizeDefault:"shift",pagination:!0,paginationPageSize:e.paginationPageSize,suppressPaginationPanel:!0,enableRtl:e.$vs.rtl}}),a("vs-pagination",{attrs:{total:e.totalPages,max:7},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)},s=[],r=(a("a481"),a("6b54"),a("87b3"),a("401b")),n=(a("4e06"),a("4a7a")),l=a.n(n),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{direction:e.$vs.rtl?"rtl":"ltr"}},[a("vs-button",{staticClass:"opp-ed",on:{click:function(t){return e.send(e.params)}}},[e._v("发货")]),a("vs-button",{staticClass:"opp-de",on:{click:function(t){return e.del(e.params)}}},[e._v("删除")])],1)},c=[],u={name:"CellRendererActions",data:{return:function(){}},methods:{send:function(e){var t=this;t.id=e.data.id,t.player_id=e.data.player_id,t.item_id=e.data.itemId,this.$vs.dialog({type:"confirm",title:"提示",text:"您确定要进行发货么？",accept:t.sendSkinToSteam,cancel:t.cancel,acceptText:"确定",cancelText:"取消"})},sendSkinToSteam:function(){console.log(1111);var e=this;e.$axios({url:"/admin/User/sendSkinToSteam",method:"post",data:{id:e.id,player_id:e.player_id,item_id:e.item_id}}).then((function(t){1==t.data.status?(e.notify(t.data.msg,"success"),console.log(e.$parent.$parent),e.$parent.$parent.getList()):e.notify(t.data.msg,"danger")}))},del:function(e){var t=this;t.id=e.data.id,this.$vs.dialog({type:"confirm",title:"提示",text:"确定删除？",accept:t.delPlayerPackege,cancel:t.cancel,acceptText:"确定",cancelText:"取消"})},delPlayerPackege:function(){console.log(1111);var e=this;e.$axios({url:"/admin/User/delPlayerPackege",method:"post",data:{id:e.id}}).then((function(t){1==t.data.status?(e.notify(t.data.msg,"success"),console.log(e.$parent.$parent),e.$parent.$parent.getList()):e.notify(t.data.msg,"danger")}))},notify:function(e,t){var a=this;a.$vs.notify({title:"提示",text:e,iconPack:"feather",icon:"icon-alert-circle",color:t})},deleteRecord:function(){this.showDeleteSuccess()},showDeleteSuccess:function(){this.$vs.notify({color:"success",title:"User Deleted",text:"The selected user was successfully deleted"})}}},d=u,m=(a("9924"),a("2877")),f=Object(m["a"])(d,o,c,!1,null,null,null),g=f.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex items-center"},[a("vs-avatar",{staticClass:"flex-shrink-0 mr-2",attrs:{src:e.params.data.avatar,size:"30px"},on:{click:function(t){return e.$router.push(e.url)}}}),a("router-link",{staticClass:"text-inherit hover:text-primary",attrs:{to:e.url},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[e._v(e._s(e.params.value))])],1)},h=[],v={name:"CellRendererLink",computed:{url:function(){return"/apps/user/user-view/"+this.params.data.player_id}},mounted:function(){}},w=v,C=Object(m["a"])(w,p,h,!1,null,null,null),S=C.exports,b=a("4faa"),y={components:{AgGridVue:r["AgGridVue"],vSelect:l.a,CellOperate:g,CellRendererLink:S},data:function(){return{list:[],roleFilter:{label:"所有",value:"1"},roleOptions:[{label:"所有",value:"1"},{label:"成功",value:"2"},{label:"失败",value:"3"}],startTime:"0000-00-00 00:00:00",endTime:this.dateFormat("y-m-d h:i:s",new Date),currentPage:1,pageSize:10,totalPages:0,total:0,status:"",searchQuery:"",gridApi:null,gridOptions:{},defaultColDef:{sortable:!0,resizable:!0,suppressMenu:!0},columnDefs:[{headerName:"ID",field:"id",width:125,filter:!0},{headerName:"玩家",field:"uname",filter:!0,width:210,cellRendererFramework:"CellRendererLink"},{headerName:"名称",field:"name",filter:!0,width:300},{headerName:"价格",field:"price",filter:!0,width:150},{headerName:"状态",field:"statusStr",filter:!0,width:150},{headerName:"获取方式",field:"wayStr",filter:!0,width:150},{headerName:"系统订单号",field:"orderId",filter:!0,width:150},{headerName:"第三方id",field:"open_number_md",filter:!0,width:150},{headerName:"操作",field:"transactions",width:150,cellRendererFramework:"CellOperate"}],components:{CellOperate:g}}},watch:{roleFilter:function(e){this.setColumnFilter("role",e.value)},statusFilter:function(e){this.setColumnFilter("status",e.value)},isVerifiedFilter:function(e){var t="all"===e.value?"all":"yes"===e.value?"true":"false";this.setColumnFilter("is_verified",t)},departmentFilter:function(e){this.setColumnFilter("department",e.value)},currentPage:function(){this.getList()},pageSize:function(){this.getList()}},computed:{usersData:function(){return this.$store.state.userManagement.users},paginationPageSize:function(){return this.gridApi?this.gridApi.paginationGetPageSize():10},totalPages:function(){return this.gridApi?this.gridApi.paginationGetTotalPages():0},currentPage:{get:function(){return this.gridApi?this.gridApi.paginationGetCurrentPage()+1:1},set:function(e){this.gridApi.paginationGoToPage(e-1)}}},methods:{getList:function(){var e=this;e.$axios({url:"/admin/Record/skinToSteam",method:"post",data:{page:e.currentPage,pageSize:e.pageSize,status:e.status,searchKey:e.searchQuery,startTime:e.startTime,endTime:e.endTime}}).then((function(t){1==t.data.status?(e.list=t.data.data.list,e.total=t.data.data.total,e.totalPages=e.pageTotal(e.total,e.pageSize)):(e.list=[],e.total=0,e.totalPages=1)}))},pageTotal:function(e,t){return null==e||""==e?0:0!=t&&e%t==0?parseInt(e/t):0!=t&&e%t!=0?parseInt(e/t)+1:void 0},search:function(){this.currentPage=1,this.getList()},clear:function(){""==this.startTime&&""==this.endTime||(this.startTime="0000-00-00 00:00:00",this.endTime=this.dateFormat("y-m-d h:i:s",new Date),this.searchQuery="",this.roleFilter={label:"所有",value:""},this.getList())},geiTime:function(){var e=new Date;e.setTime(e.getTime());var t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),a=new Date;a.setTime(a.getTime()+864e5);var i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();this.input1=t,this.input2=i},setColumnFilter:function(e,t){var a=this.gridApi.getFilterInstance(e),i=null;"all"!==t&&(i={type:"equals",filter:t}),a.setModel(i),this.gridApi.onFilterChanged()},resetColFilters:function(){this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged(),this.roleFilter=this.statusFilter=this.isVerifiedFilter=this.departmentFilter={label:"All",value:"all"},this.$refs.filterCard.removeRefreshAnimation()},updateSearchQuery:function(e){this.gridApi.setQuickFilter(e)},dateFormat:function(e,t){var a,i="ymdhis";e||(e="y-m-d h:i:s"),a=t?new Date(t):new Date;for(var s=[a.getFullYear().toString(),(a.getMonth()+1).toString(),a.getDate().toString(),a.getHours().toString(),a.getMinutes().toString(),a.getSeconds().toString()],r=0;r<s.length;r++)e=e.replace(i.charAt(r),s[r]);return e}},mounted:function(){this.getList()},created:function(){b["a"].isRegistered||(this.$store.registerModule("userManagement",b["a"]),b["a"].isRegistered=!0),this.$store.dispatch("userManagement/fetchUsers").catch((function(e){console.error(e)}))}},P=y,x=(a("9d2d"),Object(m["a"])(P,i,s,!1,null,null,null));t["default"]=x.exports},"4faa":function(e,t,a){"use strict";var i={users:[]},s=(a("20d6"),{SET_USERS:function(e,t){e.users=t},REMOVE_RECORD:function(e,t){var a=e.users.findIndex((function(e){return e.id===t}));e.users.splice(a,1)}}),r=a("bb36"),n={fetchUsers:function(e){var t=e.commit;return new Promise((function(e,a){r["a"].get("/api/user-management/users").then((function(a){t("SET_USERS",a.data),e(a)})).catch((function(e){a(e)}))}))},fetchUser:function(e,t){return new Promise((function(e,a){r["a"].get("/api/user-management/users/".concat(t)).then((function(t){e(t)})).catch((function(e){a(e)}))}))},removeRecord:function(e,t){var a=e.commit;return new Promise((function(e,i){r["a"].delete("/api/user-management/users/".concat(t)).then((function(i){a("REMOVE_RECORD",t),e(i)})).catch((function(e){i(e)}))}))}},l={};t["a"]={isRegistered:!1,namespaced:!0,state:i,mutations:s,actions:n,getters:l}},"5a80":function(e,t,a){},9924:function(e,t,a){"use strict";a("5a80")},"9d2d":function(e,t,a){"use strict";a("a975")},a975:function(e,t,a){}}]);
//# sourceMappingURL=chunk-7fb0106b.ac161cc6.js.map