(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c0276da"],{"0c95":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("del-frame",{attrs:{delValide:t.delValide,delStatus:t.delStatus,delMsg:t.delMsg},on:{closeDel:t.isDel}}),a("skin-type-editer",{attrs:{isSidebarActive:t.addNewDataSidebar,data:t.sidebarData},on:{closeSidebar:t.toggleDataSidebar,reload:t.getSkinType}}),a("vx-card",{attrs:{"code-toggler":""}},[a("vs-dropdown",{staticClass:"cursor-pointer mb-4 mr-4 items-per-page-handler",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.pageSize-(t.pageSize-1))+" - "+t._s(t.currentPage*t.pageSize)+" of "+t._s(t.total))]),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(e){t.pageSize=10}}},[a("span",[t._v("10")])]),a("vs-dropdown-item",{on:{click:function(e){t.pageSize=20}}},[a("span",[t._v("20")])]),a("vs-dropdown-item",{on:{click:function(e){t.pageSize=30}}},[a("span",[t._v("30")])]),a("vs-dropdown-item",{on:{click:function(e){t.pageSize=50}}},[a("span",[t._v("50")])])],1)],1),a("div",{staticClass:"vx-card p-6"},[a("div",{staticClass:"flex flex-wrap items-center"},[a("vs-button",{on:{click:t.addNewData}},[t._v("添加")])],1)]),a("vs-table",{attrs:{stripe:"",data:t.users},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,(function(e,s){return a("vs-tr",{key:s},[a("vs-td",[t._v("\n            "+t._s(e.id)+"\n          ")]),a("vs-td",[t._v("\n              "+t._s(e.name)+"\n          ")]),a("vs-td",[a("img",{staticStyle:{height:"50px"},attrs:{src:e.img,alt:""}})]),a("vs-td",[t._v("\n            "+t._s(e.order)+"\n          ")]),a("vs-td",[t._v("\n            "+t._s(e.create_time)+"\n          ")]),a("vs-td",[a("div",{style:{direction:t.$vs.rtl?"rtl":"ltr"}},[a("feather-icon",{attrs:{icon:"Edit3Icon",svgClasses:"h-5 w-5 mr-4 hover:text-primary cursor-pointer"},on:{click:function(a){return t.toEdit(e)}}}),a("feather-icon",{attrs:{icon:"Trash2Icon",svgClasses:"h-5 w-5 hover:text-danger cursor-pointer"},on:{click:function(a){return t.Delete(e.id)}}})],1)])],1)}))}}])},[a("template",{slot:"thead"},[a("vs-th",[t._v("id")]),a("vs-th",[t._v("分类名称")]),a("vs-th",[t._v("分类图片")]),a("vs-th",[t._v("排序")]),a("vs-th",[t._v("时间")]),a("vs-th",[t._v("操作")])],1)],2)],1),a("vs-pagination",{attrs:{total:t.totalPages,max:7},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},i=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-sidebar",{staticClass:"add-new-data-sidebar items-no-padding",attrs:{"click-not-close":"","position-right":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:t.isSidebarActiveLocal,callback:function(e){t.isSidebarActiveLocal=e},expression:"isSidebarActiveLocal"}},[a("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[a("h4",[t._v("\n      "+t._s(0===Object.entries(this.data).length?"添加":"编辑")+" 分类\n    ")]),a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(e){e.stopPropagation(),t.isSidebarActiveLocal=!1,t.file=""}}})],1),a("vs-divider",{staticClass:"mb-0"}),t.dataImg?[a("div",{staticClass:"img-container w-64 mx-auto flex items-center justify-center"},[a("img",{staticClass:"responsive",staticStyle:{width:"150px"},attrs:{src:t.dataImg,alt:"img"}})]),a("div",{staticClass:"modify-img flex justify-between mt-5"},[a("input",{ref:"updateImgInput",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.updateCurrImg}}),a("vs-button",{staticClass:"mr-4",attrs:{type:"flat"},on:{click:function(e){return t.$refs.updateImgInput.click()}}},[t._v("上传图片")])],1)]:t._e(),t.dataImg?t._e():a("div",{staticClass:"upload-img mt-5"},[a("input",{ref:"uploadImgInput",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.updateCurrImg}}),a("vs-button",{on:{click:function(e){return t.$refs.uploadImgInput.click()}}},[t._v("上传图片")])],1),a(t.scrollbarTag,{key:t.$vs.rtl,tag:"component",staticClass:"scroll-area--data-list-add-new",attrs:{settings:t.settings}},[a("div",{staticClass:"p-6"},[a("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"分类名称",name:"item-name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("item-name"),expression:"errors.has('item-name')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("item-name")))]),a("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"排序",name:"item-name"},model:{value:t.order,callback:function(e){t.order=e},expression:"order"}})],1),t.status<2?a("div",{staticStyle:{display:"flex",position:"relative"}},[a("div",{staticClass:"p-6"},t._l(t.form,(function(e,s){return a("div",{key:s,staticStyle:{display:"flex"}},[a("div",[a("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"子类",name:"item-name"},model:{value:t.form[s].subclass_name,callback:function(e){t.$set(t.form[s],"subclass_name",e)},expression:"form[index].subclass_name"}})],1),a("XIcon",{staticStyle:{"margin-top":"44px"},attrs:{icon:"XIcon"},on:{click:function(a){return t.deleteItem(e,s)}}})],1)})),0),a("div",{staticClass:"flex flex-wrap items-center add-subclass"},[a("vs-button",{on:{click:t.addItem}},[t._v("添加")])],1)]):t._e()]),a("div",{staticClass:"flex flex-wrap items-center p-6",attrs:{slot:"footer"},slot:"footer"},[a("vs-button",{staticClass:"mr-6",on:{click:t.submitData}},[t._v("提交")]),a("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(e){t.isSidebarActiveLocal=!1,t.file=""}}},[t._v("取消")])],1)],2)},r=[],o=(a("7f7f"),a("ac6a"),a("ffc1"),a("9d63")),l=a.n(o),c=a("0a35"),d={props:{isSidebarActive:{type:Boolean,required:!0},data:{type:Object,default:function(){}}},components:{VuePerfectScrollbar:l.a,XIcon:c["XIcon"]},data:function(){return{boxId:null,name:"",order:"",color:"",settings:{maxScrollbarLength:60,wheelSpeed:.6},file:"",dataImg:"",form:[],status:""}},watch:{isSidebarActive:function(t){if(t)if(console.log(this.data),0===Object.entries(this.data).length)this.initValues();else{var e=JSON.parse(JSON.stringify(this.data)),a=e.id,s=e.name,i=e.img,n=e.order,r=e.status;console.log(r),this.dataId=a,this.name=s,this.dataImg=i,this.order=n,this.status=r,this.getSubclass()}}},computed:{isSidebarActiveLocal:{get:function(){return this.isSidebarActive},set:function(t){t||this.$emit("closeSidebar")}},isFormValid:function(){return!this.errors.any()&&this.name},scrollbarTag:function(){return this.$store.getters.scrollbarTag}},methods:{getSubclass:function(){var t=this;t.$axios({url:"/admin/Lucky/typeSubclass",method:"post",data:{skin_type_id:t.dataId}}).then((function(e){console.log(e),1==e.data.status&&(t.form=e.data.data.list)}))},initValues:function(){this.data.id||(this.dataId=null,this.name="",this.order="",this.status="")},submitData:function(){var t=this,e=this,a=new FormData,s={id:e.dataId,name:e.name,order:e.order},i=e.form?e.form:"";a.append("data",JSON.stringify(s)),a.append("subclassInfo",JSON.stringify(i)),e.file&&a.append("img",e.file);var n="/admin/Lucky/addLucySkinType";this.dataId>0&&(n="/admin/Lucky/editLucySkinType"),e.$axios({url:n,method:"post",data:a}).then((function(a){1==a.data.status?(e.file="",e.$vs.notify({title:"提示",text:a.data.msg,iconPack:"feather",icon:"icon-alert-circle",color:"success"}),t.$emit("closeSidebar"),t.$emit("reload"),t.initValues()):e.$vs.notify({title:"提示",text:a.data.msg,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},addItem:function(){var t=this,e=t.form.length;t.form[e-1];t.form.push({type_id:t.data.id,id:"",subclass_name:""})},deleteItem:function(t,e){var a=this;a.form.splice(e,1)},updateCurrImg:function(t){var e=this;if(t.target.files&&t.target.files[0]){var a=new FileReader;a.onload=function(t){e.dataImg=t.target.result},a.readAsDataURL(t.target.files[0]),this.file=t.target.files[0]}}}},u=d,f=(a("1384"),a("2877")),m=Object(f["a"])(u,n,r,!1,null,"2132a692",null),p=m.exports,g=a("0cd7"),v={components:{SkinTypeEditer:p,DelFrame:g["a"]},data:function(){return{addNewDataSidebar:!1,sidebarData:{},users:[],total:0,totalPages:0,currentPage:1,pageSize:10,delValide:!1,delStatus:0,del_id:"",delMsg:""}},computed:{},watch:{currentPage:{handler:function(t){this.getSkinType()}},pageSize:{handler:function(t){this.getSkinType()}}},methods:{getSkinType:function(){var t=this;t.$axios({url:"/admin/Lucky/skinType",method:"post",data:{page:t.currentPage,pageSize:t.pageSize}}).then((function(e){console.log(e),1==e.data.status?(t.users=e.data.data.list,console.log(t.users),t.total=e.data.data.total,t.totalPages=t.pageTotal(t.total,t.pageSize)):t.users=[]}))},pageTotal:function(t,e){return null==t||""==t?0:0!=e&&t%e==0?parseInt(t/e):0!=e&&t%e!=0?parseInt(t/e)+1:void 0},toEdit:function(t){this.sidebarData=t,this.toggleDataSidebar(!0)},addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},toggleDataSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=t},Delete:function(t){var e=this;e.del_id=t,e.closeDel()},closeDel:function(){var t=this;t.delValide=!0},isDel:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this;t&&e.$axios({url:"/admin/Lucky/del",method:"post",data:{id:e.del_id}}).then((function(t){console.log(t),e.delMsg=t.data.msg,1==t.data.status?(e.getSkinType(),e.delStatus=1):e.delStatus=2})),e.delStatus=0}},mounted:function(){this.getSkinType()}},h=v,b=(a("6769"),Object(f["a"])(h,s,i,!1,null,null,null));e["default"]=b.exports},"0cd7":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},i=[],n=(a("c5f6"),{name:"DelFrame",props:{delValide:{type:Boolean,required:!0},delStatus:{type:[String,Number],default:null},delMsg:{type:String,default:null}},watch:{delValide:{handler:function(t){t&&this.confirmDeleteRecord()},deep:!0},delStatus:{handler:function(t){1==t?this.showDeleteSuccess(this.delMsg):2==t&&this.showDeleteDefault(this.delMsg)},deep:!0}},data:function(){return{delete_id:""}},methods:{confirmDeleteRecord:function(t){this.$vs.dialog({type:"confirm",color:"danger",title:"提示",text:"确定删除？",accept:this.deleteRecord,cancel:this.cancel,acceptText:"确定",cancelText:"取消"})},deleteRecord:function(){var t=this;t.$emit("closeDel",!0),t.$parent.delValide=!1},cancel:function(){var t=this;t.$emit("closeDel",!1),t.$parent.delValide=!1},showDeleteSuccess:function(t){this.$vs.notify({color:"success",title:"提示",text:t||"删除成功"})},showDeleteDefault:function(t){this.$vs.notify({color:"danger",title:"提示",text:t||"删除失败"})}},mounted:function(){}}),r=n,o=a("2877"),l=Object(o["a"])(r,s,i,!1,null,null,null);e["a"]=l.exports},"11ad":function(t,e,a){},1384:function(t,e,a){"use strict";a("11ad")},6769:function(t,e,a){"use strict";a("f9ce")},f9ce:function(t,e,a){}}]);
//# sourceMappingURL=chunk-6c0276da.e79804ca.js.map