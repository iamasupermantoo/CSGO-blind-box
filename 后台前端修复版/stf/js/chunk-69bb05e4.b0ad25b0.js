(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69bb05e4"],{"03ae":function(t,e,a){},"27d2":function(t,e,a){},"2f92":function(t,e,a){"use strict";a("d5cd")},"3af3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"data-list-container",attrs:{id:"data-list-thumb-view"}},[a("vx-card",{ref:"filterCard",staticClass:"user-list-filters mb-8",attrs:{title:"条件搜索",actionButtons:""},on:{refresh:t.resetColFilters,remove:t.resetColFilters}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("label",{staticClass:"text-sm opacity-75"},[t._v("饰品类型")]),a("v-select",{staticClass:"mb-4 md:mb-0",attrs:{options:t.roleOptions,clearable:!1,dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.roleFilter,callback:function(e){t.roleFilter=e},expression:"roleFilter"}})],1),a("div",{staticClass:"vx-col md:w-1/4 sm:w-1/2 w-full"},[a("label",{staticClass:"text-sm opacity-75"},[t._v("关键字搜索")]),a("vs-input",{staticClass:"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4",attrs:{placeholder:"关键字"},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1),a("vs-button",{staticClass:"s-a",on:{click:t.getProducts}},[t._v("搜索")]),a("vs-button",{staticClass:"s-a",staticStyle:{"margin-left":"15px"},on:{click:function(e){return t.sync()}}},[t._v("一键同步")]),a("vs-button",{staticClass:"s-a",on:{click:t.addNewData}},[t._v("添加商品")])],1)]),a("data-view-sidebar",{attrs:{isSidebarActive:t.addNewDataSidebar,data:t.sidebarData,skinType:t.skinType},on:{closeSidebar:t.toggleDataSidebar,reload:t.getProducts}}),a("del-frame",{attrs:{delValide:t.delValide,delStatus:t.delStatus},on:{closeDel:t.isDel}}),a("vs-table",{ref:"table",attrs:{multiple:"","max-items":t.pageSize,data:t.products},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return[a("tbody",t._l(s,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},[a("vs-td",{staticClass:"img-container"},[a("img",{staticClass:"product-img",attrs:{src:e.imageUrl}})]),a("vs-td",[a("p",{staticClass:"product-name font-medium truncate"},[t._v(t._s(e.itemName))])]),a("vs-td",[a("p",{staticClass:"product-price"},[t._v("$"+t._s(e.market_price))])]),a("vs-td",[a("p",{staticClass:"product-price"},[t._v(t._s(e.price))])]),a("vs-td",[1==e.lucky?a("p",{staticClass:"product-price"},[t._v("是")]):a("p",{staticClass:"product-price"},[t._v("否")])]),a("vs-td",[a("div",{staticStyle:{display:"flex"}},[a("p",{staticClass:"product-price"},[t._v(t._s(1==e.sale?"是":"否"))]),1==e.sale?a("p",{staticClass:"product-price"},[t._v("("+t._s(e.stock)+")")]):t._e()])]),a("vs-td",[a("p",{staticClass:"product-category"},[t._v(t._s(e.typeName))])]),a("vs-td",[a("p",[t._v(t._s(0==e.is_exist?"无货或不在售":"是"))])]),a("vs-td",{staticClass:"whitespace-no-wrap"},[a("feather-icon",{attrs:{icon:"EditIcon",svgClasses:"w-5 h-5 hover:text-primary stroke-current"},on:{click:function(a){return a.stopPropagation(),t.editData(e)}}})],1)],1)})),1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"flex flex-wrap-reverse items-center"}),a("vs-dropdown",{staticClass:"cursor-pointer mb-4 mr-4",attrs:{"vs-trigger-click":""}},[a("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[a("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.pageSize-(t.pageSize-1))+" - "+t._s(t.currentPage*t.pageSize)+" of "+t._s(t.total))]),a("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),a("vs-dropdown-menu",[a("vs-dropdown-item",{on:{click:function(e){t.pageSize=10}}},[a("span",[t._v("10")])]),a("vs-dropdown-item",{on:{click:function(e){t.pageSize=20}}},[a("span",[t._v("20")])]),a("vs-dropdown-item",{on:{click:function(e){t.pageSize=30}}},[a("span",[t._v("30")])]),a("vs-dropdown-item",{on:{click:function(e){t.pageSize=50}}},[a("span",[t._v("50")])])],1)],1)],1),a("template",{slot:"thead"},[a("vs-th",[t._v("图片")]),a("vs-th",{attrs:{"sort-key":"name"}},[t._v("名称")]),a("vs-th",{attrs:{"sort-key":"market_price"}},[t._v("扎比特价格")]),a("vs-th",{attrs:{"sort-key":"price"}},[t._v("平台价")]),a("vs-th",{attrs:{"sort-key":"lucky"}},[t._v("幸运饰品")]),a("vs-th",{attrs:{"sort-key":"sale"}},[t._v("是否售卖")]),a("vs-th",{attrs:{"sort-key":"category"}},[t._v("类型")]),a("vs-th",{attrs:{"sort-key":"is_exist"}},[t._v("是否在售(扎比特)")]),a("vs-th",[t._v("操作")])],1)],2),a("vs-pagination",{attrs:{total:t.totalPages,max:7},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vs-sidebar",{staticClass:"add-new-data-sidebar items-no-padding",attrs:{"click-not-close":"","position-right":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:t.isSidebarActiveLocal,callback:function(e){t.isSidebarActiveLocal=e},expression:"isSidebarActiveLocal"}},[a("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[a("h4",[t._v(t._s(0===Object.entries(this.data).length?"添加":"编辑")+" 饰品")]),a("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(e){e.stopPropagation(),t.isSidebarActiveLocal=!1}}})],1),a("vs-divider",{staticClass:"mb-0"}),a(t.scrollbarTag,{key:t.$vs.rtl,tag:"component",staticClass:"scroll-area--data-list-add-new",attrs:{settings:t.settings}},[a("div",{staticClass:"p-6"},[t.dataImg?[a("div",{staticClass:"img-container w-64 mx-auto flex items-center justify-center"},[a("img",{staticClass:"responsive",attrs:{src:t.dataImg,alt:"img"}})]),a("div",{staticClass:"modify-img flex justify-between mt-5"},[a("input",{ref:"updateImgInput",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.updateCurrImg}}),a("vs-button",{staticClass:"mr-4",attrs:{type:"flat"},on:{click:function(e){return t.$refs.updateImgInput.click()}}},[t._v("上传图片")]),a("vs-button",{attrs:{type:"flat",color:"#999"},on:{click:function(e){t.dataImg=null}}},[t._v("删除图片")])],1)]:t._e(),t.dataImg?t._e():a("div",{staticClass:"upload-img mt-5"},[a("input",{ref:"uploadImgInput",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.updateCurrImg}}),a("vs-button",{on:{click:function(e){return t.$refs.uploadImgInput.click()}}},[t._v("上传图片")])],1),a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"名称",name:"item-name"},model:{value:t.itemName,callback:function(e){t.itemName=e},expression:"itemName"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("item-name"),expression:"errors.has('item-name')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("item-name")))]),a("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,regex:/\d+(\.\d+)?$/},expression:"{ required: true, regex: /\\d+(\\.\\d+)?$/ }"}],staticClass:"mt-5 w-full",attrs:{"icon-pack":"feather",icon:"icon-dollar-sign",label:"价格",name:"item-price"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}),a("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"是否商城售卖",name:"item-category"},model:{value:t.sale,callback:function(e){t.sale=e},expression:"sale"}},t._l(t.saleOption,(function(t){return a("vs-select-item",{key:t.value,attrs:{value:t.value,text:t.text}})})),1),1==t.sale?a("vs-input",{staticClass:"w-full mt-4",attrs:{label:"商城库存",name:"stock"},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}}):t._e(),a("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"是否为幸运饰品",name:"item-category"},model:{value:t.lucky,callback:function(e){t.lucky=e},expression:"lucky"}},t._l(t.luckyOption,(function(t){return a("vs-select-item",{key:t.value,attrs:{value:t.value,text:t.text}})})),1),t.lucky&&t.lucky>0?a("div",[a("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"是否为推荐",name:"item-category"},model:{value:t.dataLucky.recommend,callback:function(e){t.$set(t.dataLucky,"recommend",e)},expression:"dataLucky.recommend"}},t._l(t.reOption,(function(t){return a("vs-select-item",{key:t.value,attrs:{value:t.value,text:t.text}})})),1),a("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"分类",name:"item-category"},model:{value:t.dataLucky.type_id,callback:function(e){t.$set(t.dataLucky,"type_id",e)},expression:"dataLucky.type_id"}},t._l(t.typeOption,(function(t){return a("vs-select-item",{key:t.id,attrs:{value:t.id,text:t.name}})})),1),t.subclassOption.length>0?a("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"小类",name:"item-category"},model:{value:t.dataLucky.subclass_id,callback:function(e){t.$set(t.dataLucky,"subclass_id",e)},expression:"dataLucky.subclass_id"}},t._l(t.subclassOption,(function(t){return a("vs-select-item",{key:t.id,attrs:{value:t.id,text:t.subclass_name}})})),1):a("vs-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"小类",name:"item-category"},model:{value:t.dataLucky.subclass_id,callback:function(e){t.$set(t.dataLucky,"subclass_id",e)},expression:"dataLucky.subclass_id"}},[a("vs-select-item",{key:"",attrs:{value:"",text:t.noData,disabled:""}})],1)],1):t._e()],2)]),a("div",{staticClass:"flex flex-wrap items-center p-6",attrs:{slot:"footer"},slot:"footer"},[a("vs-button",{staticClass:"mr-6",on:{click:t.submitData}},[t._v("提交")]),a("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(e){t.isSidebarActiveLocal=!1}}},[t._v("取消")])],1)],1)},n=[],l=(a("ac6a"),a("ffc1"),a("9d63")),c=a.n(l),o={props:{isSidebarActive:{type:Boolean,required:!0},data:{type:Object,default:function(){}},skinType:{type:Array,default:function(){return[]}}},components:{VuePerfectScrollbar:c.a},data:function(){return{saleOption:[{text:"是",value:"1"},{text:"否",value:"0"}],luckyOption:[{text:"是",value:"1"},{text:"否",value:"0"}],reOption:[{text:"是",value:"1"},{text:"否",value:"0"}],newOption:[{text:"是",value:"1"},{text:"否",value:"0"}],typeOption:[],subclassOption:[],price:"",sale:"",lucky:"",itemName:"",dataLucky:{recommend:"",new:"",type_id:"",subclass_id:""},initDataLucky:{recommend:"",new:"",type_id:"",subclass_id:""},settings:{maxScrollbarLength:60,wheelSpeed:.6},num:0,noData:"无数据",dataImg:"",file:""}},watch:{isSidebarActive:function(t){if(t)if(this.data.lucky&&this.getLuckyInfo(this.data.id),0===Object.entries(this.data).length)this.initValues(),this.$validator.reset();else{var e=JSON.parse(JSON.stringify(this.data)),a=e.category,s=e.id,i=e.imageUrl,r=e.itemName,n=(e.order_status,e.price),l=e.sale,c=e.stock,o=e.lucky;this.dataId=s,this.dataCategory=a,this.dataImg=i,this.itemName=r,this.price=n,this.sale=l,this.stock=c,this.lucky=o,this.typeOption=this.skinType,this.initValues()}else this.initValues()},"dataLucky.type_id":{handler:function(t){console.log(t),t>0&&(this.subclassOption=[],this.num++,this.num,this.getTypeSubclass(t)),this.noData=""},deep:!0}},computed:{isSidebarActiveLocal:{get:function(){return this.isSidebarActive},set:function(t){t||this.$emit("closeSidebar")}},isFormValid:function(){return!this.errors.any()&&this.dataName&&this.dataCategory&&this.dataPrice>0},scrollbarTag:function(){return this.$store.getters.scrollbarTag}},methods:{getLuckyInfo:function(t){var e=this;e.$axios({url:"/admin/All_Skin/getLuckyInfo",method:"post",data:{skin_id:t}}).then((function(t){1==t.data.status?e.dataLucky=t.data.data:e.dataLucky=e.initDataLucky}))},getTypeSubclass:function(t){var e=this;e.$axios({url:"/admin/Lucky/typeSubclass",method:"post",data:{skin_type_id:t}}).then((function(t){1==t.data.status?e.subclassOption=t.data.data.list:(e.subclassOption=[],e.noData="无数据")}))},initValues:function(){this.data.id||(this.dataLucky={},this.dataImg="",this.itemName="",this.price="",this.sale="",this.stock="",this.lucky="")},submitData:function(){var t=this,e=this,a={skin_id:this.data.id,price:this.price,lucky:this.lucky,sale:this.sale,itemName:this.itemName},s=this.dataLucky,i=new FormData;i.append("baseInfo",JSON.stringify(a)),i.append("luckyInfo",JSON.stringify(s)),i.append("stock",this.stock),i.append("img",e.file);var r="/admin/all_skin/addSkins";this.data.id>0&&(r="/admin/all_skin/edit"),e.$axios({url:r,method:"post",data:i,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){1==e.data.status?(t.$vs.notify({color:"success",title:"提示",text:e.data.msg}),t.$emit("closeSidebar"),t.$emit("reload")):t.$vs.notify({color:"danger",title:"提示",text:e.data.msg})}))},updateCurrImg:function(t){var e=this;if(t.target.files&&t.target.files[0]){var a=new FileReader;a.onload=function(a){e.dataImg=a.target.result,e.file=t.target.files[0]},a.readAsDataURL(t.target.files[0])}}},mounted:function(){var t=this;t.data=t.$parent.sidebarData}},d=o,u=(a("2f92"),a("2877")),m=Object(u["a"])(d,r,n,!1,null,"3d9b3056",null),p=m.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},f=[],h=(a("c5f6"),{name:"DelFrame",props:{delValide:{type:Boolean,required:!0},delStatus:{type:[String,Number],default:null}},watch:{delValide:{handler:function(t){t&&this.confirmDeleteRecord()},deep:!0},delStatus:{handler:function(t){1==t?this.showDeleteSuccess():2==t&&this.showDeleteDefault()},deep:!0}},data:function(){return{delete_id:""}},methods:{confirmDeleteRecord:function(t){this.$vs.dialog({type:"confirm",color:"danger",title:"提示",text:"确定删除？",accept:this.deleteRecord,cancel:this.cancel,acceptText:"确定",cancelText:"取消"})},deleteRecord:function(){var t=this;t.$emit("closeDel",!0),t.$parent.delValide=!1},cancel:function(){var t=this;t.$emit("closeDel",!1),t.$parent.delValide=!1},showDeleteSuccess:function(){this.$vs.notify({color:"success",title:"提示",text:"删除成功"})},showDeleteDefault:function(){this.$vs.notify({color:"danger",title:"提示",text:"删除失败"})}},mounted:function(){}}),g=h,y=Object(u["a"])(g,v,f,!1,null,null,null),k=y.exports,b=a("ee31"),_=a("4a7a"),x=a.n(_),w={components:{DataViewSidebar:p,DelFrame:k,vSelect:x.a},data:function(){return{selected:[],isMounted:!1,addNewDataSidebar:!1,delValide:!1,delStatus:0,sidebarData:{},products:[],total:0,currentPage:1,pageSize:10,totalPages:0,skinType:[],skinOptions:[],roleOptions:[{label:"所有",value:""},{label:"商城饰品",value:"sale"},{label:"幸运饰品",value:"lucky"}],roleFilter:{label:"所有",value:"1"},typeValue:"",searchKey:""}},computed:{},watch:{currentPage:{handler:function(t){var e=this;e.currentPage=t,e.getProducts()},deep:!0},pageSize:{handler:function(t){var e=this;e.pageSize=t,e.getProducts()},deep:!0},roleFilter:{handler:function(t){console.log(t),this.typeValue=t.value,this.getProducts()}}},methods:{sync:function(){var t=this;t.$axios({url:"/admin/Box/sync",method:"post",data:{}}).then((function(e){1==e.data.status?(t.getProducts(),t.selected=[],t.$vs.notify({title:"提示",text:e.data.msg,iconPack:"feather",icon:"icon-alert-circle",color:"success"})):t.$vs.notify({title:"提示",text:e.data.msg,iconPack:"feather",icon:"icon-alert-circle",color:"danger"})}))},getProducts:function(){var t=this;t.$axios({url:"/admin/All_Skin/allSkinList",method:"post",data:{page:t.currentPage,pageSize:t.pageSize,value:t.typeValue,searchKey:t.searchKey}}).then((function(e){1==e.data.status?(t.total=e.data.data.total,t.totalPages=t.pageTotal(t.total,t.pageSize),t.products=e.data.data.list):(t.total=0,t.totalPages=0,t.products=[])}))},getLuckySkinType:function(){var t=this;t.$axios({url:"/admin/Lucky/skinType",method:"post",data:{}}).then((function(e){t.skinType=e.data.data.list}))},pageTotal:function(t,e){return null==t||""==t?0:0!=e&&t%e==0?parseInt(t/e):0!=e&&t%e!=0?parseInt(t/e)+1:void 0},addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},deleteData:function(t){var e=this;e.del_id=t,e.closeDel()},closeDel:function(){var t=this;t.delValide=!0},isDel:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(console.log(t),t){var e=this;e.$axios({url:"/admin/all_skin/delSkin",method:"post",data:{id:e.del_id}}).then((function(t){1==t.data.status?(e.getProducts(),e.delStatus=1):e.delStatus=2}))}},editData:function(t){console.log(t),this.sidebarData=t,this.toggleDataSidebar(!0)},getOrderStatusColor:function(t){return"on_hold"===t?"warning":"delivered"===t?"success":"canceled"===t?"danger":"primary"},getPopularityColor:function(t){return t>90?"success":t>70?"primary":t>=50?"warning":t<50?"danger":"primary"},toggleDataSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=t},resetColFilters:function(){this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged(),this.roleFilter=this.statusFilter=this.isVerifiedFilter=this.departmentFilter={label:"All",value:"all"},this.$refs.filterCard.removeRefreshAnimation()}},created:function(){b["a"].isRegistered||(this.$store.registerModule("dataList",b["a"]),b["a"].isRegistered=!0),this.$store.dispatch("dataList/fetchDataListItems")},mounted:function(){var t=this;t.getProducts(),t.getLuckySkinType(),t.isMounted=!0}},C=w,S=(a("89ea1"),a("8bdf"),Object(u["a"])(C,s,i,!1,null,null,null));e["default"]=S.exports},"89ea1":function(t,e,a){"use strict";a("27d2")},"8bdf":function(t,e,a){"use strict";a("03ae")},d5cd:function(t,e,a){},ee31:function(t,e,a){"use strict";var s={products:[]},i=(a("20d6"),{ADD_ITEM:function(t,e){t.products.unshift(e)},SET_PRODUCTS:function(t,e){t.products=e},UPDATE_PRODUCT:function(t,e){var a=t.products.findIndex((function(t){return t.id===e.id}));Object.assign(t.products[a],e)},REMOVE_ITEM:function(t,e){var a=t.products.findIndex((function(t){return t.id===e}));t.products.splice(a,1)}}),r=a("bb36"),n={addItem:function(t,e){var a=t.commit;return new Promise((function(t,s){r["a"].post("/api/data-list/products/",{item:e}).then((function(s){a("ADD_ITEM",Object.assign(e,{id:s.data.id})),t(s)})).catch((function(t){s(t)}))}))},fetchDataListItems:function(t){var e=t.commit;return new Promise((function(t,a){r["a"].get("/api/data-list/products").then((function(a){e("SET_PRODUCTS",a.data),t(a)})).catch((function(t){a(t)}))}))},updateItem:function(t,e){var a=t.commit;return new Promise((function(t,s){r["a"].post("/api/data-list/products/".concat(e.id),{item:e}).then((function(e){a("UPDATE_PRODUCT",e.data),t(e)})).catch((function(t){s(t)}))}))},removeItem:function(t,e){var a=t.commit;return new Promise((function(t,s){r["a"].delete("/api/data-list/products/".concat(e)).then((function(s){a("REMOVE_ITEM",e),t(s)})).catch((function(t){s(t)}))}))}},l={};e["a"]={isRegistered:!1,namespaced:!0,state:s,mutations:i,actions:n,getters:l}}}]);
//# sourceMappingURL=chunk-69bb05e4.b0ad25b0.js.map