{"remainingRequest":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\babel-loader\\lib\\index.js!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\src\\views\\pages\\envelope\\Envelope.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\src\\views\\pages\\envelope\\Envelope.vue","mtime":1620826038000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\babel.config.js","mtime":1620826038000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.search\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { AgGridVue } from 'ag-grid-vue';\nimport '@/assets/scss/vuexy/extraComponents/agGridStyleOverride.scss';\nimport vSelect from 'vue-select'; // Store Module\n\nimport moduleUserManagement from '@/store/user-management/moduleUserManagement.js';\nimport CellOperate from \"./cell/CellOperate.vue\";\nimport CellEditer from \"./cell/CellEditer.vue\"; // Cell Renderer\n\nexport default {\n  components: {\n    AgGridVue: AgGridVue,\n    vSelect: vSelect,\n    CellOperate: CellOperate,\n    CellEditer: CellEditer\n  },\n  data: function data() {\n    return {\n      searchQuery: '',\n      roleFilter: {\n        label: '所有',\n        value: ''\n      },\n      statusOptions: [{\n        label: '所有',\n        value: ''\n      }, {\n        label: '已抢完',\n        value: '2'\n      }, {\n        label: '未抢完',\n        value: '1'\n      }],\n      startTime: '',\n      endTime: '',\n      // AgGrid\n      list: [],\n      gridApi: null,\n      gridOptions: {},\n      defaultColDef: {\n        sortable: true,\n        resizable: true,\n        suppressMenu: true\n      },\n      columnDefs: [{\n        headerName: '名称',\n        field: 'name',\n        width: 150,\n        filter: true\n      }, {\n        headerName: '金额',\n        field: 'money',\n        width: 150,\n        filter: true\n      }, {\n        headerName: '剩余',\n        field: 'balance',\n        width: 125,\n        filter: true\n      }, {\n        headerName: '总数',\n        field: 'total_num',\n        filter: true,\n        width: 125\n      }, {\n        headerName: '已领',\n        field: 'num',\n        filter: true,\n        width: 125\n      }, {\n        headerName: '类型',\n        field: 'typeStr',\n        filter: true,\n        width: 125\n      }, {\n        headerName: '状态',\n        field: 'statusStr',\n        filter: true,\n        width: 125\n      }, {\n        headerName: '时间',\n        field: 'create_time',\n        filter: true,\n        width: 180\n      }, {\n        headerName: '操作',\n        field: 'transactions',\n        width: 150,\n        cellRendererFramework: 'CellOperate'\n      }],\n      // Cell Renderer Components\n      components: {\n        CellOperate: CellOperate\n      },\n      currentPage: 1,\n      pageSize: 10,\n      totalPages: 0,\n      total: 0,\n      status: '',\n      editerData: {},\n      sidebarActive: false\n    };\n  },\n  watch: {\n    roleFilter: function roleFilter(obj) {\n      this.setColumnFilter('role', obj.value);\n    },\n    statusFilter: function statusFilter(obj) {\n      this.setColumnFilter('status', obj.value);\n    },\n    isVerifiedFilter: function isVerifiedFilter(obj) {\n      var val = obj.value === 'all' ? 'all' : obj.value === 'yes' ? 'true' : 'false';\n      this.setColumnFilter('is_verified', val);\n    },\n    departmentFilter: function departmentFilter(obj) {\n      this.setColumnFilter('department', obj.value);\n    },\n    pageSize: function pageSize() {\n      this.getEenvelopeList();\n    },\n    currentPage: function currentPage() {\n      this.getEenvelopeList();\n    }\n  },\n  computed: {},\n  methods: {\n    getEenvelopeList: function getEenvelopeList() {\n      var _this = this;\n\n      if (_this.startTime && _this.endTime && _this.startTime > _this.endTime) {\n        _this.$vs.notify({\n          color: 'danger',\n          title: '提示',\n          text: '时间筛选有误'\n        });\n\n        return;\n      }\n\n      _this.$axios({\n        url: '/admin/Activity/envelopeList',\n        method: \"post\",\n        data: {\n          page: _this.currentPage,\n          pageSize: _this.pageSize,\n          status: _this.status,\n          startTime: _this.startTime,\n          endTime: _this.endTime\n        }\n      }).then(function (res) {\n        console.log(res);\n\n        if (res.data.status == 1) {\n          _this.list = res.data.data.list;\n          _this.total = res.data.data.total;\n          _this.totalPages = _this.pageTotal(_this.total, _this.pageSize);\n        } else {\n          _this.list = [];\n          _this.total = 0;\n          _this.totalPages = 1;\n        }\n      });\n    },\n    addNewData: function addNewData() {\n      this.sidebarActive = true;\n      this.editerData = {};\n    },\n    closeSider: function closeSider() {\n      this.sidebarActive = false;\n    },\n    search: function search() {\n      this.status = this.roleFilter.value;\n      this.getEenvelopeList();\n    },\n    onSubmit: function onSubmit() {\n      this.search();\n    },\n    clear: function clear() {\n      if (this.startTime != '' || this.endTime != '' || this.status != '') {\n        this.startTime = '';\n        this.endTime = '';\n        this.status = '';\n        this.roleFilter = {\n          label: '所有',\n          value: ''\n        };\n        this.getEenvelopeList();\n      }\n    },\n    //\"总条数\"：rowCount，\"每页总条数\"：pageSize\n    pageTotal: function pageTotal(rowCount, pageSize) {\n      if (rowCount == null || rowCount == \"\") {\n        return 0;\n      } else {\n        if (pageSize != 0 && rowCount % pageSize == 0) {\n          return parseInt(rowCount / pageSize);\n        }\n\n        if (pageSize != 0 && rowCount % pageSize != 0) {\n          return parseInt(rowCount / pageSize) + 1;\n        }\n      }\n    },\n    setColumnFilter: function setColumnFilter(column, val) {\n      this.status = val;\n      this.getEenvelopeList();\n    },\n    resetColFilters: function resetColFilters() {\n      // Reset Grid Filter\n      this.gridApi.setFilterModel(null);\n      this.gridApi.onFilterChanged(); // Reset Filter Options\n\n      this.roleFilter = this.statusFilter = this.isVerifiedFilter = this.departmentFilter = {\n        label: 'All',\n        value: 'all'\n      };\n      this.$refs.filterCard.removeRefreshAnimation();\n    },\n    updateSearchQuery: function updateSearchQuery(val) {\n      this.gridApi.setQuickFilter(val);\n    }\n  },\n  mounted: function mounted() {\n    this.gridApi = this.gridOptions.api;\n    this.getEenvelopeList();\n    /* =================================================================\r\n      NOTE:\r\n      Header is not aligned properly in RTL version of agGrid table.\r\n      However, we given fix to this issue. If you want more robust solution please contact them at gitHub\r\n    ================================================================= */\n\n    if (this.$vs.rtl) {\n      var header = this.$refs.agGridTable.$el.querySelector('.ag-header-container');\n      header.style.left = \"-\".concat(String(Number(header.style.transform.slice(11, -3)) + 9), \"px\");\n    }\n  },\n  created: function created() {\n    if (!moduleUserManagement.isRegistered) {\n      this.$store.registerModule('userManagement', moduleUserManagement);\n      moduleUserManagement.isRegistered = true;\n    }\n\n    this.$store.dispatch('userManagement/fetchUsers').catch(function (err) {\n      console.error(err);\n    });\n  }\n};",{"version":3,"sources":["Envelope.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- =========================================================================================\r\n  File Name: UserList.vue\r\n  Description: User List page\r\n  ----------------------------------------------------------------------------------------\r\n  Item Name: Vuexy - Vuejs, HTML & Laravel Admin Dashboard Template\r\n  Author: Pixinvent\r\n  Author URL: http://www.themeforest.net/user/pixinvent\r\n========================================================================================== -->\r\n\r\n<template>\r\n\r\n  <div id=\"page-user-list\">\r\n    <vx-card ref=\"filterCard\" title=\"条件搜索\" class=\"user-list-filters mb-8\" actionButtons @refresh=\"resetColFilters\" @remove=\"resetColFilters\">\r\n      <div class=\"vx-row\">\r\n        <div class=\"vx-col md:w-1/4 sm:w-1/2 w-full\">\r\n          <label class=\"text-sm opacity-75\">状态</label>\r\n          <v-select :options=\"statusOptions\" :clearable=\"false\" :dir=\"$vs.rtl ? 'rtl' : 'ltr'\" v-model=\"roleFilter\" class=\"mb-4 md:mb-0\" />\r\n        </div>\r\n\r\n        <div class=\"vx-col md:w-1/4 sm:w-1/2 w-full\">\r\n          <label class=\"text-sm opacity-75\">起始时间</label>\r\n          <vs-input v-model=\"startTime\" type=\"date\" class=\"mt-5 w-full define\" @keyup.enter=\"onSubmit\"/>\r\n        </div>\r\n\r\n         <div class=\"vx-col md:w-1/4 sm:w-1/2 w-full\">\r\n          <label class=\"text-sm opacity-75\">截至时间</label>\r\n          <vs-input v-model=\"endTime\" type=\"date\" class=\"mt-5 w-full define\" @keyup.enter=\"onSubmit\"/>\r\n        </div>\r\n\r\n        <div class=\"vx-col md:w-1/4 sm:w-1/2 w-full\">\r\n         <vs-button class=\"search\" @click=\"search\">搜索</vs-button>\r\n         <vs-button class=\"search\" @click=\"clear\">清空</vs-button>\r\n        </div>\r\n        \r\n\r\n      </div>\r\n    </vx-card>\r\n\r\n    <div class=\"vx-card p-6\">\r\n\r\n      <div class=\"flex flex-wrap items-center\">\r\n\r\n        <!-- ITEMS PER PAGE -->\r\n        <div class=\"flex-grow\">\r\n          <vs-dropdown vs-trigger-click class=\"cursor-pointer\">\r\n            <div class=\"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium\">\r\n              <span class=\"mr-2\">{{ currentPage * pageSize - (pageSize - 1) }} - {{ currentPage * pageSize }} of {{ total }}</span>\r\n              <feather-icon icon=\"ChevronDownIcon\" svgClasses=\"h-4 w-4\" />\r\n            </div>\r\n            <!-- <vs-button class=\"btn-drop\" type=\"line\" color=\"primary\" icon-pack=\"feather\" icon=\"icon-chevron-down\"></vs-button> -->\r\n            <vs-dropdown-menu>\r\n\r\n              <vs-dropdown-item @click=\"pageSize = 10\">\r\n                <span>10</span>\r\n              </vs-dropdown-item>\r\n              <vs-dropdown-item @click=\"pageSize = 20\">\r\n                <span>20</span>\r\n              </vs-dropdown-item>\r\n              <vs-dropdown-item @click=\"pageSize = 30\">\r\n                <span>30</span>\r\n              </vs-dropdown-item>\r\n              <vs-dropdown-item @click=\"pageSize = 50\">\r\n                <span>50</span>\r\n              </vs-dropdown-item>\r\n            </vs-dropdown-menu>\r\n          </vs-dropdown>\r\n        </div>\r\n        \r\n        <div class=\"\">\r\n         <vs-button type=\"border\" class=\"search\" @click=\"addNewData\">添加</vs-button>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <!-- AgGrid Table -->\r\n      <ag-grid-vue\r\n        ref=\"agGridTable\"\r\n        :components=\"components\"\r\n        :gridOptions=\"gridOptions\"\r\n        class=\"ag-theme-material w-100 my-4 ag-grid-table\"\r\n        :columnDefs=\"columnDefs\"\r\n        :defaultColDef=\"defaultColDef\"\r\n        :rowData=\"list\"\r\n        rowSelection=\"multiple\"\r\n        colResizeDefault=\"shift\"\r\n        :animateRows=\"true\"\r\n        :floatingFilter=\"false\"\r\n        :pagination=\"true\"\r\n        :pageSize=\"pageSize\"\r\n        :suppressPaginationPanel=\"true\"\r\n        :enableRtl=\"$vs.rtl\">\r\n      </ag-grid-vue>\r\n\r\n      <vs-pagination\r\n        :total=\"totalPages\"\r\n        :max=\"7\"\r\n        v-model=\"currentPage\" />\r\n\r\n    </div>\r\n    <cell-editer :data='editerData' :isSidebarActive='sidebarActive' @closeSidebar=\"closeSider\" @reload=\"getEenvelopeList\"></cell-editer>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { AgGridVue } from 'ag-grid-vue'\r\nimport '@/assets/scss/vuexy/extraComponents/agGridStyleOverride.scss'\r\nimport vSelect from 'vue-select'\r\n\r\n// Store Module\r\nimport moduleUserManagement from '@/store/user-management/moduleUserManagement.js'\r\nimport CellOperate from './cell/CellOperate.vue'\r\nimport CellEditer from './cell/CellEditer.vue'\r\n\r\n// Cell Renderer\r\n\r\nexport default {\r\n  components: {\r\n    AgGridVue,\r\n    vSelect,\r\n    CellOperate,\r\n    CellEditer\r\n  },\r\n  data () {\r\n    return {\r\n      searchQuery: '',\r\n      roleFilter: { label: '所有', value: '' },\r\n      statusOptions:[\r\n        { label: '所有', value: '' },\r\n        { label: '已抢完', value: '2' },\r\n        { label: '未抢完', value: '1' },\r\n      ],\r\n      startTime:'',\r\n      endTime:'',\r\n      // AgGrid\r\n      list:[],\r\n      gridApi: null,\r\n      gridOptions: {},\r\n      defaultColDef: {\r\n        sortable: true,\r\n        resizable: true,\r\n        suppressMenu: true\r\n      },\r\n      columnDefs: [\r\n         {\r\n          headerName: '名称',\r\n          field: 'name',\r\n          width: 150,\r\n          filter: true,\r\n        },\r\n        {\r\n          headerName: '金额',\r\n          field: 'money',\r\n          width: 150,\r\n          filter: true,\r\n        },\r\n        {\r\n          headerName: '剩余',\r\n          field: 'balance',\r\n          width: 125,\r\n          filter: true,\r\n        },\r\n    \r\n        {\r\n          headerName: '总数',\r\n          field: 'total_num',\r\n          filter: true,\r\n          width: 125\r\n        },\r\n         {\r\n          headerName: '已领',\r\n          field: 'num',\r\n          filter: true,\r\n          width: 125\r\n        },\r\n         {\r\n          headerName: '类型',\r\n          field: 'typeStr',\r\n          filter: true,\r\n          width: 125,\r\n        },\r\n         {\r\n          headerName: '状态',\r\n          field: 'statusStr',\r\n          filter: true,\r\n          width: 125\r\n        },\r\n        {\r\n          headerName: '时间',\r\n          field: 'create_time',\r\n          filter: true,\r\n          width: 180\r\n        },\r\n        {\r\n            headerName: '操作',\r\n            field: 'transactions',\r\n            width: 150,\r\n            cellRendererFramework: 'CellOperate'\r\n        }\r\n      ],\r\n\r\n      // Cell Renderer Components\r\n      components: {\r\n        CellOperate\r\n      },\r\n      currentPage:1,\r\n      pageSize:10,\r\n      totalPages:0,\r\n      total:0,\r\n      status:'',\r\n      editerData:{},\r\n      sidebarActive:false\r\n    }\r\n  },\r\n  watch: {\r\n    roleFilter (obj) {\r\n      this.setColumnFilter('role', obj.value)\r\n    },\r\n    statusFilter (obj) {\r\n      this.setColumnFilter('status', obj.value)\r\n    },\r\n    isVerifiedFilter (obj) {\r\n      const val = obj.value === 'all' ? 'all' : obj.value === 'yes' ? 'true' : 'false'\r\n      this.setColumnFilter('is_verified', val)\r\n    },\r\n    departmentFilter (obj) {\r\n      this.setColumnFilter('department', obj.value)\r\n    },\r\n    pageSize(){\r\n      this.getEenvelopeList();\r\n    },\r\n    currentPage(){\r\n      this.getEenvelopeList();\r\n    },\r\n  },\r\n  computed: { },\r\n  methods: {\r\n    getEenvelopeList(){\r\n      let _this = this;\r\n       if(_this.startTime && _this.endTime && (_this.startTime > _this.endTime)){\r\n        _this.$vs.notify({\r\n          color: 'danger',\r\n          title: '提示',\r\n          text: '时间筛选有误'\r\n        })\r\n        return\r\n      }\r\n      _this.$axios({\r\n        url:'/admin/Activity/envelopeList',\r\n        method: \"post\",\r\n        data:{\r\n          page:_this.currentPage,\r\n          pageSize:_this.pageSize,\r\n          status:_this.status,\r\n          startTime:_this.startTime,\r\n          endTime:_this.endTime\r\n        },\r\n      }).then((res)=>{\r\n        console.log(res);\r\n        if(res.data.status == 1){\r\n          _this.list = res.data.data.list;\r\n          _this.total = res.data.data.total;\r\n          _this.totalPages = _this.pageTotal(_this.total,_this.pageSize)\r\n        }else{\r\n          _this.list = [];\r\n          _this.total = 0;\r\n          _this.totalPages = 1;\r\n        }\r\n      })\r\n    },\r\n    addNewData(){\r\n        this.sidebarActive = true;\r\n        this.editerData = {};\r\n    },\r\n    closeSider(){\r\n        this.sidebarActive = false;\r\n    },\r\n    search(){\r\n      this.status = this.roleFilter.value;\r\n      this.getEenvelopeList()\r\n    },\r\n    onSubmit(){\r\n      this.search();\r\n    },\r\n    clear(){\r\n      if((this.startTime != '') || (this.endTime != '') ||(this.status != '')){\r\n        this.startTime = '';\r\n        this.endTime   = '';\r\n        this.status    = '';\r\n        this.roleFilter= { label: '所有', value: '' };\r\n        this.getEenvelopeList()\r\n      }\r\n    },\r\n      //\"总条数\"：rowCount，\"每页总条数\"：pageSize\r\n    pageTotal(rowCount, pageSize) {\r\n      if (rowCount == null || rowCount == \"\") {\r\n            return 0;\r\n      } else {\r\n            if (pageSize != 0 && rowCount % pageSize == 0) {\r\n                    return parseInt(rowCount / pageSize)\r\n            }\r\n            if (pageSize != 0 && rowCount % pageSize != 0) {\r\n                    return parseInt(rowCount / pageSize) + 1;\r\n            }\r\n        }\r\n    },\r\n    setColumnFilter (column, val) {\r\n      this.status = val;\r\n      this.getEenvelopeList();\r\n    },\r\n    resetColFilters () {\r\n      // Reset Grid Filter\r\n      this.gridApi.setFilterModel(null)\r\n      this.gridApi.onFilterChanged()\r\n\r\n      // Reset Filter Options\r\n      this.roleFilter = this.statusFilter = this.isVerifiedFilter = this.departmentFilter = { label: 'All', value: 'all' }\r\n\r\n      this.$refs.filterCard.removeRefreshAnimation()\r\n    },\r\n    updateSearchQuery (val) {\r\n      this.gridApi.setQuickFilter(val)\r\n    }\r\n  },\r\n  mounted () {\r\n    this.gridApi = this.gridOptions.api\r\n    this.getEenvelopeList();\r\n\r\n    /* =================================================================\r\n      NOTE:\r\n      Header is not aligned properly in RTL version of agGrid table.\r\n      However, we given fix to this issue. If you want more robust solution please contact them at gitHub\r\n    ================================================================= */\r\n    if (this.$vs.rtl) {\r\n      const header = this.$refs.agGridTable.$el.querySelector('.ag-header-container')\r\n      header.style.left = `-${  String(Number(header.style.transform.slice(11, -3)) + 9)  }px`\r\n    }\r\n  },\r\n  created () {\r\n    if (!moduleUserManagement.isRegistered) {\r\n      this.$store.registerModule('userManagement', moduleUserManagement)\r\n      moduleUserManagement.isRegistered = true\r\n    }\r\n    this.$store.dispatch('userManagement/fetchUsers').catch(err => { console.error(err) })\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n#page-user-list {\r\n  .user-list-filters {\r\n    .vs__actions {\r\n      position: absolute;\r\n      right: 0;\r\n      top: 50%;\r\n      transform: translateY(-58%);\r\n    }\r\n  }\r\n}\r\n.define{\r\n margin-top: 0!important;\r\n}\r\n.define /deep/ .vs-input--input.normal{\r\n  padding: 0.5rem !important;\r\n}\r\n.define /deep/ .vs-input--input.normal:focus{\r\n    border: 1px solid rgba(0, 0, 0, 0.2)!important;\r\n}\r\n.search{\r\n  height: 36px;\r\n  width: 60px;\r\n  margin-top: 20px;\r\n  padding: 0!important;\r\n}\r\n.search:nth-child(2){\r\n  margin-left: 5px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/pages/envelope"}]}