{"remainingRequest":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\babel-loader\\lib\\index.js!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\src\\store\\chat\\moduleChatGetters.js","dependencies":[{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\src\\store\\chat\\moduleChatGetters.js","mtime":1620826038000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\babel.config.js","mtime":1620826038000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.find\";\n\n/*=========================================================================================\r\n  File Name: moduleChatGetters.js\r\n  Description: Chat Module Getters\r\n  ----------------------------------------------------------------------------------------\r\n  Item Name: Vuexy - Vuejs, HTML & Laravel Admin Dashboard Template\r\n  Author: Pixinvent\r\n  Author URL: http://www.themeforest.net/user/pixinvent\r\n==========================================================================================*/\n// import contacts from '@/views/apps/chat/contacts'\nexport default {\n  chatDataOfUser: function chatDataOfUser(state) {\n    return function (id) {\n      return state.chats[Object.keys(state.chats).find(function (key) {\n        return Number(key) === id;\n      })];\n    };\n  },\n  chatContacts: function chatContacts(state, getters) {\n    var chatContacts = state.chatContacts.filter(function (contact) {\n      return contact.displayName.toLowerCase().includes(state.chatSearchQuery.toLowerCase());\n    });\n    chatContacts.sort(function (x, y) {\n      var timeX = getters.chatLastMessaged(x.uid).time;\n      var timeY = getters.chatLastMessaged(y.uid).time;\n      return new Date(timeY) - new Date(timeX);\n    });\n    return chatContacts.sort(function (x, y) {\n      var chatDataX = getters.chatDataOfUser(x.uid);\n      var chatDataY = getters.chatDataOfUser(y.uid);\n      if (chatDataX && chatDataY) return chatDataY.isPinned - chatDataX.isPinned;else return 0;\n    });\n  },\n  contacts: function contacts(state) {\n    return state.contacts.filter(function (contact) {\n      return contact.displayName.toLowerCase().includes(state.chatSearchQuery.toLowerCase());\n    });\n  },\n  contact: function contact(state) {\n    return function (contactId) {\n      return state.contacts.find(function (contact) {\n        return contact.uid === contactId;\n      });\n    };\n  },\n  chats: function chats(state) {\n    return state.chats;\n  },\n  chatUser: function chatUser(state, getters, rootState) {\n    return function (id) {\n      return state.contacts.find(function (contact) {\n        return contact.uid === id;\n      }) || rootState.AppActiveUser;\n    };\n  },\n  chatLastMessaged: function chatLastMessaged(state, getters) {\n    return function (id) {\n      if (getters.chatDataOfUser(id)) return getters.chatDataOfUser(id).msg.slice(-1)[0];else return false;\n    };\n  },\n  chatUnseenMessages: function chatUnseenMessages(state, getters) {\n    return function (id) {\n      var unseenMsg = 0;\n      var chatData = getters.chatDataOfUser(id);\n\n      if (chatData) {\n        chatData.msg.map(function (msg) {\n          if (!msg.isSeen && !msg.isSent) unseenMsg++;\n        });\n      }\n\n      return unseenMsg;\n    };\n  }\n};",{"version":3,"sources":["D:/Program Files (x86)/wechat/WeChat Files/wxid_ue0ca48wn2m522/FileStorage/File/2022-09/盲盒源码/后台前端/src/store/chat/moduleChatGetters.js"],"names":["chatDataOfUser","state","id","chats","Object","keys","find","key","Number","chatContacts","getters","filter","contact","displayName","toLowerCase","includes","chatSearchQuery","sort","x","y","timeX","chatLastMessaged","uid","time","timeY","Date","chatDataX","chatDataY","isPinned","contacts","contactId","chatUser","rootState","AppActiveUser","msg","slice","chatUnseenMessages","unseenMsg","chatData","map","isSeen","isSent"],"mappings":"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","sourcesContent":["/*=========================================================================================\r\n  File Name: moduleChatGetters.js\r\n  Description: Chat Module Getters\r\n  ----------------------------------------------------------------------------------------\r\n  Item Name: Vuexy - Vuejs, HTML & Laravel Admin Dashboard Template\r\n  Author: Pixinvent\r\n  Author URL: http://www.themeforest.net/user/pixinvent\r\n==========================================================================================*/\r\n\r\n\r\n// import contacts from '@/views/apps/chat/contacts'\r\n\r\nexport default {\r\n  chatDataOfUser: state => id => {\r\n    return state.chats[Object.keys(state.chats).find(key => Number(key) === id)]\r\n  },\r\n  chatContacts: (state, getters) => {\r\n    const chatContacts = state.chatContacts.filter((contact) => contact.displayName.toLowerCase().includes(state.chatSearchQuery.toLowerCase()))\r\n\r\n    chatContacts.sort((x, y) => {\r\n      const timeX = getters.chatLastMessaged(x.uid).time\r\n      const timeY = getters.chatLastMessaged(y.uid).time\r\n      return new Date(timeY) - new Date(timeX)\r\n    })\r\n\r\n    return chatContacts.sort((x, y) => {\r\n      const chatDataX = getters.chatDataOfUser(x.uid)\r\n      const chatDataY = getters.chatDataOfUser(y.uid)\r\n      if (chatDataX && chatDataY) return chatDataY.isPinned - chatDataX.isPinned\r\n      else return 0\r\n    })\r\n  },\r\n  contacts: (state) => state.contacts.filter((contact) => contact.displayName.toLowerCase().includes(state.chatSearchQuery.toLowerCase())),\r\n  contact: (state) => contactId => state.contacts.find((contact) => contact.uid === contactId),\r\n  chats: (state) => state.chats,\r\n  chatUser: (state, getters, rootState) => id => state.contacts.find((contact) => contact.uid === id) || rootState.AppActiveUser,\r\n\r\n  chatLastMessaged: (state, getters) => id => {\r\n    if (getters.chatDataOfUser(id)) return getters.chatDataOfUser(id).msg.slice(-1)[0]\r\n    else return false\r\n  },\r\n  chatUnseenMessages: (state, getters) => id => {\r\n    let unseenMsg = 0\r\n    const chatData = getters.chatDataOfUser(id)\r\n    if (chatData) {\r\n      chatData.msg.map((msg) => {\r\n        if (!msg.isSeen && !msg.isSent) unseenMsg++\r\n      })\r\n    }\r\n    return unseenMsg\r\n  }\r\n}\r\n"]}]}