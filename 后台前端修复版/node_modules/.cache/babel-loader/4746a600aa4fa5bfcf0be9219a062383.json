{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\src\\views\\pages\\user-settings\\Background.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\src\\views\\pages\\user-settings\\Background.vue","mtime":1620826038000},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\babel.config.js","mtime":1620826038000},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664268236462},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1664268237683},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\babel-loader\\lib\\index.js","mtime":1663908471338},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664268236462},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\vue-loader\\lib\\index.js","mtime":1664268237964}],"contextDependencies":[],"result":["export default {\n  data: function data() {\n    return {\n      dataImg: '',\n      imgId: '',\n      imgFile: ''\n    };\n  },\n  methods: {\n    getImg: function getImg() {\n      var _this = this;\n\n      _this.$axios({\n        url: '/admin/Setting/getImg',\n        method: \"post\",\n        data: {} // headers:{'Content-Type':'multipart/form-data'}\n\n      }).then(function (res) {\n        if (res.data.status == 1) {\n          _this.dataImg = res.data.data.img;\n          _this.imgId = res.data.data.id;\n        } else {\n          _this.dataImg = '';\n        }\n      });\n    },\n    updateCurrImg: function updateCurrImg(input) {\n      var _this2 = this;\n\n      if (input.target.files && input.target.files[0]) {\n        var reader = new FileReader();\n\n        reader.onload = function (e) {\n          _this2.dataImg = e.target.result; // this.robot.img = e.target.result;\n\n          _this2.imgFile = input.target.files[0];\n\n          _this2.addBackground(_this2.imgFile);\n        };\n\n        reader.readAsDataURL(input.target.files[0]);\n      }\n    },\n    addBackground: function addBackground(file) {\n      var _this = this;\n\n      var forms = new FormData();\n      console.log(file);\n      forms.append('file', file);\n\n      _this.$axios({\n        url: '/admin/Setting/addBackground',\n        method: \"post\",\n        data: forms,\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(function (res) {\n        if (res.data.status == 1) {\n          _this.getImg();\n\n          _this.notify('success', res.data.msg);\n        } else {\n          _this.notify('danger', res.data.msg);\n        }\n      });\n    },\n    del: function del() {\n      var _this = this;\n\n      _this.$axios({\n        url: '/admin/Setting/del',\n        method: \"post\",\n        data: {\n          id: _this.imgId\n        }\n      }).then(function (res) {\n        if (res.data.status == 1) {\n          _this.notify('success', res.data.msg);\n\n          _this.getImg();\n        } else {\n          _this.notify('danger', res.data.msg);\n        }\n      });\n    },\n    notify: function notify(status, msg) {\n      this.$vs.notify({\n        title: '提示',\n        text: msg,\n        iconPack: 'feather',\n        icon: 'icon-alert-circle',\n        color: status\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getImg();\n  }\n};",{"version":3,"mappings":"AAuBA;EACAA,IADA,kBACA;IACA;MACAC,WADA;MAEAC,SAFA;MAGAC;IAHA;EAKA,CAPA;EAQAC;IACAC,MADA,oBACA;MACA;;MACAC;QACAC,4BADA;QAEAC,cAFA;QAGAR,QAHA,CAIA;;MAJA,GAKAS,IALA,CAKA;QACA;UACAH;UACAA;QACA,CAHA,MAGA;UACAA;QACA;MACA,CAZA;IAaA,CAhBA;IAiBAI,aAjBA,yBAiBAC,KAjBA,EAiBA;MAAA;;MACA;QACA;;QACAC;UACA,iCADA,CAEA;;UACA;;UACA;QACA,CALA;;QAMAA;MACA;IAEA,CA7BA;IA8BAC,aA9BA,yBA8BAC,IA9BA,EA8BA;MACA;;MACA;MACAC;MACAC;;MACAV;QACAC,mCADA;QAEAC,cAFA;QAGAR,WAHA;QAIAiB;UAAA;QAAA;MAJA,GAKAR,IALA,CAKA;QACA;UACAH;;UACAA;QACA,CAHA,MAGA;UACAA;QACA;MACA,CAZA;IAaA,CAhDA;IAiDAY,GAjDA,iBAiDA;MACA;;MACAZ;QACAC,yBADA;QAEAC,cAFA;QAGAR;UACAmB;QADA;MAHA,GAMAV,IANA,CAMA;QACA;UACAH;;UACAA;QACA,CAHA,MAGA;UACAA;QACA;MACA,CAbA;IAcA,CAjEA;IAkEAc,MAlEA,kBAkEAC,MAlEA,EAkEAC,GAlEA,EAkEA;MACA;QACAC,WADA;QAEAC,SAFA;QAGAC,mBAHA;QAIAC,yBAJA;QAKAC;MALA;IAOA;EA1EA,CARA;EAoFAC,OApFA,qBAoFA;IACA;EACA;AAtFA","names":["data","dataImg","imgId","imgFile","methods","getImg","_this","url","method","then","updateCurrImg","input","reader","addBackground","file","console","forms","headers","del","id","notify","status","msg","title","text","iconPack","icon","color","mounted"],"sourceRoot":"src/views/pages/user-settings","sources":["Background.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <!-- Product Image -->\r\n        <template v-if=\"dataImg\">\r\n          <!-- Image Container -->\r\n          <div class=\"img-container w-64 mx-auto flex items-center justify-center\">\r\n            <img :src=\"dataImg\" alt=\"img\" class=\"responsive\">\r\n          </div>\r\n\r\n          <!-- Image upload Buttons -->\r\n          <div class=\"modify-img flex justify-between mt-5\">\r\n            <input type=\"file\" class=\"hidden\" ref=\"updateImgInput\" @change=\"updateCurrImg\" accept=\"image/*\">\r\n            <vs-button class=\"mr-4\" type=\"flat\" @click=\"$refs.updateImgInput.click()\">上传图片</vs-button>\r\n            <vs-button type=\"flat\" color=\"#999\" @click=\"del()\">删除图片</vs-button>\r\n          </div>\r\n        </template>\r\n        <div class=\"upload-img mt-5\" v-if=\"!dataImg\">\r\n          <input type=\"file\" class=\"hidden\" ref=\"uploadImgInput\" @change=\"updateCurrImg\" accept=\"image/*\">\r\n          <vs-button @click=\"$refs.uploadImgInput.click()\">上传图片</vs-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            dataImg:'',\r\n            imgId:'',\r\n            imgFile:''\r\n        }\r\n    },\r\n    methods:{\r\n        getImg(){\r\n            let _this = this;\r\n            _this.$axios({\r\n            url: '/admin/Setting/getImg',\r\n            method: \"post\",\r\n            data:{},\r\n            // headers:{'Content-Type':'multipart/form-data'}\r\n            }).then((res) => {\r\n                if(res.data.status == 1){\r\n                _this.dataImg = res.data.data.img;\r\n                _this.imgId   = res.data.data.id;\r\n                }else{\r\n                    _this.dataImg = '';\r\n                }\r\n            });\r\n        },\r\n        updateCurrImg (input) {\r\n            if (input.target.files && input.target.files[0]) {\r\n                const reader = new FileReader()\r\n                reader.onload = e => {\r\n                this.dataImg = e.target.result;\r\n                // this.robot.img = e.target.result;\r\n                this.imgFile = input.target.files[0];\r\n                this.addBackground(this.imgFile);\r\n                }\r\n                reader.readAsDataURL(input.target.files[0])\r\n            }\r\n            \r\n        },\r\n        addBackground(file){\r\n            let _this = this;\r\n            var forms = new FormData();\r\n            console.log(file);\r\n            forms.append('file',file);\r\n            _this.$axios({\r\n                url: '/admin/Setting/addBackground',\r\n                method: \"post\",\r\n                data:forms,\r\n                headers:{'Content-Type':'multipart/form-data'}\r\n                }).then((res) => {\r\n                if(res.data.status == 1){\r\n                    _this.getImg();\r\n                    _this.notify('success',res.data.msg)\r\n                }else{\r\n                    _this.notify('danger',res.data.msg)\r\n                }\r\n            });\r\n        },\r\n        del(){\r\n            let _this = this;\r\n            _this.$axios({\r\n            url: '/admin/Setting/del',\r\n            method: \"post\",\r\n            data:{\r\n                id:_this.imgId\r\n            },\r\n            }).then((res) => {\r\n                if(res.data.status == 1){\r\n                    _this.notify('success',res.data.msg)\r\n                    _this.getImg();\r\n                }else{\r\n                    _this.notify('danger',res.data.msg)\r\n                }\r\n            });\r\n        },\r\n        notify(status,msg){\r\n            this.$vs.notify({\r\n                title: '提示',\r\n                text: msg,\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-circle',\r\n                color: status\r\n            })\r\n        }\r\n    },\r\n    mounted(){\r\n        this.getImg();\r\n    }\r\n}\r\n</script>"]}]}