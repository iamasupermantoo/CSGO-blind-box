{"remainingRequest":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\babel-loader\\lib\\index.js!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\src\\views\\ui-elements\\box\\UserEditTabInformation.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\src\\views\\ui-elements\\box\\UserEditTabInformation.vue","mtime":1620826038000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\babel.config.js","mtime":1620826038000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { AgGridVue } from 'ag-grid-vue';\nimport '@/assets/scss/vuexy/extraComponents/agGridStyleOverride.scss';\nimport vSelect from 'vue-select'; // Store Module\n\nimport moduleUserManagement from '@/store/user-management/moduleUserManagement.js'; // Cell Renderer\n\nimport CellRendererLink from \"./box-list/cell-renderer/CellRendererLink.vue\";\nimport CellRendererStatus from \"./box-list/cell-renderer/CellRendererStatus.vue\";\nimport CellRendererVerified from \"./box-list/cell-renderer/CellRendererVerified.vue\";\nimport CellRendererActions from \"./box-list/cell-renderer/CellRendererActions.vue\";\nimport CellRenderImg from \"./box-list/cell-renderer/CellRenderImg.vue\";\nimport DataSiderSkin from \"./DataSiderSkin.vue\";\nimport AddSkinSider from \"./AddSkinSider.vue\";\nimport CellStock from \"./box-list/cell-renderer/CellStock.vue\";\nimport CellStockVip from \"./box-list/cell-renderer/CellStockVip.vue\";\nexport default {\n  components: {\n    AgGridVue: AgGridVue,\n    vSelect: vSelect,\n    CellRendererLink: CellRendererLink,\n    CellRendererStatus: CellRendererStatus,\n    CellRendererVerified: CellRendererVerified,\n    CellRendererActions: CellRendererActions,\n    CellRenderImg: CellRenderImg,\n    DataSiderSkin: DataSiderSkin,\n    AddSkinSider: AddSkinSider,\n    CellStock: CellStock,\n    CellStockVip: CellStockVip\n  },\n  props: {\n    totalProbability: Number\n  },\n  data: function data() {\n    return {\n      total: 0,\n      totalPages: 0,\n      currentPage: 1,\n      addNewDataSidebar: false,\n      addSkinSidebar: false,\n      sidebarData: {},\n      searchQuery: '',\n      // AgGrid\n      list: [],\n      skinTypeList: [],\n      gridApi: null,\n      gridOptions: {},\n      defaultColDef: {\n        sortable: true,\n        resizable: true,\n        suppressMenu: true\n      },\n      columnDefs: [// {\n      //   headerName: 'ID',\n      //   field: 'id',\n      //   width: 125,\n      //   filter: true,\n      // },\n      {\n        headerName: '名称',\n        field: 'itemName',\n        filter: true\n      }, //  {\n      //   headerName: '图片',\n      //   // field: 'imageUrl',\n      //   filter: true,\n      //   width: 210,\n      //   cellRendererFramework: 'CellRenderImg'\n      // },\n      {\n        headerName: '价格',\n        field: 'price',\n        filter: true,\n        width: 120\n      }, {\n        headerName: '饰品品质',\n        field: 'exteriorName',\n        filter: true,\n        width: 150\n      }, {\n        headerName: '几率',\n        field: 'probability',\n        filter: true,\n        width: 80\n      }, {\n        headerName: '库存',\n        filter: true,\n        width: 135,\n        cellRendererFramework: 'CellStock'\n      }, //  {\n      //   headerName: '初始库存',\n      //   field: 'stock',\n      //   filter: true,\n      //   width: 120\n      // },\n      {\n        headerName: '库存(概率组)',\n        field: 'stock_group',\n        filter: true,\n        width: 130\n      }, //  {\n      //   headerName: '初始库存(概率组)',\n      //   field: 'stock_group',\n      //   filter: true,\n      //   width: 120\n      // },\n      {\n        headerName: '库存(vip)',\n        field: 'stock_vip',\n        filter: true,\n        width: 135,\n        cellRendererFramework: 'CellStockVip'\n      }, {\n        headerName: '分类',\n        field: 'plat_type_name',\n        filter: true,\n        width: 100\n      }, {\n        headerName: '添加时间',\n        field: 'create_time',\n        filter: true // width: 200\n\n      }, {\n        headerName: '操作',\n        field: 'rem',\n        filter: true,\n        width: 150,\n        cellRendererFramework: 'CellRendererActions'\n      }],\n      // Cell Renderer Components\n      components: {\n        CellRendererLink: CellRendererLink,\n        CellRendererStatus: CellRendererStatus,\n        CellRendererVerified: CellRendererVerified,\n        CellRendererActions: CellRendererActions,\n        CellStock: CellStock,\n        CellStockVip: CellStockVip\n      },\n      box_id: this.$route.params.userId\n    };\n  },\n  watch: {\n    roleFilter: function roleFilter(obj) {\n      this.setColumnFilter('role', obj.value);\n    },\n    statusFilter: function statusFilter(obj) {\n      this.setColumnFilter('status', obj.value);\n    },\n    isVerifiedFilter: function isVerifiedFilter(obj) {\n      var val = obj.value === 'all' ? 'all' : obj.value === 'yes' ? 'true' : 'false';\n      this.setColumnFilter('is_verified', val);\n    },\n    departmentFilter: function departmentFilter(obj) {\n      this.setColumnFilter('department', obj.value);\n    },\n    \"currentPage\": {\n      handler: function handler(val) {\n        var _this = this; // console.log(val);\n\n\n        _this.currentPage = val;\n\n        _this.getBoxSkins();\n      },\n      deep: true\n    },\n    searchQuery: function searchQuery(val) {\n      if (!val) {\n        this.getBoxSkins();\n      }\n    }\n  },\n  computed: {\n    usersData: function usersData() {// console.log(JSON.stringify(this.$store.state.userManagement.users) );\n      // return this.$store.state.userManagement.users\n    },\n    paginationPageSize: function paginationPageSize() {\n      if (this.gridApi) return this.gridApi.paginationGetPageSize();else return 10;\n    } // totalPages () {\n    //   if (this.gridApi) return this.gridApi.paginationGetTotalPages()\n    //   else return 0\n    // },\n    // currentPage: {\n    //   get () {\n    //     if (this.gridApi) return this.gridApi.paginationGetCurrentPage() + 1\n    //     else return 1\n    //   },\n    //   set (val) {\n    //     this.gridApi.paginationGoToPage(val - 1)\n    //   }\n    // }\n\n  },\n  methods: {\n    getBoxSkins: function getBoxSkins() {\n      var _this = this;\n\n      _this.$axios({\n        url: \"/admin/Box/boxSkinList\",\n        method: \"post\",\n        data: {\n          box_id: _this.box_id,\n          page: _this.currentPage,\n          pageSize: _this.paginationPageSize,\n          searchKey: _this.searchQuery\n        }\n      }).then(function (res) {\n        if (res.data.status == 1) {\n          _this.list = res.data.data.list;\n          _this.total = res.data.data.total;\n          _this.totalPages = _this.pageTotal(_this.total, _this.paginationPageSize);\n        } else {\n          _this.list = [];\n          _this.total = 0;\n          _this.totalPages = 1;\n        } // console.log(_this.pageTotal(_this.total,_this.paginationPageSize));\n\n      });\n    },\n    mendStock: function mendStock() {\n      var _this = this;\n\n      _this.$axios({\n        url: \"/admin/Box/mendStock\",\n        method: \"post\",\n        data: {\n          box_id: _this.box_id\n        }\n      }).then(function (res) {\n        if (res.data.status == 1) {\n          _this.getBoxSkins();\n        } // console.log(_this.pageTotal(_this.total,_this.paginationPageSize));\n\n      });\n    },\n    //\"总条数\"：rowCount，\"每页总条数\"：pageSize\n    pageTotal: function pageTotal(rowCount, pageSize) {\n      if (rowCount == null || rowCount == \"\") {\n        return 0;\n      } else {\n        if (pageSize != 0 && rowCount % pageSize == 0) {\n          return parseInt(rowCount / pageSize);\n        }\n\n        if (pageSize != 0 && rowCount % pageSize != 0) {\n          return parseInt(rowCount / pageSize) + 1;\n        }\n      }\n    },\n    getSkinType: function getSkinType() {\n      var _this = this;\n\n      _this.$axios({\n        url: \"/admin/Box/skinType\",\n        method: \"post\",\n        data: {}\n      }).then(function (res) {\n        _this.skinTypeList = res.data.data;\n      });\n    },\n    editSkin: function editSkin(pr) {\n      // console.log(pr.data);\n      this.sidebarData = pr.data;\n      this.toggleDataSidebar(true);\n    },\n    addSkin: function addSkin() {\n      this.sidebarData = {};\n      this.sidebarData.box_id = this.box_id;\n      this.toggleAddSkinSidebar(true);\n    },\n    reload: function reload() {\n      this.$emit(\"reload\");\n    },\n    toggleDataSidebar: function toggleDataSidebar() {\n      var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      this.addNewDataSidebar = val;\n    },\n    toggleAddSkinSidebar: function toggleAddSkinSidebar() {\n      var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      this.addSkinSidebar = val;\n    },\n    setColumnFilter: function setColumnFilter(column, val) {\n      var filter = this.gridApi.getFilterInstance(column);\n      var modelObj = null;\n\n      if (val !== 'all') {\n        modelObj = {\n          type: 'equals',\n          filter: val\n        };\n      }\n\n      filter.setModel(modelObj);\n      this.gridApi.onFilterChanged();\n    },\n    resetColFilters: function resetColFilters() {\n      // Reset Grid Filter\n      this.gridApi.setFilterModel(null);\n      this.gridApi.onFilterChanged(); // Reset Filter Options\n\n      this.roleFilter = this.statusFilter = this.isVerifiedFilter = this.departmentFilter = {\n        label: 'All',\n        value: 'all'\n      };\n      this.$refs.filterCard.removeRefreshAnimation();\n    },\n    updateSearchQuery: function updateSearchQuery(val) {\n      console.log(this.searchQuery); // this.gridApi.setQuickFilter(val)\n    }\n  },\n  mounted: function mounted() {\n    this.gridApi = this.gridOptions.api;\n    this.getBoxSkins();\n    this.getSkinType(); // console.log(this.totalProbability);\n    // this.totalProbability = this.$parent.$parent.$parent.totalProbability\n\n    /* =================================================================\r\n      NOTE:\r\n      Header is not aligned properly in RTL version of agGrid table.\r\n      However, we given fix to this issue. If you want more robust solution please contact them at gitHub\r\n    ================================================================= */\n\n    if (this.$vs.rtl) {\n      var header = this.$refs.agGridTable.$el.querySelector('.ag-header-container');\n      header.style.left = \"-\".concat(String(Number(header.style.transform.slice(11, -3)) + 9), \"px\");\n    }\n  },\n  created: function created() {\n    if (!moduleUserManagement.isRegistered) {\n      this.$store.registerModule('userManagement', moduleUserManagement);\n      moduleUserManagement.isRegistered = true;\n    }\n\n    this.$store.dispatch('userManagement/fetchUsers').catch(function (err) {\n      console.error(err);\n    });\n  }\n};",{"version":3,"sources":["UserEditTabInformation.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- =========================================================================================\r\n  File Name: UserList.vue\r\n  Description: User List page\r\n  ----------------------------------------------------------------------------------------\r\n  Item Name: Vuexy - Vuejs, HTML & Laravel Admin Dashboard Template\r\n  Author: Pixinvent\r\n  Author URL: http://www.themeforest.net/user/pixinvent\r\n========================================================================================== -->\r\n\r\n<template>\r\n\r\n  <div id=\"page-user-list\">\r\n  <data-sider-skin\r\n        :isSidebarActive=\"addNewDataSidebar\"\r\n        @closeSidebar=\"toggleDataSidebar\"\r\n        @reload=\"reload\"\r\n        :data=\"sidebarData\"\r\n      />\r\n    <add-skin-sider\r\n        :addSkinActive=\"addSkinSidebar\"\r\n        @closeSidebar=\"addSkinSidebar = false\"\r\n        :data=\"sidebarData\"\r\n      />\r\n    <div class=\"vx-card p-6\">\r\n\r\n      <div class=\"flex flex-wrap items-center\">\r\n\r\n        <!-- ITEMS PER PAGE -->\r\n        <div class=\"flex-grow\">\r\n          <vs-dropdown vs-trigger-click class=\"cursor-pointer\">\r\n            <div class=\"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium\">\r\n              <span class=\"mr-2\">{{ currentPage * paginationPageSize - (paginationPageSize - 1) }} - {{ list.length - currentPage * paginationPageSize > 0 ? currentPage * paginationPageSize : list.length }} of {{ total }}</span>\r\n              <feather-icon icon=\"ChevronDownIcon\" svgClasses=\"h-4 w-4\" />\r\n            </div>\r\n            <!-- <vs-button class=\"btn-drop\" type=\"line\" color=\"primary\" icon-pack=\"feather\" icon=\"icon-chevron-down\"></vs-button> -->\r\n            <vs-dropdown-menu>\r\n\r\n              <vs-dropdown-item @click=\"gridApi.paginationSetPageSize(10)\">\r\n                <span>10</span>\r\n              </vs-dropdown-item>\r\n              <vs-dropdown-item @click=\"gridApi.paginationSetPageSize(20)\">\r\n                <span>20</span>\r\n              </vs-dropdown-item>\r\n              <vs-dropdown-item @click=\"gridApi.paginationSetPageSize(25)\">\r\n                <span>25</span>\r\n              </vs-dropdown-item>\r\n              <vs-dropdown-item @click=\"gridApi.paginationSetPageSize(30)\">\r\n                <span>30</span>\r\n              </vs-dropdown-item>\r\n            </vs-dropdown-menu>\r\n          </vs-dropdown>\r\n          <!-- &nbsp;总概率：{{totalProbability}}% -->\r\n        </div>\r\n\r\n        <!-- TABLE ACTION COL-2: SEARCH & EXPORT AS CSV -->\r\n\r\n          <vs-input class=\"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4\" v-model=\"searchQuery\" @input=\"updateSearchQuery\" placeholder=\"Search...\" />\r\n          <!-- <vs-button class=\"mb-4 md:mb-0\" @click=\"gridApi.exportDataAsCsv()\">Export as CSV</vs-button> -->\r\n          <vs-button class=\"s-a\" @click=\"getBoxSkins('search')\">搜索</vs-button>\r\n          <vs-button class=\"s-a\" @click=\"addSkin\" style=\"margin-left:15px;\">添加</vs-button>\r\n          <vs-button class=\"s-a\" @click=\"mendStock()\"  style=\"margin-left:15px;\">一键补货</vs-button>\r\n      </div>\r\n\r\n\r\n      <!-- AgGrid Table -->\r\n      <ag-grid-vue\r\n        ref=\"agGridTable\"\r\n        :components=\"components\"\r\n        :gridOptions=\"gridOptions\"\r\n        class=\"ag-theme-material w-100 my-4 ag-grid-table\"\r\n        :columnDefs=\"columnDefs\"\r\n        :defaultColDef=\"defaultColDef\"\r\n        :rowData=\"list\"\r\n        rowSelection=\"multiple\"\r\n        colResizeDefault=\"shift\"\r\n        :animateRows=\"true\"\r\n        :floatingFilter=\"false\"\r\n        :pagination=\"true\"\r\n        :paginationPageSize=\"paginationPageSize\"\r\n        :suppressPaginationPanel=\"true\"\r\n        :enableRtl=\"$vs.rtl\">\r\n      </ag-grid-vue>\r\n\r\n      <vs-pagination\r\n        :total=\"totalPages\"\r\n        :max=\"7\"\r\n        v-model=\"currentPage\" />\r\n\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { AgGridVue } from 'ag-grid-vue'\r\nimport '@/assets/scss/vuexy/extraComponents/agGridStyleOverride.scss'\r\nimport vSelect from 'vue-select'\r\n\r\n// Store Module\r\nimport moduleUserManagement from '@/store/user-management/moduleUserManagement.js'\r\n\r\n// Cell Renderer\r\nimport CellRendererLink from './box-list/cell-renderer/CellRendererLink.vue'\r\nimport CellRendererStatus from './box-list/cell-renderer/CellRendererStatus.vue'\r\nimport CellRendererVerified from './box-list/cell-renderer/CellRendererVerified.vue'\r\nimport CellRendererActions from './box-list/cell-renderer/CellRendererActions.vue'\r\nimport CellRenderImg from './box-list/cell-renderer/CellRenderImg.vue'\r\nimport DataSiderSkin from './DataSiderSkin.vue'\r\nimport AddSkinSider from './AddSkinSider.vue'\r\nimport CellStock from './box-list/cell-renderer/CellStock.vue'\r\nimport CellStockVip from './box-list/cell-renderer/CellStockVip.vue'\r\n\r\nexport default {\r\n  components: {\r\n    AgGridVue,\r\n    vSelect,\r\n\r\n    CellRendererLink,\r\n    CellRendererStatus,\r\n    CellRendererVerified,\r\n    CellRendererActions,\r\n    CellRenderImg,\r\n    DataSiderSkin,\r\n    AddSkinSider,\r\n    CellStock,\r\n    CellStockVip\r\n  },\r\n  props: {\r\n      totalProbability:Number\r\n    },\r\n  data () {\r\n    return {\r\n      total:0,\r\n      totalPages:0,\r\n      currentPage:1,\r\n      addNewDataSidebar: false,\r\n      addSkinSidebar:false,\r\n      sidebarData:{},\r\n      searchQuery: '',\r\n\r\n      // AgGrid\r\n      list:[],\r\n      skinTypeList:[],\r\n      gridApi: null,\r\n      gridOptions: {},\r\n      defaultColDef: {\r\n        sortable: true,\r\n        resizable: true,\r\n        suppressMenu: true\r\n      },\r\n      columnDefs: [\r\n        // {\r\n        //   headerName: 'ID',\r\n        //   field: 'id',\r\n        //   width: 125,\r\n        //   filter: true,\r\n        // },\r\n        {\r\n          headerName: '名称',\r\n          field: 'itemName',\r\n          filter: true,\r\n        },\r\n\r\n        //  {\r\n        //   headerName: '图片',\r\n        //   // field: 'imageUrl',\r\n        //   filter: true,\r\n        //   width: 210,\r\n        //   cellRendererFramework: 'CellRenderImg'\r\n        // },\r\n\r\n        {\r\n          headerName: '价格',\r\n          field: 'price',\r\n          filter: true,\r\n          width: 120\r\n        }, \r\n         {\r\n          headerName: '饰品品质',\r\n          field: 'exteriorName',\r\n          filter: true,\r\n          width: 150,\r\n        },\r\n        {\r\n          headerName: '几率',\r\n          field: 'probability',\r\n          filter: true,\r\n          width: 80\r\n        },\r\n        {\r\n          headerName: '库存',\r\n          filter: true,\r\n          width: 135,\r\n          cellRendererFramework: 'CellStock'\r\n        },\r\n        //  {\r\n        //   headerName: '初始库存',\r\n        //   field: 'stock',\r\n        //   filter: true,\r\n        //   width: 120\r\n        // },\r\n        {\r\n          headerName: '库存(概率组)',\r\n          field: 'stock_group',\r\n          filter: true,\r\n          width: 130\r\n        },\r\n        //  {\r\n        //   headerName: '初始库存(概率组)',\r\n        //   field: 'stock_group',\r\n        //   filter: true,\r\n        //   width: 120\r\n        // },\r\n         {\r\n          headerName: '库存(vip)',\r\n          field: 'stock_vip',\r\n          filter: true,\r\n          width: 135,\r\n          cellRendererFramework: 'CellStockVip'\r\n        },\r\n         {\r\n          headerName: '分类',\r\n          field: 'plat_type_name',\r\n          filter: true,\r\n          width: 100,\r\n        },\r\n        {\r\n          headerName: '添加时间',\r\n          field: 'create_time',\r\n          filter: true,\r\n          // width: 200\r\n        },\r\n        {\r\n          headerName: '操作',\r\n          field: 'rem',\r\n          filter: true,\r\n          width: 150,\r\n          cellRendererFramework: 'CellRendererActions'\r\n        },\r\n      ],\r\n\r\n      // Cell Renderer Components\r\n      components: {\r\n        CellRendererLink,\r\n        CellRendererStatus,\r\n        CellRendererVerified,\r\n        CellRendererActions,\r\n        CellStock,\r\n        CellStockVip\r\n      },\r\n      box_id:this.$route.params.userId,\r\n    }\r\n  },\r\n  watch: {\r\n    roleFilter (obj) {\r\n      this.setColumnFilter('role', obj.value)\r\n    },\r\n    statusFilter (obj) {\r\n      this.setColumnFilter('status', obj.value)\r\n    },\r\n    isVerifiedFilter (obj) {\r\n      const val = obj.value === 'all' ? 'all' : obj.value === 'yes' ? 'true' : 'false'\r\n      this.setColumnFilter('is_verified', val)\r\n    },\r\n    departmentFilter (obj) {\r\n      this.setColumnFilter('department', obj.value)\r\n    },\r\n    \"currentPage\":{\r\n      handler(val){\r\n        let _this = this;\r\n        // console.log(val);\r\n        _this.currentPage = val;\r\n        _this.getBoxSkins();\r\n      },\r\n      deep:true\r\n    },\r\n    searchQuery(val){\r\n      if(!val){\r\n        this.getBoxSkins()\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    usersData () {\r\n     // console.log(JSON.stringify(this.$store.state.userManagement.users) );\r\n     // return this.$store.state.userManagement.users\r\n    },\r\n    paginationPageSize () {\r\n      if (this.gridApi) return this.gridApi.paginationGetPageSize()\r\n      else return 10\r\n    },\r\n    // totalPages () {\r\n    //   if (this.gridApi) return this.gridApi.paginationGetTotalPages()\r\n    //   else return 0\r\n    // },\r\n\r\n    // currentPage: {\r\n    //   get () {\r\n    //     if (this.gridApi) return this.gridApi.paginationGetCurrentPage() + 1\r\n    //     else return 1\r\n    //   },\r\n    //   set (val) {\r\n    //     this.gridApi.paginationGoToPage(val - 1)\r\n    //   }\r\n    // }\r\n  },\r\n  methods: {\r\n    getBoxSkins(){\r\n      let _this = this;\r\n      _this.$axios({\r\n          url: \"/admin/Box/boxSkinList\",\r\n          method: \"post\",\r\n          data: {\r\n            box_id:_this.box_id,\r\n            page:_this.currentPage,\r\n            pageSize:_this.paginationPageSize,\r\n            searchKey:_this.searchQuery\r\n          },\r\n        }).then((res) => {\r\n          if(res.data.status == 1){\r\n            _this.list = res.data.data.list;\r\n            _this.total = res.data.data.total;\r\n            _this.totalPages = _this.pageTotal(_this.total,_this.paginationPageSize);\r\n          }else{\r\n            _this.list = [];\r\n            _this.total = 0;\r\n            _this.totalPages = 1;\r\n          }\r\n          // console.log(_this.pageTotal(_this.total,_this.paginationPageSize));\r\n        });\r\n    },\r\n\r\n    mendStock(){\r\n      let _this = this;\r\n      _this.$axios({\r\n          url: \"/admin/Box/mendStock\",\r\n          method: \"post\",\r\n          data: {\r\n            box_id:_this.box_id\r\n          },\r\n        }).then((res) => {\r\n          if(res.data.status == 1){\r\n            _this.getBoxSkins();\r\n          }\r\n          // console.log(_this.pageTotal(_this.total,_this.paginationPageSize));\r\n        });\r\n    },\r\n\r\n      //\"总条数\"：rowCount，\"每页总条数\"：pageSize\r\n    pageTotal(rowCount, pageSize) {\r\n      if (rowCount == null || rowCount == \"\") {\r\n            return 0;\r\n      } else {\r\n            if (pageSize != 0 && rowCount % pageSize == 0) {\r\n                    return parseInt(rowCount / pageSize)\r\n            }\r\n            if (pageSize != 0 && rowCount % pageSize != 0) {\r\n                    return parseInt(rowCount / pageSize) + 1;\r\n            }\r\n        }\r\n    },\r\n\r\n    getSkinType(){\r\n      let _this = this;\r\n      _this.$axios({\r\n        url: \"/admin/Box/skinType\",\r\n        method: \"post\",\r\n        data: {},\r\n      }).then((res) => {\r\n        _this.skinTypeList = res.data.data;\r\n      });\r\n    },\r\n  \r\n    editSkin(pr) {\r\n      // console.log(pr.data);\r\n      this.sidebarData = pr.data;\r\n      this.toggleDataSidebar(true);\r\n    },\r\n    addSkin(){\r\n      this.sidebarData = {};\r\n      this.sidebarData.box_id = this.box_id;\r\n      this.toggleAddSkinSidebar(true);\r\n    },\r\n    reload(){\r\n      this.$emit(\"reload\");\r\n    },\r\n    toggleDataSidebar(val = false) {\r\n      this.addNewDataSidebar = val;\r\n    },\r\n    toggleAddSkinSidebar(val = false){\r\n      this.addSkinSidebar = val;\r\n    },\r\n    setColumnFilter (column, val) {\r\n      const filter = this.gridApi.getFilterInstance(column)\r\n      let modelObj = null\r\n\r\n      if (val !== 'all') {\r\n        modelObj = { type: 'equals', filter: val }\r\n      }\r\n\r\n      filter.setModel(modelObj)\r\n      this.gridApi.onFilterChanged()\r\n    },\r\n    resetColFilters () {\r\n      // Reset Grid Filter\r\n      this.gridApi.setFilterModel(null)\r\n      this.gridApi.onFilterChanged()\r\n\r\n      // Reset Filter Options\r\n      this.roleFilter = this.statusFilter = this.isVerifiedFilter = this.departmentFilter = { label: 'All', value: 'all' }\r\n\r\n      this.$refs.filterCard.removeRefreshAnimation()\r\n    },\r\n    updateSearchQuery (val) {\r\n      console.log(this.searchQuery);\r\n      // this.gridApi.setQuickFilter(val)\r\n    },\r\n  },\r\n  mounted () {\r\n    this.gridApi = this.gridOptions.api;\r\n    this.getBoxSkins();\r\n    this.getSkinType();\r\n    // console.log(this.totalProbability);\r\n    // this.totalProbability = this.$parent.$parent.$parent.totalProbability\r\n    /* =================================================================\r\n      NOTE:\r\n      Header is not aligned properly in RTL version of agGrid table.\r\n      However, we given fix to this issue. If you want more robust solution please contact them at gitHub\r\n    ================================================================= */\r\n    if (this.$vs.rtl) {\r\n      const header = this.$refs.agGridTable.$el.querySelector('.ag-header-container')\r\n      header.style.left = `-${  String(Number(header.style.transform.slice(11, -3)) + 9)  }px`\r\n    }\r\n  },\r\n  created () {\r\n    if (!moduleUserManagement.isRegistered) {\r\n      this.$store.registerModule('userManagement', moduleUserManagement)\r\n      moduleUserManagement.isRegistered = true\r\n    }\r\n    this.$store.dispatch('userManagement/fetchUsers').catch(err => { console.error(err) })\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n#page-user-list {\r\n  .user-list-filters {\r\n    .vs__actions {\r\n      position: absolute;\r\n      right: 0;\r\n      top: 50%;\r\n      transform: translateY(-58%);\r\n    }\r\n  }\r\n}\r\n\r\n</style>\r\n<style>\r\n.s-a{\r\n  padding: 0.7rem 2rem!important;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/ui-elements/box"}]}