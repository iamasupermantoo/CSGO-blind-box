{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\src\\views\\pages\\room-component\\AddSkin.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\src\\views\\pages\\room-component\\AddSkin.vue","mtime":1638696156000},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\babel.config.js","mtime":1620826038000},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664268236462},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1664268237683},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\babel-loader\\lib\\index.js","mtime":1663908471338},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664268236462},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\vue-loader\\lib\\index.js","mtime":1664268237964}],"contextDependencies":[],"result":["import VuePerfectScrollbar from \"vue-perfect-scrollbar\";\nexport default {\n  name: 'AddSkin',\n  props: {\n    addSkinActive: {\n      type: Boolean,\n      required: true\n    },\n    data: {\n      type: Object,\n      default: function _default() {}\n    },\n    free_room_id: {\n      type: String,\n      default: null\n    }\n  },\n  components: {\n    VuePerfectScrollbar: VuePerfectScrollbar\n  },\n  data: function data() {\n    return {\n      dataBoxId: null,\n      settings: {\n        // perfectscrollbar settings\n        maxScrollbarLength: 60,\n        wheelSpeed: 0.6\n      },\n      file: '',\n      skinTypeList: [],\n      selected: [],\n      isMounted: false,\n      addNewDataSidebar: false,\n      sidebarData: {},\n      products: [],\n      total: 0,\n      currentPage: 1,\n      pageSize: 10,\n      totalPages: 0,\n      searchKey: '',\n      components: {}\n    };\n  },\n  watch: {\n    addSkinActive: function addSkinActive(val) {\n      this.getSkinList();\n    },\n    \"currentPage\": {\n      handler: function handler(val) {\n        var _this = this;\n\n        _this.currentPage = val;\n\n        _this.getSkinList();\n      },\n      deep: true\n    },\n    'pageSize': {\n      handler: function handler(val) {\n        var _this = this;\n\n        _this.pageSize = val;\n\n        _this.getSkinList();\n      },\n      deep: true\n    }\n  },\n  computed: {\n    addSkinActiveLocal: {\n      get: function get() {\n        return this.addSkinActive;\n      },\n      set: function set(val) {\n        if (!val) {\n          this.$emit(\"closeSidebar\");\n        }\n      }\n    },\n    isFormValid: function isFormValid() {\n      return !this.errors.any() && this.dataName && this.dataCategory && this.dataPrice > 0;\n    },\n    scrollbarTag: function scrollbarTag() {\n      return this.$store.getters.scrollbarTag;\n    }\n  },\n  methods: {\n    handleSearch: function handleSearch(searching) {\n      this.searchKey = searching;\n      this.getSkinList();\n    },\n    getSkinList: function getSkinList() {\n      var _this = this;\n\n      _this.$axios({\n        url: \"/admin/all_skin/allSkinList\",\n        method: \"post\",\n        data: {\n          page: _this.currentPage,\n          pageSize: _this.pageSize,\n          searchKey: _this.searchKey\n        }\n      }).then(function (res) {\n        _this.products = res.data.data.list;\n        _this.total = res.data.data.total;\n        _this.totalPages = _this.pageTotal(_this.total, _this.pageSize);\n        console.log(_this.total);\n        console.log(_this.currentPage);\n      });\n    },\n    addSkin: function addSkin(row) {\n      console.log(row);\n\n      var _this = this;\n\n      var pramas = {\n        free_room_id: _this.free_room_id,\n        skin_id: row.id\n      };\n      console.log(pramas);\n\n      _this.$axios({\n        url: \"/admin/Free/addSkinToRoom\",\n        method: \"post\",\n        data: {\n          data: pramas\n        }\n      }).then(function (res) {\n        //  console.log(res);\n        if (res.data.status == 1) {\n          _this.$emit(\"closeSidebar\");\n\n          _this.$parent.getPrizes();\n\n          _this.$vs.notify({\n            color: 'success',\n            title: '提示',\n            text: res.data.msg\n          });\n        } else {\n          _this.$vs.notify({\n            color: 'warning',\n            title: '提示',\n            text: res.data.msg\n          });\n        }\n      });\n    },\n    //\"总条数\"：rowCount，\"每页总条数\"：pageSize\n    pageTotal: function pageTotal(rowCount, pageSize) {\n      if (rowCount == null || rowCount == \"\") {\n        return 0;\n      } else {\n        if (pageSize != 0 && rowCount % pageSize == 0) {\n          return parseInt(rowCount / pageSize);\n        }\n\n        if (pageSize != 0 && rowCount % pageSize != 0) {\n          return parseInt(rowCount / pageSize) + 1;\n        }\n      }\n    }\n  },\n  mounted: function mounted() {// console.log(this.skinTypeList);\n  }\n};",{"version":3,"mappings":"AA0HA;AAEA;EACAA,eADA;EAEAC;IACAC;MACAC,aADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAG;IAFA,CALA;IASAC;MACAJ,YADA;MAEAG;IAFA;EATA,CAFA;EAgBAE;IACAC;EADA,CAhBA;EAmBAJ,IAnBA,kBAmBA;IACA;MACAK,eADA;MAGAC;QACA;QACAC,sBAFA;QAGAC;MAHA,CAHA;MAQAC,QARA;MASAC,gBATA;MAWAC,YAXA;MAYAC,gBAZA;MAaAC,wBAbA;MAcAC,eAdA;MAeAC,YAfA;MAgBAC,QAhBA;MAiBAC,cAjBA;MAkBAC,YAlBA;MAmBAC,aAnBA;MAoBAC,aApBA;MAqBAjB;IArBA;EAwBA,CA5CA;EA6CAkB;IACAxB,aADA,yBACAyB,GADA,EACA;MACA;IACA,CAHA;IAIA;MACAC,OADA,mBACAD,GADA,EACA;QACA;;QACAE;;QACAA;MACA,CALA;MAMAC;IANA,CAJA;IAYA;MACAF,OADA,mBACAD,GADA,EACA;QACA;;QACAE;;QACAA;MACA,CALA;MAMAC;IANA;EAZA,CA7CA;EAkEAC;IACAC;MACAC,GADA,iBACA;QACA;MACA,CAHA;MAIAC,GAJA,eAIAP,GAJA,EAIA;QACA;UACA;QACA;MACA;IARA,CADA;IAWAQ,WAXA,yBAWA;MACA,OACA,sBACA,aADA,IAEA,iBAFA,IAGA,kBAJA;IAMA,CAlBA;IAmBAC,YAnBA,0BAmBA;MACA;IACA;EArBA,CAlEA;EAyFAC;IACAC,YADA,wBACAC,SADA,EACA;MACA;MACA;IACA,CAJA;IAKAC,WALA,yBAKA;MACA;;MACAX;QACAY,kCADA;QAEAC,cAFA;QAGArC;UACAsC,uBADA;UAEApB,wBAFA;UAGAE;QAHA;MAHA,GAQAmB,IARA,CAQA;QACAf;QACAA;QACAA;QAEAgB;QACAA;MACA,CAfA;IAgBA,CAvBA;IAwBAC,OAxBA,mBAwBAC,GAxBA,EAwBA;MACAF;;MACA;;MACA;QACAtC,gCADA;QAEAyC;MAFA;MAIAH;;MACAhB;QACAY,gCADA;QAEAC,cAFA;QAGArC;UACAA;QADA;MAHA,GAMAuC,IANA,CAMA;QACA;QACA;UACAf;;UACAA;;UACAA;YACAoB,gBADA;YAEAC,WAFA;YAGAC;UAHA;QAKA,CARA,MAQA;UACAtB;YACAoB,gBADA;YAEAC,WAFA;YAGAC;UAHA;QAKA;MACA,CAvBA;IAwBA,CAxDA;IA0DA;IACAC,SA3DA,qBA2DAC,QA3DA,EA2DA9B,QA3DA,EA2DA;MACA;QACA;MACA,CAFA,MAEA;QACA;UACA;QACA;;QACA;UACA;QACA;MACA;IACA;EAtEA,CAzFA;EAkKA+B,OAlKA,qBAkKA,CAEA;EACA;AArKA","names":["name","props","addSkinActive","type","required","data","default","free_room_id","components","VuePerfectScrollbar","dataBoxId","settings","maxScrollbarLength","wheelSpeed","file","skinTypeList","selected","isMounted","addNewDataSidebar","sidebarData","products","total","currentPage","pageSize","totalPages","searchKey","watch","val","handler","_this","deep","computed","addSkinActiveLocal","get","set","isFormValid","scrollbarTag","methods","handleSearch","searching","getSkinList","url","method","page","then","console","addSkin","row","skin_id","color","title","text","pageTotal","rowCount","mounted"],"sourceRoot":"src/views/pages/room-component","sources":["AddSkin.vue"],"sourcesContent":["<template>\r\n  <vs-sidebar\r\n    click-not-close\r\n    position-right\r\n    parent=\"body\"\r\n    default-index=\"1\"\r\n    color=\"primary\"\r\n    class=\"add-new-data-sidebar items-no-padding\"\r\n    spacer\r\n    v-model=\"addSkinActiveLocal\"\r\n  >\r\n    <div class=\"mt-6 flex items-center justify-between px-6\">\r\n      <h4>\r\n        添加饰品\r\n      </h4>\r\n      <feather-icon\r\n        icon=\"XIcon\"\r\n        @click.stop=\"addSkinActiveLocal = false\"\r\n        class=\"cursor-pointer\"\r\n      ></feather-icon>\r\n    </div>\r\n    <vs-divider class=\"mb-0\"></vs-divider>\r\n\r\n    <component\r\n      :is=\"scrollbarTag\"\r\n      class=\"scroll-area--data-list-add-new\"\r\n      :settings=\"settings\"\r\n      :key=\"$vs.rtl\"\r\n    >\r\n      <div class=\"p-6\">\r\n\r\n        <div id=\"data-list-list-view\" class=\"data-list-container\">\r\n\r\n            <!-- <skin-list :isSidebarActive=\"addNewDataSidebar\" @closeSidebar=\"toggleDataSidebar\" :data=\"sidebarData\" /> -->\r\n\r\n            <vs-table  :sst=\"true\" ref=\"table\" @search=\"handleSearch\" multiple v-model=\"selected\" :max-items=\"pageSize\" search :data=\"products\">\r\n\r\n            <div slot=\"header\" class=\"flex flex-wrap-reverse items-center flex-grow justify-between\">\r\n\r\n                <div class=\"flex flex-wrap-reverse items-center data-list-btn-container\">\r\n\r\n                </div>\r\n\r\n                <!-- ITEMS PER PAGE -->\r\n                <vs-dropdown vs-trigger-click class=\"cursor-pointer mb-4 mr-4 items-per-page-handler\">\r\n                <div class=\"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium\">\r\n                    <span class=\"mr-2\">{{ currentPage * pageSize - (pageSize - 1) }} - {{  currentPage * pageSize }} of {{ total }}</span>\r\n                    <feather-icon icon=\"ChevronDownIcon\" svgClasses=\"h-4 w-4\" />\r\n                </div>\r\n                <vs-dropdown-menu>\r\n                    <vs-dropdown-item @click=\"pageSize=10\">\r\n                    <span>10</span>\r\n                    </vs-dropdown-item>\r\n                    <vs-dropdown-item @click=\"pageSize=20\">\r\n                    <span>20</span>\r\n                    </vs-dropdown-item>\r\n                    <vs-dropdown-item @click=\"pageSize=30\">\r\n                    <span>30</span>\r\n                    </vs-dropdown-item>\r\n                    <vs-dropdown-item @click=\"pageSize=50\">\r\n                    <span>50</span>\r\n                    </vs-dropdown-item>\r\n                </vs-dropdown-menu>\r\n                </vs-dropdown>\r\n            </div>\r\n\r\n            <template slot=\"thead\">\r\n                <vs-th sort-key=\"imageUrl\">图片</vs-th>\r\n                <vs-th sort-key=\"itemName\">名称</vs-th>\r\n                <vs-th sort-key=\"priceInfo.price\">价格</vs-th>\r\n                <vs-th sort-key=\"rarityName\">分类</vs-th>\r\n                <vs-th>操作</vs-th>\r\n            </template>\r\n                <template slot-scope=\"{data}\">\r\n                <tbody>\r\n                    <vs-tr :data=\"tr\" :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n\r\n                    <vs-td class=\"img-container\">\r\n                        <img :src=\"tr.imageUrl\" class=\"product-img\" />\r\n                    </vs-td>\r\n\r\n                    <vs-td>\r\n                        <p class=\"product-name font-medium truncate\">{{ tr.itemName }}</p>\r\n                    </vs-td>\r\n\r\n                    <vs-td>\r\n                        <p class=\"product-price\">${{ tr.price }}</p>\r\n                    </vs-td>\r\n\r\n                    <vs-td>\r\n                        <p class=\"product-category\">{{ tr.rarityName }}</p>\r\n                    </vs-td>\r\n\r\n                    <vs-td class=\"whitespace-no-wrap\">\r\n                        <a @click.stop=\"addSkin(tr)\">添加</a>\r\n                    </vs-td>\r\n\r\n                    </vs-tr>\r\n                </tbody>\r\n                </template>\r\n            </vs-table>\r\n        </div>\r\n      </div>\r\n    </component>\r\n\r\n    <div class=\"flex flex-wrap items-center p-6 pagination\" slot=\"footer\" style=\"display:flex;\">\r\n      <!-- <vs-button class=\"mr-6\" @click=\"submitData\" :disabled=\"!isFormValid\" -->\r\n      <vs-button class=\"mr-6\"\r\n        >提交</vs-button\r\n      >\r\n      <vs-button\r\n        type=\"border\"\r\n        color=\"danger\"\r\n        @click=\"addSkinActiveLocal = false\"\r\n        >取消</vs-button\r\n      >\r\n       <vs-pagination :total=\"totalPages\" :max=\"7\" v-model=\"currentPage\" />\r\n    </div>\r\n  </vs-sidebar>\r\n</template>\r\n\r\n<script>\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\n\r\nexport default {\r\n  name:'AddSkin',\r\n  props: {\r\n    addSkinActive: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    data: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n    free_room_id:{\r\n        type:String,\r\n        default:null\r\n    }\r\n  },\r\n  components: {\r\n    VuePerfectScrollbar,\r\n  },\r\n  data() {\r\n    return {\r\n      dataBoxId: null,\r\n\r\n      settings: {\r\n        // perfectscrollbar settings\r\n        maxScrollbarLength: 60,\r\n        wheelSpeed: 0.6,\r\n      },\r\n      file:'',\r\n      skinTypeList:[],\r\n\r\n      selected: [],\r\n      isMounted: false,\r\n      addNewDataSidebar: false,\r\n      sidebarData: {},\r\n      products:[],\r\n      total:0,\r\n      currentPage:1,\r\n      pageSize: 10,\r\n      totalPages:0,\r\n      searchKey:'',\r\n      components: {\r\n      },\r\n    };\r\n  },\r\n  watch: {\r\n    addSkinActive(val) {\r\n        this.getSkinList();\r\n    },\r\n    \"currentPage\":{\r\n      handler(val){\r\n        let _this = this;\r\n        _this.currentPage = val;\r\n        _this.getSkinList();\r\n      },\r\n      deep:true\r\n    },\r\n    'pageSize':{\r\n      handler(val){\r\n        let _this = this;\r\n        _this.pageSize = val;\r\n        _this.getSkinList();\r\n      },\r\n      deep:true\r\n    },\r\n  },\r\n  computed: {\r\n    addSkinActiveLocal: {\r\n      get() {\r\n        return this.addSkinActive;\r\n      },\r\n      set(val) {\r\n        if (!val) {\r\n          this.$emit(\"closeSidebar\");\r\n        }\r\n      },\r\n    },\r\n    isFormValid() {\r\n      return (\r\n        !this.errors.any() &&\r\n        this.dataName &&\r\n        this.dataCategory &&\r\n        this.dataPrice > 0\r\n      );\r\n    },\r\n    scrollbarTag() {\r\n      return this.$store.getters.scrollbarTag;\r\n    }\r\n  },\r\n  methods: {\r\n    handleSearch (searching) {\r\n      this.searchKey = searching;\r\n      this.getSkinList();\r\n    },\r\n    getSkinList(){\r\n        let _this = this;\r\n        _this.$axios({\r\n            url: \"/admin/all_skin/allSkinList\",\r\n            method: \"post\",\r\n            data:{\r\n                page:_this.currentPage,\r\n                pageSize:_this.pageSize,\r\n                searchKey:_this.searchKey,\r\n            }\r\n        }).then((res) => {\r\n            _this.products = res.data.data.list;\r\n            _this.total =  res.data.data.total;\r\n            _this.totalPages = _this.pageTotal(_this.total,_this.pageSize);\r\n\r\n            console.log(_this.total);\r\n            console.log(_this.currentPage);\r\n        });\r\n    },\r\n    addSkin(row) {\r\n        console.log(row);\r\n        let _this = this;\r\n        const pramas = {\r\n            free_room_id: _this.free_room_id,\r\n            skin_id: row.id\r\n          };\r\n          console.log(pramas);\r\n        _this.$axios({\r\n            url: \"/admin/Free/addSkinToRoom\",\r\n            method: \"post\",\r\n            data: {\r\n                data:pramas\r\n            },\r\n        }).then((res) => {\r\n            //  console.log(res);\r\n            if(res.data.status == 1){\r\n                _this.$emit(\"closeSidebar\");\r\n                _this.$parent.getPrizes();\r\n                _this.$vs.notify({\r\n                    color: 'success',\r\n                    title: '提示',\r\n                    text: res.data.msg\r\n                })\r\n            }else{\r\n                _this.$vs.notify({\r\n                    color: 'warning',\r\n                    title: '提示',\r\n                    text: res.data.msg\r\n                })\r\n            }\r\n        });\r\n    },\r\n\r\n    //\"总条数\"：rowCount，\"每页总条数\"：pageSize\r\n    pageTotal(rowCount, pageSize) {\r\n      if (rowCount == null || rowCount == \"\") {\r\n            return 0;\r\n      } else {\r\n            if (pageSize != 0 && rowCount % pageSize == 0) {\r\n                    return parseInt(rowCount / pageSize)\r\n            }\r\n            if (pageSize != 0 && rowCount % pageSize != 0) {\r\n                    return parseInt(rowCount / pageSize) + 1;\r\n            }\r\n        }\r\n    },\r\n\r\n  },\r\n  mounted(){\r\n\r\n    // console.log(this.skinTypeList);\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.add-new-data-sidebar {\r\n  ::v-deep .vs-sidebar--background {\r\n    z-index: 52010;\r\n  }\r\n\r\n  ::v-deep .vs-sidebar {\r\n    z-index: 52010;\r\n    // width: 400px;\r\n    max-width: 90vw;\r\n    max-height: 90vh;\r\n    margin-top: 5vh;\r\n    margin-right: 4vw;\r\n\r\n    .img-upload {\r\n      margin-top: 2rem;\r\n\r\n      .con-img-upload {\r\n        padding: 0;\r\n      }\r\n\r\n      .con-input-upload {\r\n        width: 100%;\r\n        margin: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.scroll-area--data-list-add-new {\r\n  // height: calc(var(--vh, 1vh) * 100 - 4.3rem);\r\n  height: calc(var(--vh, 1vh) * 100 - 16px - 45px - 160px);\r\n\r\n  &:not(.ps) {\r\n    overflow-y: auto;\r\n  }\r\n}\r\n.img-container {\r\n    // width: 1rem;\r\n    // background: #fff;\r\n\r\n    span {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    }\r\n\r\n    .product-img {\r\n    height: 110px;\r\n    }\r\n}\r\n #data-list-list-view .vs-con-table .vs-table tr td {\r\n    padding: 5px 0;\r\n}\r\n.pagination .vs-row {\r\n    float: left;\r\n    margin-left: auto;\r\n    width: auto!important;\r\n}\r\n.td-check{\r\n    display: none;\r\n}\r\n</style>\r\n"]}]}