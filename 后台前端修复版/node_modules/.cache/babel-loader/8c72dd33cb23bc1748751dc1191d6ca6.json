{"remainingRequest":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\babel-loader\\lib\\index.js!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\src\\views\\ui-elements\\box\\box-list\\UserList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\src\\views\\ui-elements\\box\\box-list\\UserList.vue","mtime":1620826038000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\babel.config.js","mtime":1620826038000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664268236462},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1664268237683},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\babel-loader\\lib\\index.js","mtime":1663908471338},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664268236462},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\vue-loader\\lib\\index.js","mtime":1664268237964}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\nimport { AgGridVue } from \"ag-grid-vue\";\nimport \"@/assets/scss/vuexy/extraComponents/agGridStyleOverride.scss\";\nimport vSelect from \"vue-select\"; // Store Module\n\nimport moduleUserManagement from \"@/store/user-management/moduleUserManagement.js\"; // Cell Renderer\n\nimport CellRendererLink from \"./cell-renderer/CellRendererLink.vue\";\nimport CellRendererStatus from \"./cell-renderer/CellRendererStatus.vue\";\nimport CellRendererVerified from \"./cell-renderer/CellRendererVerified.vue\";\nimport CellRendererActions from \"./cell-renderer/CellRendererActions.vue\";\nimport CellRenderOpp from \"./cell-renderer/CellRenderOpp.vue\";\nimport DataViewSidebar from \"../DataViewSidebar.vue\";\nexport default {\n  components: {\n    AgGridVue: AgGridVue,\n    vSelect: vSelect,\n    DataViewSidebar: DataViewSidebar,\n    // Cell Renderer\n    CellRendererLink: CellRendererLink,\n    CellRendererStatus: CellRendererStatus,\n    CellRendererVerified: CellRendererVerified,\n    CellRendererActions: CellRendererActions,\n    CellRenderOpp: CellRenderOpp\n  },\n  data: function data() {\n    return {\n      addNewDataSidebar: false,\n      sidebarData: {},\n      // Filter Options\n      roleFilter: {\n        label: \"所有\",\n        value: \"\"\n      },\n      roleOptions: [// { label: \"所有\", value: \"1\" },\n        // { label: \"限量\", value: \"2\" },\n        // { label: \"稀有\", value: \"3\" },\n        // { label: \"特殊\", value: \"4\" },\n        // { label: \"经典\", value: \"5\" },\n        // { label: \"YOUTUBE 武器箱\", value: \"6\" },\n        // { label: \"仅在 SKINCLUB\", value: \"3\" },\n        // { label: \"收藏\", value: \"3\" },\n      ],\n      searchQuery: \"\",\n      // AgGrid\n      gridApi: null,\n      gridOptions: {},\n      defaultColDef: {\n        sortable: true,\n        resizable: false,\n        suppressMenu: false\n      },\n      columnDefs: [// {\n      //   headerName: \"ID\",\n      //   field: \"id\",\n      //   width: 80,\n      //   filter: true,\n      // },\n      {\n        headerName: \"名称\",\n        field: \"name\",\n        filter: true,\n        width: 200,\n        cellRendererFramework: \"CellRendererLink\"\n      }, // {\n      //   headerName: \"图片\",\n      //   field: \"img\",\n      //   filter: true,\n      //   width: 125,\n      // },\n      {\n        headerName: \"价格\",\n        field: \"price\",\n        // filter: true,\n        width: 125\n      }, {\n        headerName: \"类型\",\n        field: \"rarity_name\",\n        // filter: true,\n        width: 100\n      }, {\n        headerName: \"是否对战\",\n        field: \"battle\",\n        // filter: true,\n        width: 130\n      }, {\n        headerName: \"总库存\",\n        field: \"total_stock\",\n        // filter: true,\n        width: 120\n      }, {\n        headerName: \"总库存(G)\",\n        field: \"total_stock_group\",\n        // filter: true,\n        width: 125\n      }, {\n        headerName: \"总库存(V)\",\n        field: \"total_stock_vip\",\n        // filter: true,\n        width: 125\n      }, {\n        headerName: \"状态\",\n        field: \"flag\",\n        // filter: true,\n        width: 100\n      }, {\n        headerName: \"创建时间\",\n        field: \"create_time\",\n        // filter: true,\n        width: 200 // cellRendererFramework: \"CellRendererStatus\",\n\n      } // {\n      //   headerName: \"创建时间\",\n      //   field: \"\",\n      //   filter: true,\n      //   width: 125,\n      //   cellRendererFramework: \"CellRendererVerified\",\n      //   cellClass: \"text-center\",\n      // },\n      // {\n      //   headerName: \"操作\",\n      //   width: 100,\n      //   cellRendererFramework: \"CellRenderOpp\"\n      // },\n      ],\n      // Cell Renderer Components\n      components: {\n        CellRendererLink: CellRendererLink,\n        CellRendererStatus: CellRendererStatus,\n        CellRendererVerified: CellRendererVerified,\n        CellRendererActions: CellRendererActions\n      },\n      boxList: [],\n      boxRarity: [],\n      params: {},\n      total: 0,\n      totalPages: 0,\n      currentPage: 1\n    };\n  },\n  watch: {\n    roleFilter: function roleFilter(obj) {\n      this.setColumnFilter(\"role\", obj.value);\n    },\n    statusFilter: function statusFilter(obj) {\n      this.setColumnFilter(\"status\", obj.value);\n    },\n    isVerifiedFilter: function isVerifiedFilter(obj) {\n      var val = obj.value === \"all\" ? \"all\" : obj.value === \"yes\" ? \"true\" : \"false\";\n      this.setColumnFilter(\"is_verified\", val);\n    },\n    departmentFilter: function departmentFilter(obj) {\n      this.setColumnFilter(\"department\", obj.value);\n    },\n    \"currentPage\": {\n      handler: function handler(val) {\n        var _this = this;\n\n        _this.getBoxList();\n      },\n      deep: true\n    },\n    \"paginationPageSize\": {\n      handler: function handler(val) {\n        var _this = this;\n\n        _this.getBoxList();\n      },\n      deep: true\n    }\n  },\n  computed: {\n    // usersData() {\n    //   // console.log(JSON.stringify(this.$store.state.userManagement.users));\n    //   return this.$store.state.userManagement.users;\n    // },\n    paginationPageSize: function paginationPageSize() {\n      if (this.gridApi) return this.gridApi.paginationGetPageSize();else return 10;\n    } // currentPage: {\n    //   get() {\n    //     if (this.gridApi) return this.gridApi.paginationGetCurrentPage() + 1;\n    //     else return 1;\n    //   },\n    //   set(val) {\n    //     this.gridApi.paginationGoToPage(val - 1);\n    //   },\n    // },\n\n  },\n  methods: {\n    getBoxList: function getBoxList() {\n      var _this = this;\n\n      var params = {\n        page: _this.currentPage,\n        pageSize: _this.paginationPageSize\n      };\n\n      _this.$axios({\n        url: \"/admin/Box/boxList\",\n        method: \"post\",\n        data: params\n      }).then(function (res) {\n        console.log(res);\n\n        if (res.data.status == 1) {\n          res.data.data.list.forEach(function (element) {\n            element[\"flag\"] = element[\"flag\"] == 1 ? \"正常\" : \"禁用\";\n            element[\"battle\"] = element[\"battle\"] == 1 ? \"是\" : \"否\";\n          });\n          _this.boxList = res.data.data.list;\n          _this.total = res.data.data.total;\n          _this.totalPages = _this.pageTotal(_this.total, _this.paginationPageSize);\n        } else {\n          _this.boxList = [];\n          _this.total = 0;\n        }\n      });\n    },\n    //\"总条数\"：rowCount，\"每页总条数\"：pageSize\n    pageTotal: function pageTotal(rowCount, pageSize) {\n      if (rowCount == null || rowCount == \"\") {\n        return 0;\n      } else {\n        if (pageSize != 0 && rowCount % pageSize == 0) {\n          return parseInt(rowCount / pageSize);\n        }\n\n        if (pageSize != 0 && rowCount % pageSize != 0) {\n          return parseInt(rowCount / pageSize) + 1;\n        }\n      }\n    },\n    getBoxRarity: function getBoxRarity() {\n      var _this = this;\n\n      _this.$axios({\n        url: \"/admin/Box/boxRarity\",\n        method: \"post\",\n        params: {}\n      }).then(function (res) {\n        res.data.data.forEach(function (element) {\n          element[\"value\"] = element[\"id\"];\n          element[\"label\"] = element[\"rarity_name\"];\n        });\n        var allArr = {\n          label: '所有',\n          value: ''\n        };\n        res.data.data.unshift(allArr);\n        _this.roleOptions = res.data.data;\n      });\n    },\n    addNewData: function addNewData() {\n      this.sidebarData = {};\n      this.toggleDataSidebar(true);\n    },\n    toggleDataSidebar: function toggleDataSidebar() {\n      var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      this.addNewDataSidebar = val;\n    },\n    setColumnFilter: function setColumnFilter(column, val) {\n      console.log(column, val);\n\n      var _this = this;\n\n      _this.params = {\n        box_rarity_id: val\n      };\n\n      _this.getBoxList();\n    },\n    resetColFilters: function resetColFilters() {\n      // Reset Grid Filter\n      this.gridApi.setFilterModel(null);\n      this.gridApi.onFilterChanged(); // Reset Filter Options\n\n      this.roleFilter = this.statusFilter = this.isVerifiedFilter = this.departmentFilter = {\n        label: \"All\",\n        value: \"all\"\n      };\n      this.$refs.filterCard.removeRefreshAnimation();\n    },\n    updateSearchQuery: function updateSearchQuery(val) {\n      this.gridApi.setQuickFilter(val);\n    }\n  },\n  mounted: function mounted() {\n    this.getBoxList();\n    this.getBoxRarity();\n    this.gridApi = this.gridOptions.api;\n    /* =================================================================\r\n      NOTE:\r\n      Header is not aligned properly in RTL version of agGrid table.\r\n      However, we given fix to this issue. If you want more robust solution please contact them at gitHub\r\n    ================================================================= */\n\n    if (this.$vs.rtl) {\n      var header = this.$refs.agGridTable.$el.querySelector(\".ag-header-container\");\n      header.style.left = \"-\".concat(String(Number(header.style.transform.slice(11, -3)) + 9), \"px\");\n    }\n  },\n  created: function created() {\n    if (!moduleUserManagement.isRegistered) {\n      this.$store.registerModule(\"userManagement\", moduleUserManagement);\n      moduleUserManagement.isRegistered = true;\n    }\n\n    this.$store.dispatch(\"userManagement/fetchUsers\").catch(function (err) {\n      console.error(err);\n    });\n  }\n};",{"version":3,"mappings":";;;AAiHA;AACA;AACA,iC,CAEA;;AACA,mF,CAEA;;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;EACAA;IACAC,oBADA;IAEAC,gBAFA;IAGAC,gCAHA;IAKA;IACAC,kCANA;IAOAC,sCAPA;IAQAC,0CARA;IASAC,wCATA;IAUAC;EAVA,CADA;EAaAC,IAbA,kBAaA;IACA;MACAC,wBADA;MAEAC,eAFA;MAGA;MACAC;QAAAC;QAAAC;MAAA,CAJA;MAKAC,cACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MARA,CALA;MAgBAC,eAhBA;MAkBA;MACAC,aAnBA;MAoBAC,eApBA;MAqBAC;QACAC,cADA;QAEAC,gBAFA;QAGAC;MAHA,CArBA;MA0BAC,aACA;MACA;MACA;MACA;MACA;MACA;MACA;QACAC,gBADA;QAEAC,aAFA;QAGAC,YAHA;QAIAC,UAJA;QAKAC;MALA,CAPA,EAcA;MACA;MACA;MACA;MACA;MACA;MACA;QACAJ,gBADA;QAEAC,cAFA;QAGA;QACAE;MAJA,CApBA,EA0BA;QACAH,gBADA;QAEAC,oBAFA;QAGA;QACAE;MAJA,CA1BA,EAgCA;QACAH,kBADA;QAEAC,eAFA;QAGA;QACAE;MAJA,CAhCA,EAsCA;QACAH,iBADA;QAEAC,oBAFA;QAGA;QACAE;MAJA,CAtCA,EA4CA;QACAH,oBADA;QAEAC,0BAFA;QAGA;QACAE;MAJA,CA5CA,EAkDA;QACAH,oBADA;QAEAC,wBAFA;QAGA;QACAE;MAJA,CAlDA,EAwDA;QACAH,gBADA;QAEAC,aAFA;QAGA;QACAE;MAJA,CAxDA,EA8DA;QACAH,kBADA;QAEAC,oBAFA;QAGA;QACAE,UAJA,CAKA;;MALA,CA9DA,CAqEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAjFA,CA1BA;MA8GA;MACA3B;QACAI,kCADA;QAEAC,sCAFA;QAGAC,0CAHA;QAIAC;MAJA,CA/GA;MAqHAsB,WArHA;MAsHAC,aAtHA;MAuHAC,UAvHA;MAwHAC,QAxHA;MAyHAC,aAzHA;MA0HAC;IA1HA;EA4HA,CA1IA;EA2IAC;IACAvB,UADA,sBACAwB,GADA,EACA;MACA;IACA,CAHA;IAIAC,YAJA,wBAIAD,GAJA,EAIA;MACA;IACA,CANA;IAOAE,gBAPA,4BAOAF,GAPA,EAOA;MACA,UACAA,oEADA;MAEA;IACA,CAXA;IAYAG,gBAZA,4BAYAH,GAZA,EAYA;MACA;IACA,CAdA;IAeA;MACAI,OADA,mBACAC,GADA,EACA;QACA;;QACAC;MACA,CAJA;MAKAC;IALA,CAfA;IAsBA;MACAH,OADA,mBACAC,GADA,EACA;QACA;;QACAC;MACA,CAJA;MAKAC;IALA;EAtBA,CA3IA;EAyKAC;IACA;IACA;IACA;IACA;IACAC,kBALA,gCAKA;MACA,mEACA;IACA,CARA,CAUA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;EAlBA,CAzKA;EA6LAC;IACAC,UADA,wBACA;MACA;;MACA;QACAC,uBADA;QAEAC;MAFA;;MAIAP;QACAQ,yBADA;QAEAC,cAFA;QAGA1C;MAHA,GAIA2C,IAJA,CAIA;QACAC;;QACA;UACAC;YACAC;YACAA;UACA,CAHA;UAIAb;UACAA;UACAA;QACA,CARA,MAQA;UACAA;UACAA;QACA;MACA,CAlBA;IAmBA,CA1BA;IA4BA;IACAc,SA7BA,qBA6BAC,QA7BA,EA6BAR,QA7BA,EA6BA;MACA;QACA;MACA,CAFA,MAEA;QACA;UACA;QACA;;QACA;UACA;QACA;MACA;IACA,CAxCA;IA0CAS,YA1CA,0BA0CA;MACA;;MACAhB;QACAQ,2BADA;QAEAC,cAFA;QAGApB;MAHA,GAIAqB,IAJA,CAIA;QACAE;UACAC;UACAA;QACA,CAHA;QAIA;UACA1C,WADA;UAEAC;QAFA;QAIAwC;QACAZ;MACA,CAfA;IAgBA,CA5DA;IA8DAiB,UA9DA,wBA8DA;MACA;MACA;IACA,CAjEA;IAkEAC,iBAlEA,+BAkEA;MAAA;MACA;IACA,CApEA;IAqEAC,eArEA,2BAqEAC,MArEA,EAqEArB,GArEA,EAqEA;MACAY;;MACA;;MACAX;QACAqB;MADA;;MAGArB;IACA,CA5EA;IA6EAsB,eA7EA,6BA6EA;MACA;MACA;MACA,+BAHA,CAKA;;MACA;QACAnD,YADA;QAEAC;MAFA;MAKA;IACA,CAzFA;IA0FAmD,iBA1FA,6BA0FAxB,GA1FA,EA0FA;MACA;IACA;EA5FA,CA7LA;EA2RAyB,OA3RA,qBA2RA;IACA;IACA;IACA;IAEA;AACA;AACA;AACA;AACA;;IACA;MACA,sDACA,sBADA;MAGAC,sCACAC,gDADA;IAGA;EACA,CA7SA;EA8SAC,OA9SA,qBA8SA;IACA;MACA;MACAC;IACA;;IACA;MACAjB;IACA,CAFA;EAGA;AAtTA","names":["components","AgGridVue","vSelect","DataViewSidebar","CellRendererLink","CellRendererStatus","CellRendererVerified","CellRendererActions","CellRenderOpp","data","addNewDataSidebar","sidebarData","roleFilter","label","value","roleOptions","searchQuery","gridApi","gridOptions","defaultColDef","sortable","resizable","suppressMenu","columnDefs","headerName","field","filter","width","cellRendererFramework","boxList","boxRarity","params","total","totalPages","currentPage","watch","obj","statusFilter","isVerifiedFilter","departmentFilter","handler","val","_this","deep","computed","paginationPageSize","methods","getBoxList","page","pageSize","url","method","then","console","res","element","pageTotal","rowCount","getBoxRarity","addNewData","toggleDataSidebar","setColumnFilter","column","box_rarity_id","resetColFilters","updateSearchQuery","mounted","header","Number","created","moduleUserManagement"],"sourceRoot":"src/views/ui-elements/box/box-list","sources":["UserList.vue"],"sourcesContent":["<!-- =========================================================================================\r\n  File Name: UserList.vue\r\n  Description: User List page\r\n  ----------------------------------------------------------------------------------------\r\n  Item Name: Vuexy - Vuejs, HTML & Laravel Admin Dashboard Template\r\n  Author: Pixinvent\r\n  Author URL: http://www.themeforest.net/user/pixinvent\r\n========================================================================================== -->\r\n\r\n<template>\r\n  <div id=\"page-user-list\">\r\n    <data-view-sidebar\r\n      :isSidebarActive=\"addNewDataSidebar\"\r\n      @closeSidebar=\"toggleDataSidebar\"\r\n      @reload=\"getBoxList\"\r\n      :data=\"sidebarData\"\r\n    />\r\n\r\n    <vx-card\r\n      ref=\"filterCard\"\r\n      title=\"条件搜索\"\r\n      class=\"user-list-filters mb-8\"\r\n      actionButtons\r\n      @refresh=\"resetColFilters\"\r\n      @remove=\"resetColFilters\"\r\n    >\r\n      <div class=\"vx-row\">\r\n        <div class=\"vx-col md:w-1/4 sm:w-1/2 w-full\">\r\n          <label class=\"text-sm opacity-75\">箱子类型</label>\r\n          <v-select\r\n            :options=\"roleOptions\"\r\n            :clearable=\"false\"\r\n            :dir=\"$vs.rtl ? 'rtl' : 'ltr'\"\r\n            v-model=\"roleFilter\"\r\n            class=\"mb-4 md:mb-0\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </vx-card>\r\n\r\n    <div class=\"vx-card p-6\">\r\n      <div class=\"flex flex-wrap items-center\">\r\n        <!-- ITEMS PER PAGE -->\r\n        <div class=\"flex-grow\">\r\n          <vs-dropdown vs-trigger-click class=\"cursor-pointer\">\r\n            <div\r\n              class=\"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium\"\r\n            >\r\n              <span class=\"mr-2\"\r\n                >{{\r\n                  currentPage * paginationPageSize - (paginationPageSize - 1)\r\n                }}\r\n                -\r\n                {{ currentPage * paginationPageSize}}\r\n                of {{ total }}</span\r\n              >\r\n              <feather-icon icon=\"ChevronDownIcon\" svgClasses=\"h-4 w-4\" />\r\n            </div>\r\n            <!-- <vs-button class=\"btn-drop\" type=\"line\" color=\"primary\" icon-pack=\"feather\" icon=\"icon-chevron-down\"></vs-button> -->\r\n            <vs-dropdown-menu>\r\n              <vs-dropdown-item @click=\"gridApi.paginationSetPageSize(10)\">\r\n                <span>10</span>\r\n              </vs-dropdown-item>\r\n              <vs-dropdown-item @click=\"gridApi.paginationSetPageSize(20)\">\r\n                <span>20</span>\r\n              </vs-dropdown-item>\r\n              <vs-dropdown-item @click=\"gridApi.paginationSetPageSize(30)\">\r\n                <span>30</span>\r\n              </vs-dropdown-item>\r\n              <vs-dropdown-item @click=\"gridApi.paginationSetPageSize(50)\">\r\n                <span>50</span>\r\n              </vs-dropdown-item>\r\n            </vs-dropdown-menu>\r\n          </vs-dropdown>\r\n        </div>\r\n\r\n        <!-- TABLE ACTION COL-2: SEARCH & EXPORT AS CSV -->\r\n        <vs-input\r\n          class=\"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4\"\r\n          v-model=\"searchQuery\"\r\n          @input=\"updateSearchQuery\"\r\n          placeholder=\"搜索\"\r\n        />\r\n        <!-- <vs-button class=\"mb-4 md:mb-0\" @click=\"gridApi.exportDataAsCsv()\">Export as CSV</vs-button> -->\r\n        <vs-button @click=\"addNewData\">添加</vs-button>\r\n      </div>\r\n\r\n      <!-- AgGrid Table -->\r\n      <ag-grid-vue\r\n        ref=\"agGridTable\"\r\n        :components=\"components\"\r\n        :gridOptions=\"gridOptions\"\r\n        class=\"ag-theme-material w-100 my-4 ag-grid-table\"\r\n        :columnDefs=\"columnDefs\"\r\n        :defaultColDef=\"defaultColDef\"\r\n        :rowData=\"boxList\"\r\n        rowSelection=\"multiple\"\r\n        colResizeDefault=\"shift\"\r\n        :animateRows=\"true\"\r\n        :floatingFilter=\"false\"\r\n        :pagination=\"true\"\r\n        :paginationPageSize=\"paginationPageSize\"\r\n        :suppressPaginationPanel=\"true\"\r\n        :enableRtl=\"$vs.rtl\"\r\n      >\r\n      </ag-grid-vue>\r\n\r\n      <vs-pagination :total=\"totalPages\" :max=\"7\" v-model=\"currentPage\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { AgGridVue } from \"ag-grid-vue\";\r\nimport \"@/assets/scss/vuexy/extraComponents/agGridStyleOverride.scss\";\r\nimport vSelect from \"vue-select\";\r\n\r\n// Store Module\r\nimport moduleUserManagement from \"@/store/user-management/moduleUserManagement.js\";\r\n\r\n// Cell Renderer\r\nimport CellRendererLink from \"./cell-renderer/CellRendererLink.vue\";\r\nimport CellRendererStatus from \"./cell-renderer/CellRendererStatus.vue\";\r\nimport CellRendererVerified from \"./cell-renderer/CellRendererVerified.vue\";\r\nimport CellRendererActions from \"./cell-renderer/CellRendererActions.vue\";\r\nimport CellRenderOpp from \"./cell-renderer/CellRenderOpp.vue\";\r\n\r\nimport DataViewSidebar from \"../DataViewSidebar.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    AgGridVue,\r\n    vSelect,\r\n    DataViewSidebar,\r\n\r\n    // Cell Renderer\r\n    CellRendererLink,\r\n    CellRendererStatus,\r\n    CellRendererVerified,\r\n    CellRendererActions,\r\n    CellRenderOpp\r\n  },\r\n  data() {\r\n    return {\r\n      addNewDataSidebar: false,\r\n      sidebarData: {},\r\n      // Filter Options\r\n      roleFilter: { label: \"所有\", value: \"\" },\r\n      roleOptions: [\r\n        // { label: \"所有\", value: \"1\" },\r\n        // { label: \"限量\", value: \"2\" },\r\n        // { label: \"稀有\", value: \"3\" },\r\n        // { label: \"特殊\", value: \"4\" },\r\n        // { label: \"经典\", value: \"5\" },\r\n        // { label: \"YOUTUBE 武器箱\", value: \"6\" },\r\n        // { label: \"仅在 SKINCLUB\", value: \"3\" },\r\n        // { label: \"收藏\", value: \"3\" },\r\n      ],\r\n\r\n      searchQuery: \"\",\r\n\r\n      // AgGrid\r\n      gridApi: null,\r\n      gridOptions: {},\r\n      defaultColDef: {\r\n        sortable: true,\r\n        resizable: false,\r\n        suppressMenu: false,\r\n      },\r\n      columnDefs: [\r\n        // {\r\n        //   headerName: \"ID\",\r\n        //   field: \"id\",\r\n        //   width: 80,\r\n        //   filter: true,\r\n        // },\r\n        {\r\n          headerName: \"名称\",\r\n          field: \"name\",\r\n          filter: true,\r\n          width: 200,\r\n          cellRendererFramework: \"CellRendererLink\",\r\n        },\r\n        // {\r\n        //   headerName: \"图片\",\r\n        //   field: \"img\",\r\n        //   filter: true,\r\n        //   width: 125,\r\n        // },\r\n        {\r\n          headerName: \"价格\",\r\n          field: \"price\",\r\n          // filter: true,\r\n          width: 125,\r\n        },\r\n        {\r\n          headerName: \"类型\",\r\n          field: \"rarity_name\",\r\n          // filter: true,\r\n          width: 100,\r\n        },\r\n         {\r\n          headerName: \"是否对战\",\r\n          field: \"battle\",\r\n          // filter: true,\r\n          width: 130,\r\n        },\r\n        {\r\n          headerName: \"总库存\",\r\n          field: \"total_stock\",\r\n          // filter: true,\r\n          width: 120,\r\n        },\r\n        {\r\n          headerName: \"总库存(G)\",\r\n          field: \"total_stock_group\",\r\n          // filter: true,\r\n          width: 125,\r\n        },\r\n        {\r\n          headerName: \"总库存(V)\",\r\n          field: \"total_stock_vip\",\r\n          // filter: true,\r\n          width: 125,\r\n        },\r\n        {\r\n          headerName: \"状态\",\r\n          field: \"flag\",\r\n          // filter: true,\r\n          width: 100,\r\n        },\r\n        {\r\n          headerName: \"创建时间\",\r\n          field: \"create_time\",\r\n          // filter: true,\r\n          width: 200,\r\n          // cellRendererFramework: \"CellRendererStatus\",\r\n        },\r\n        // {\r\n        //   headerName: \"创建时间\",\r\n        //   field: \"\",\r\n        //   filter: true,\r\n        //   width: 125,\r\n        //   cellRendererFramework: \"CellRendererVerified\",\r\n        //   cellClass: \"text-center\",\r\n        // },\r\n        // {\r\n        //   headerName: \"操作\",\r\n        //   width: 100,\r\n        //   cellRendererFramework: \"CellRenderOpp\"\r\n        // },\r\n      ],\r\n\r\n      // Cell Renderer Components\r\n      components: {\r\n        CellRendererLink,\r\n        CellRendererStatus,\r\n        CellRendererVerified,\r\n        CellRendererActions,\r\n      },\r\n      boxList: [],\r\n      boxRarity: [],\r\n      params: {},\r\n      total:0,\r\n      totalPages:0,\r\n      currentPage:1\r\n    };\r\n  },\r\n  watch: {\r\n    roleFilter(obj) {\r\n      this.setColumnFilter(\"role\", obj.value);\r\n    },\r\n    statusFilter(obj) {\r\n      this.setColumnFilter(\"status\", obj.value);\r\n    },\r\n    isVerifiedFilter(obj) {\r\n      const val =\r\n        obj.value === \"all\" ? \"all\" : obj.value === \"yes\" ? \"true\" : \"false\";\r\n      this.setColumnFilter(\"is_verified\", val);\r\n    },\r\n    departmentFilter(obj) {\r\n      this.setColumnFilter(\"department\", obj.value);\r\n    },\r\n    \"currentPage\":{\r\n      handler(val){\r\n        let _this = this;\r\n        _this.getBoxList();\r\n      },\r\n      deep:true\r\n    },\r\n    \"paginationPageSize\":{\r\n      handler(val){\r\n        let _this = this;\r\n        _this.getBoxList();\r\n      },\r\n      deep:true\r\n    },\r\n  },\r\n  computed: {\r\n    // usersData() {\r\n    //   // console.log(JSON.stringify(this.$store.state.userManagement.users));\r\n    //   return this.$store.state.userManagement.users;\r\n    // },\r\n    paginationPageSize() {\r\n      if (this.gridApi) return this.gridApi.paginationGetPageSize();\r\n      else return 10;\r\n    },\r\n  \r\n    // currentPage: {\r\n    //   get() {\r\n    //     if (this.gridApi) return this.gridApi.paginationGetCurrentPage() + 1;\r\n    //     else return 1;\r\n    //   },\r\n    //   set(val) {\r\n    //     this.gridApi.paginationGoToPage(val - 1);\r\n    //   },\r\n    // },\r\n  },\r\n  methods: {\r\n    getBoxList() {\r\n      let _this = this;\r\n      let params = {\r\n        page:_this.currentPage,\r\n        pageSize:_this.paginationPageSize\r\n      }\r\n      _this.$axios({\r\n          url: \"/admin/Box/boxList\",\r\n          method: \"post\",\r\n          data: params,\r\n        }).then((res) => {\r\n          console.log(res);\r\n          if (res.data.status == 1) {\r\n            res.data.data.list.forEach((element) => {\r\n              element[\"flag\"] = element[\"flag\"] == 1 ? \"正常\" : \"禁用\";\r\n              element[\"battle\"] = element[\"battle\"] == 1 ? \"是\" : \"否\";\r\n            });\r\n            _this.boxList = res.data.data.list;\r\n            _this.total = res.data.data.total;\r\n            _this.totalPages = _this.pageTotal(_this.total,_this.paginationPageSize);\r\n          }else{\r\n            _this.boxList = []\r\n            _this.total = 0;\r\n          }\r\n        });\r\n    },\r\n\r\n      //\"总条数\"：rowCount，\"每页总条数\"：pageSize\r\n    pageTotal(rowCount, pageSize) {\r\n      if (rowCount == null || rowCount == \"\") {\r\n            return 0;\r\n      } else {\r\n            if (pageSize != 0 && rowCount % pageSize == 0) {\r\n                    return parseInt(rowCount / pageSize)\r\n            }\r\n            if (pageSize != 0 && rowCount % pageSize != 0) {\r\n                    return parseInt(rowCount / pageSize) + 1;\r\n            }\r\n        }\r\n    },\r\n\r\n    getBoxRarity() {\r\n      let _this = this;\r\n      _this.$axios({\r\n          url: \"/admin/Box/boxRarity\",\r\n          method: \"post\",\r\n          params: {},\r\n        }).then((res) => {\r\n          res.data.data.forEach((element) => {\r\n            element[\"value\"] = element[\"id\"];\r\n            element[\"label\"] = element[\"rarity_name\"];\r\n          });\r\n          let allArr = {\r\n            label:'所有',\r\n            value :''\r\n        }\r\n          res.data.data.unshift(allArr);\r\n          _this.roleOptions = res.data.data;\r\n        });\r\n    },\r\n   \r\n    addNewData() {\r\n      this.sidebarData = {};\r\n      this.toggleDataSidebar(true);\r\n    },\r\n    toggleDataSidebar(val = false) {\r\n      this.addNewDataSidebar = val;\r\n    },\r\n    setColumnFilter(column, val) {\r\n      console.log(column, val);\r\n      let _this = this;\r\n      _this.params = {\r\n        box_rarity_id: val,\r\n      };\r\n      _this.getBoxList();\r\n    },\r\n    resetColFilters() {\r\n      // Reset Grid Filter\r\n      this.gridApi.setFilterModel(null);\r\n      this.gridApi.onFilterChanged();\r\n\r\n      // Reset Filter Options\r\n      this.roleFilter = this.statusFilter = this.isVerifiedFilter = this.departmentFilter = {\r\n        label: \"All\",\r\n        value: \"all\",\r\n      };\r\n\r\n      this.$refs.filterCard.removeRefreshAnimation();\r\n    },\r\n    updateSearchQuery(val) {\r\n      this.gridApi.setQuickFilter(val);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getBoxList();\r\n    this.getBoxRarity();\r\n    this.gridApi = this.gridOptions.api;\r\n\r\n    /* =================================================================\r\n      NOTE:\r\n      Header is not aligned properly in RTL version of agGrid table.\r\n      However, we given fix to this issue. If you want more robust solution please contact them at gitHub\r\n    ================================================================= */\r\n    if (this.$vs.rtl) {\r\n      const header = this.$refs.agGridTable.$el.querySelector(\r\n        \".ag-header-container\"\r\n      );\r\n      header.style.left = `-${String(\r\n        Number(header.style.transform.slice(11, -3)) + 9\r\n      )}px`;\r\n    }\r\n  },\r\n  created() {\r\n    if (!moduleUserManagement.isRegistered) {\r\n      this.$store.registerModule(\"userManagement\", moduleUserManagement);\r\n      moduleUserManagement.isRegistered = true;\r\n    }\r\n    this.$store.dispatch(\"userManagement/fetchUsers\").catch((err) => {\r\n      console.error(err);\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n#page-user-list {\r\n  .user-list-filters {\r\n    .vs__actions {\r\n      position: absolute;\r\n      right: 0;\r\n      top: 50%;\r\n      transform: translateY(-58%);\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}