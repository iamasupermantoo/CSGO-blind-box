{"remainingRequest":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\babel-loader\\lib\\index.js!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\src\\views\\components\\vuesax\\sidebar\\Sidebar.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\src\\views\\components\\vuesax\\sidebar\\Sidebar.vue","mtime":1639029889000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\babel.config.js","mtime":1620826038000},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664268236462},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1664268237683},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\babel-loader\\lib\\index.js","mtime":1663908471338},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664268236462},{"path":"D:\\Program Files (x86)\\wechat\\WeChat Files\\wxid_ue0ca48wn2m522\\FileStorage\\File\\2022-09\\盲盒源码\\后台前端\\node_modules\\vue-loader\\lib\\index.js","mtime":1664268237964}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport { AgGridVue } from \"ag-grid-vue\";\nimport \"@/assets/scss/vuexy/extraComponents/agGridStyleOverride.scss\";\nimport vSelect from \"vue-select\";\nimport CellOperate from \"./cell/CellOperate.vue\";\nimport CellRendererLink from \"./cell/CellRendererLink.vue\"; // Store Module\n\nimport moduleUserManagement from \"@/store/user-management/moduleUserManagement.js\";\nexport default {\n  components: {\n    AgGridVue: AgGridVue,\n    vSelect: vSelect,\n    CellOperate: CellOperate,\n    CellRendererLink: CellRendererLink\n  },\n  data: function data() {\n    return {\n      //表数据\n      list: [],\n      // Filter Options\n      roleFilter: {\n        label: \"所有\",\n        value: \"1\"\n      },\n      roleOptions: [{\n        label: \"所有\",\n        value: \"1\"\n      }, {\n        label: \"成功\",\n        value: \"2\"\n      }, {\n        label: \"失败\",\n        value: \"3\"\n      }],\n      //开始时间\n      startTime: \"0000-00-00 00:00:00\",\n      endTime: this.dateFormat('y-m-d h:i:s', new Date()),\n      currentPage: 1,\n      pageSize: 10,\n      totalPages: 0,\n      total: 0,\n      status: '',\n      searchQuery: \"\",\n      // AgGrid\n      gridApi: null,\n      gridOptions: {},\n      defaultColDef: {\n        sortable: true,\n        resizable: true,\n        suppressMenu: true\n      },\n      columnDefs: [{\n        headerName: \"ID\",\n        field: \"id\",\n        width: 125,\n        filter: true\n      }, {\n        headerName: \"玩家\",\n        field: \"uname\",\n        filter: true,\n        width: 210,\n        cellRendererFramework: 'CellRendererLink'\n      }, {\n        headerName: \"名称\",\n        field: \"name\",\n        filter: true,\n        width: 300\n      }, {\n        headerName: \"价格\",\n        field: \"price\",\n        filter: true,\n        width: 150\n      }, {\n        headerName: \"状态\",\n        field: \"statusStr\",\n        filter: true,\n        width: 150\n      }, {\n        headerName: \"获取方式\",\n        field: \"wayStr\",\n        filter: true,\n        width: 150\n      }, {\n        headerName: \"系统订单号\",\n        field: \"orderId\",\n        filter: true,\n        width: 150\n      }, {\n        headerName: \"第三方id\",\n        field: \"open_number_md\",\n        filter: true,\n        width: 150\n      }, {\n        headerName: '操作',\n        field: 'transactions',\n        width: 150,\n        cellRendererFramework: 'CellOperate'\n      }],\n      components: {\n        CellOperate: CellOperate\n      }\n    };\n  },\n  watch: {\n    roleFilter: function roleFilter(obj) {\n      this.setColumnFilter(\"role\", obj.value);\n    },\n    statusFilter: function statusFilter(obj) {\n      this.setColumnFilter(\"status\", obj.value);\n    },\n    isVerifiedFilter: function isVerifiedFilter(obj) {\n      var val = obj.value === \"all\" ? \"all\" : obj.value === \"yes\" ? \"true\" : \"false\";\n      this.setColumnFilter(\"is_verified\", val);\n    },\n    departmentFilter: function departmentFilter(obj) {\n      this.setColumnFilter(\"department\", obj.value);\n    },\n    currentPage: function currentPage() {\n      this.getList();\n    },\n    pageSize: function pageSize() {\n      this.getList();\n    }\n  },\n  computed: {\n    usersData: function usersData() {\n      //console.log(JSON.stringify(this.$store.state.userManagement.users) );\n      return this.$store.state.userManagement.users;\n    },\n    paginationPageSize: function paginationPageSize() {\n      if (this.gridApi) return this.gridApi.paginationGetPageSize();else return 10;\n    },\n    totalPages: function totalPages() {\n      if (this.gridApi) return this.gridApi.paginationGetTotalPages();else return 0;\n    },\n    currentPage: {\n      get: function get() {\n        if (this.gridApi) return this.gridApi.paginationGetCurrentPage() + 1;else return 1;\n      },\n      set: function set(val) {\n        this.gridApi.paginationGoToPage(val - 1);\n      }\n    }\n  },\n  methods: {\n    getList: function getList() {\n      var _this = this;\n\n      _this.$axios({\n        url: '/admin/Record/skinToSteam',\n        method: \"post\",\n        data: {\n          page: _this.currentPage,\n          pageSize: _this.pageSize,\n          status: _this.status,\n          searchKey: _this.searchQuery,\n          startTime: _this.startTime,\n          endTime: _this.endTime\n        }\n      }).then(function (res) {\n        if (res.data.status == 1) {\n          _this.list = res.data.data.list;\n          _this.total = res.data.data.total;\n          _this.totalPages = _this.pageTotal(_this.total, _this.pageSize);\n        } else {\n          _this.list = [];\n          _this.total = 0;\n          _this.totalPages = 1;\n        }\n      });\n    },\n    //\"总条数\"：rowCount，\"每页总条数\"：pageSize\n    pageTotal: function pageTotal(rowCount, pageSize) {\n      if (rowCount == null || rowCount == \"\") {\n        return 0;\n      } else {\n        if (pageSize != 0 && rowCount % pageSize == 0) {\n          return parseInt(rowCount / pageSize);\n        }\n\n        if (pageSize != 0 && rowCount % pageSize != 0) {\n          return parseInt(rowCount / pageSize) + 1;\n        }\n      }\n    },\n    search: function search() {\n      this.currentPage = 1;\n      this.getList();\n    },\n    clear: function clear() {\n      if (this.startTime != '' || this.endTime != '') {\n        this.startTime = '0000-00-00 00:00:00';\n        this.endTime = this.dateFormat('y-m-d h:i:s', new Date());\n        this.searchQuery = '';\n        this.roleFilter = {\n          label: '所有',\n          value: ''\n        };\n        this.getList();\n      }\n    },\n    //获取当天时间\n    geiTime: function geiTime() {\n      //今天的时间\n      var day2 = new Date();\n      day2.setTime(day2.getTime());\n      var s2 = day2.getFullYear() + \"-\" + (day2.getMonth() + 1) + \"-\" + day2.getDate(); //明天的时间\n\n      var day3 = new Date();\n      day3.setTime(day3.getTime() + 24 * 60 * 60 * 1000);\n      var s3 = day3.getFullYear() + \"-\" + (day3.getMonth() + 1) + \"-\" + day3.getDate();\n      this.input1 = s2;\n      this.input2 = s3;\n    },\n    setColumnFilter: function setColumnFilter(column, val) {\n      var filter = this.gridApi.getFilterInstance(column);\n      var modelObj = null;\n\n      if (val !== \"all\") {\n        modelObj = {\n          type: \"equals\",\n          filter: val\n        };\n      }\n\n      filter.setModel(modelObj);\n      this.gridApi.onFilterChanged();\n    },\n    resetColFilters: function resetColFilters() {\n      // Reset Grid Filter\n      this.gridApi.setFilterModel(null);\n      this.gridApi.onFilterChanged(); // Reset Filter Options\n\n      this.roleFilter = this.statusFilter = this.isVerifiedFilter = this.departmentFilter = {\n        label: \"All\",\n        value: \"all\"\n      };\n      this.$refs.filterCard.removeRefreshAnimation();\n    },\n    updateSearchQuery: function updateSearchQuery(val) {\n      this.gridApi.setQuickFilter(val);\n    },\n    dateFormat: function dateFormat(formatStr, fdate) {\n      var fTime,\n          fStr = 'ymdhis';\n      if (!formatStr) formatStr = \"y-m-d h:i:s\";\n      if (fdate) fTime = new Date(fdate);else fTime = new Date();\n      var formatArr = [fTime.getFullYear().toString(), (fTime.getMonth() + 1).toString(), fTime.getDate().toString(), fTime.getHours().toString(), fTime.getMinutes().toString(), fTime.getSeconds().toString()];\n\n      for (var i = 0; i < formatArr.length; i++) {\n        formatStr = formatStr.replace(fStr.charAt(i), formatArr[i]);\n      }\n\n      return formatStr;\n    }\n  },\n  mounted: function mounted() {\n    this.getList();\n  },\n  created: function created() {\n    if (!moduleUserManagement.isRegistered) {\n      this.$store.registerModule(\"userManagement\", moduleUserManagement);\n      moduleUserManagement.isRegistered = true;\n    }\n\n    this.$store.dispatch(\"userManagement/fetchUsers\").catch(function (err) {\n      console.error(err);\n    });\n  }\n};",{"version":3,"mappings":";;;AA4IA;AACA;AACA;AACA;AACA,2D,CACA;;AACA;AAEA;EACAA;IACAC,oBADA;IAEAC,gBAFA;IAGAC,wBAHA;IAIAC;EAJA,CADA;EAOAC,IAPA,kBAOA;IACA;MACA;MACAC,QAFA;MAIA;MACAC;QAAAC;QAAAC;MAAA,CALA;MAMAC,cACA;QAAAF;QAAAC;MAAA,CADA,EAEA;QAAAD;QAAAC;MAAA,CAFA,EAGA;QAAAD;QAAAC;MAAA,CAHA,CANA;MAWA;MACAE,gCAZA;MAaAC,mDAbA;MAcAC,cAdA;MAeAC,YAfA;MAgBAC,aAhBA;MAiBAC,QAjBA;MAkBAC,UAlBA;MAoBAC,eApBA;MAsBA;MACAC,aAvBA;MAwBAC,eAxBA;MAyBAC;QACAC,cADA;QAEAC,eAFA;QAGAC;MAHA,CAzBA;MA8BAC,aACA;QACAC,gBADA;QAEAC,WAFA;QAGAC,UAHA;QAIAC;MAJA,CADA,EAOA;QACAH,gBADA;QAEAC,cAFA;QAGAE,YAHA;QAIAD,UAJA;QAKAE;MALA,CAPA,EAcA;QACAJ,gBADA;QAEAC,aAFA;QAGAE,YAHA;QAIAD;MAJA,CAdA,EAoBA;QACAF,gBADA;QAEAC,cAFA;QAGAE,YAHA;QAIAD;MAJA,CApBA,EA0BA;QACAF,gBADA;QAEAC,kBAFA;QAGAE,YAHA;QAIAD;MAJA,CA1BA,EAgCA;QACAF,kBADA;QAEAC,eAFA;QAGAE,YAHA;QAIAD;MAJA,CAhCA,EAsCA;QACAF,mBADA;QAEAC,gBAFA;QAGAE,YAHA;QAIAD;MAJA,CAtCA,EA4CA;QACAF,mBADA;QAEAC,uBAFA;QAGAE,YAHA;QAIAD;MAJA,CA5CA,EAkDA;QACAF,gBADA;QAEAC,qBAFA;QAGAC,UAHA;QAIAE;MAJA,CAlDA,CA9BA;MAwFA9B;QACAG;MADA;IAxFA;EA4FA,CApGA;EAqGA4B;IACAxB,UADA,sBACAyB,GADA,EACA;MACA;IACA,CAHA;IAIAC,YAJA,wBAIAD,GAJA,EAIA;MACA;IACA,CANA;IAOAE,gBAPA,4BAOAF,GAPA,EAOA;MACA,UACAA,oEADA;MAEA;IACA,CAXA;IAYAG,gBAZA,4BAYAH,GAZA,EAYA;MACA;IACA,CAdA;IAeAnB,WAfA,yBAeA;MACA;IACA,CAjBA;IAkBAC,QAlBA,sBAkBA;MACA;IACA;EApBA,CArGA;EA2HAsB;IACAC,SADA,uBACA;MACA;MACA;IACA,CAJA;IAKAC,kBALA,gCAKA;MACA,mEACA;IACA,CARA;IASAvB,UATA,wBASA;MACA,qEACA;IACA,CAZA;IAaAF;MACA0B,GADA,iBACA;QACA,0EACA;MACA,CAJA;MAKAC,GALA,eAKAC,GALA,EAKA;QACA;MACA;IAPA;EAbA,CA3HA;EAkJAC;IACAC,OADA,qBACA;MACA;;MACAC;QACAC,gCADA;QAEAC,cAFA;QAGAzC;UACA0C,uBADA;UAEAjC,wBAFA;UAGAG,oBAHA;UAIA+B,4BAJA;UAKArC,0BALA;UAMAC;QANA;MAHA,GAWAqC,IAXA,CAWA;QACA;UACAL;UACAA;UACAA;QACA,CAJA,MAIA;UACAA;UACAA;UACAA;QACA;MACA,CArBA;IAsBA,CAzBA;IA0BA;IACAM,SA3BA,qBA2BAC,QA3BA,EA2BArC,QA3BA,EA2BA;MACA;QACA;MACA,CAFA,MAEA;QACA;UACA;QACA;;QACA;UACA;QACA;MACA;IACA,CAtCA;IAuCAsC,MAvCA,oBAuCA;MACA;MACA;IACA,CA1CA;IA2CAC,KA3CA,mBA2CA;MACA;QACA;QACA;QACA;QACA;UAAA7C;UAAAC;QAAA;QACA;MACA;IACA,CAnDA;IAoDA;IACA6C,OArDA,qBAqDA;MACA;MACA;MACAC;MACA,SACAA,uEADA,CAJA,CAMA;;MACA;MACAC;MACA,SACAA,uEADA;MAEA;MACA;IACA,CAlEA;IAmEAC,eAnEA,2BAmEAC,MAnEA,EAmEAjB,GAnEA,EAmEA;MACA;MACA;;MAEA;QACAkB;UAAAC;UAAA/B;QAAA;MACA;;MAEAA;MACA;IACA,CA7EA;IA8EAgC,eA9EA,6BA8EA;MACA;MACA;MACA,+BAHA,CAKA;;MACA;QACArD,YADA;QAEAC;MAFA;MAKA;IACA,CA1FA;IA2FAqD,iBA3FA,6BA2FArB,GA3FA,EA2FA;MACA;IACA,CA7FA;IA8FAsB,UA9FA,sBA8FAC,SA9FA,EA8FAC,KA9FA,EA8FA;MACA;MAAA;MACA,gBACAD;MACA,WACAE,wBADA,KAGAA;MACA,iBACAA,8BADA,EAEA,iCAFA,EAGAA,0BAHA,EAIAA,2BAJA,EAKAA,6BALA,EAMAA,6BANA;;MAQA;QACAF;MACA;;MACA;IACA;EAlHA,CAlJA;EAsQAG,OAtQA,qBAsQA;IACA;EACA,CAxQA;EAyQAC,OAzQA,qBAyQA;IACA;MACA;MACAC;IACA;;IACA;MACAC;IACA,CAFA;EAGA;AAjRA","names":["components","AgGridVue","vSelect","CellOperate","CellRendererLink","data","list","roleFilter","label","value","roleOptions","startTime","endTime","currentPage","pageSize","totalPages","total","status","searchQuery","gridApi","gridOptions","defaultColDef","sortable","resizable","suppressMenu","columnDefs","headerName","field","width","filter","cellRendererFramework","watch","obj","statusFilter","isVerifiedFilter","departmentFilter","computed","usersData","paginationPageSize","get","set","val","methods","getList","_this","url","method","page","searchKey","then","pageTotal","rowCount","search","clear","geiTime","day2","day3","setColumnFilter","column","modelObj","type","resetColFilters","updateSearchQuery","dateFormat","formatStr","fdate","fTime","mounted","created","moduleUserManagement","console"],"sourceRoot":"src/views/components/vuesax/sidebar","sources":["Sidebar.vue"],"sourcesContent":["<!-- =========================================================================================\r\n  File Name: UserList.vue\r\n  Description: User List page\r\n  ----------------------------------------------------------------------------------------\r\n  Item Name: Vuexy - Vuejs, HTML & Laravel Admin Dashboard Template\r\n  Author: Pixinvent\r\n  Author URL: http://www.themeforest.net/user/pixinvent\r\n========================================================================================== -->\r\n\r\n<template>\r\n  <div id=\"page-user-list\">\r\n    <vx-card\r\n      ref=\"filterCard\"\r\n      title=\"条件搜索\"\r\n      class=\"user-list-filters mb-8\"\r\n      actionButtons\r\n      @refresh=\"resetColFilters\"\r\n      @remove=\"resetColFilters\"\r\n    >\r\n      <div class=\"vx-row\">\r\n        <div class=\"vx-col md:w-1/4 sm:w-1/2 w-full\">\r\n          <vs-input\r\n            label=\"关键字搜索\"\r\n            class=\"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4\"\r\n            v-model=\"searchQuery\"\r\n            placeholder=\"关键字\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"vx-col md:w-1/4 sm:w-1/2 w-full\">\r\n          <label class=\"text-sm opacity-75\">状态</label>\r\n          <v-select\r\n            :options=\"roleOptions\"\r\n            :clearable=\"false\"\r\n            :dir=\"$vs.rtl ? 'rtl' : 'ltr'\"\r\n            v-model=\"roleFilter\"\r\n            class=\"mb-4 md:mb-0\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"vx-col md:w-1/4 sm:w-1/2 w-full\">\r\n          <vs-input\r\n            label=\"开始时间\"\r\n            v-model=\"startTime\"\r\n            class=\"w-full\"\r\n            type=\"date\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"vx-col md:w-1/4 sm:w-1/2 w-full\">\r\n          <vs-input\r\n            label=\"结束时间\"\r\n            v-model=\"endTime\"\r\n            class=\"w-full\"\r\n            type=\"date\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"vx-col md:w-1/4 sm:w-1/2 w-full\">\r\n          <vs-button class=\"search\" @click=\"search\">搜索</vs-button>\r\n          <vs-button class=\"search\" @click=\"clear\">清空</vs-button>\r\n        </div>\r\n      </div>\r\n    </vx-card>\r\n\r\n    <div class=\"vx-card p-6\">\r\n      <div class=\"flex flex-wrap items-center\">\r\n        <!-- ITEMS PER PAGE -->\r\n        <div class=\"flex-grow\">\r\n          <vs-dropdown vs-trigger-click class=\"cursor-pointer\">\r\n            <div\r\n              class=\"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium\"\r\n            >\r\n              <span class=\"mr-2\"\r\n                >{{\r\n                  currentPage * paginationPageSize - (paginationPageSize - 1)\r\n                }}\r\n                -\r\n                {{\r\n                  list.length - currentPage * paginationPageSize > 0\r\n                    ? currentPage * paginationPageSize\r\n                    : list.length\r\n                }}\r\n                of {{ list.length }}</span\r\n              >\r\n              <feather-icon icon=\"ChevronDownIcon\" svgClasses=\"h-4 w-4\" />\r\n            </div>\r\n            <!-- <vs-button class=\"btn-drop\" type=\"line\" color=\"primary\" icon-pack=\"feather\" icon=\"icon-chevron-down\"></vs-button> -->\r\n            <vs-dropdown-menu>\r\n              <vs-dropdown-item @click=\"gridApi.paginationSetPageSize(10)\">\r\n                <span>10</span>\r\n              </vs-dropdown-item>\r\n              <vs-dropdown-item @click=\"gridApi.paginationSetPageSize(20)\">\r\n                <span>20</span>\r\n              </vs-dropdown-item>\r\n              <vs-dropdown-item @click=\"gridApi.paginationSetPageSize(25)\">\r\n                <span>25</span>\r\n              </vs-dropdown-item>\r\n              <vs-dropdown-item @click=\"gridApi.paginationSetPageSize(30)\">\r\n                <span>30</span>\r\n              </vs-dropdown-item>\r\n            </vs-dropdown-menu>\r\n          </vs-dropdown>\r\n        </div>\r\n\r\n        <!-- TABLE ACTION COL-2: SEARCH & EXPORT AS CSV -->\r\n        <vs-input\r\n          class=\"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4\"\r\n          v-model=\"searchQuery\"\r\n          @input=\"updateSearchQuery\"\r\n          placeholder=\"搜索\"\r\n        />\r\n        <!-- <vs-button class=\"mb-4 md:mb-0\" @click=\"gridApi.exportDataAsCsv()\">Export as CSV</vs-button> -->\r\n\r\n        <!-- ACTION - DROPDOWN -->\r\n      </div>\r\n\r\n      <!-- AgGrid Table -->\r\n      <ag-grid-vue\r\n        ref=\"agGridTable\"\r\n        :gridOptions=\"gridOptions\"\r\n        class=\"ag-theme-material w-100 my-4 ag-grid-table\"\r\n        :columnDefs=\"columnDefs\"\r\n        :defaultColDef=\"defaultColDef\"\r\n        :rowData=\"list\"\r\n        rowSelection=\"multiple\"\r\n        colResizeDefault=\"shift\"\r\n        :pagination=\"true\"\r\n        :paginationPageSize=\"paginationPageSize\"\r\n        :suppressPaginationPanel=\"true\"\r\n        :enableRtl=\"$vs.rtl\"\r\n      >\r\n      </ag-grid-vue>\r\n\r\n      <vs-pagination :total=\"totalPages\" :max=\"7\" v-model=\"currentPage\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { AgGridVue } from \"ag-grid-vue\";\r\nimport \"@/assets/scss/vuexy/extraComponents/agGridStyleOverride.scss\";\r\nimport vSelect from \"vue-select\";\r\nimport CellOperate from './cell/CellOperate.vue'\r\nimport CellRendererLink from './cell/CellRendererLink.vue'\r\n// Store Module\r\nimport moduleUserManagement from \"@/store/user-management/moduleUserManagement.js\";\r\n\r\nexport default {\r\n  components: {\r\n    AgGridVue,\r\n    vSelect,\r\n    CellOperate,\r\n    CellRendererLink\r\n  },\r\n  data() {\r\n    return {\r\n      //表数据\r\n      list: [],\r\n\r\n      // Filter Options\r\n      roleFilter: { label: \"所有\", value: \"1\" },\r\n      roleOptions: [\r\n        { label: \"所有\", value: \"1\" },\r\n        { label: \"成功\", value: \"2\" },\r\n        { label: \"失败\", value: \"3\" }\r\n      ],\r\n      //开始时间\r\n      startTime: \"0000-00-00 00:00:00\",\r\n      endTime : this.dateFormat('y-m-d h:i:s' , new Date()) ,\r\n      currentPage : 1 ,\r\n      pageSize : 10 ,\r\n      totalPages : 0 ,\r\n      total : 0 ,\r\n      status : '' ,\r\n\r\n      searchQuery: \"\",\r\n\r\n      // AgGrid\r\n      gridApi: null,\r\n      gridOptions: {},\r\n      defaultColDef: {\r\n        sortable: true,\r\n        resizable: true,\r\n        suppressMenu: true,\r\n      },\r\n      columnDefs: [\r\n        {\r\n          headerName: \"ID\",\r\n          field: \"id\",\r\n          width: 125,\r\n          filter: true,\r\n        },\r\n        {\r\n          headerName: \"玩家\",\r\n          field: \"uname\",\r\n          filter: true,\r\n          width: 210,\r\n          cellRendererFramework: 'CellRendererLink'\r\n        },\r\n        {\r\n          headerName: \"名称\",\r\n          field: \"name\",\r\n          filter: true,\r\n          width: 300,\r\n        },\r\n        {\r\n          headerName: \"价格\",\r\n          field: \"price\",\r\n          filter: true,\r\n          width: 150,\r\n        },\r\n        {\r\n          headerName: \"状态\",\r\n          field: \"statusStr\",\r\n          filter: true,\r\n          width: 150,\r\n        },\r\n        {\r\n          headerName: \"获取方式\",\r\n          field: \"wayStr\",\r\n          filter: true,\r\n          width: 150,\r\n        },\r\n        {\r\n          headerName: \"系统订单号\",\r\n          field: \"orderId\",\r\n          filter: true,\r\n          width: 150,\r\n        },\r\n        {\r\n          headerName: \"第三方id\",\r\n          field: \"open_number_md\",\r\n          filter: true,\r\n          width: 150,\r\n        },\r\n        {\r\n          headerName: '操作',\r\n          field: 'transactions',\r\n          width: 150,\r\n          cellRendererFramework: 'CellOperate'\r\n        }\r\n      ],\r\n\r\n      components: {\r\n        CellOperate\r\n      },\r\n    };\r\n  },\r\n  watch: {\r\n    roleFilter(obj) {\r\n      this.setColumnFilter(\"role\", obj.value);\r\n    },\r\n    statusFilter(obj) {\r\n      this.setColumnFilter(\"status\", obj.value);\r\n    },\r\n    isVerifiedFilter(obj) {\r\n      const val =\r\n        obj.value === \"all\" ? \"all\" : obj.value === \"yes\" ? \"true\" : \"false\";\r\n      this.setColumnFilter(\"is_verified\", val);\r\n    },\r\n    departmentFilter(obj) {\r\n      this.setColumnFilter(\"department\", obj.value);\r\n    },\r\n    currentPage(){\r\n      this.getList();\r\n    },\r\n    pageSize(){\r\n      this.getList();\r\n    }\r\n  },\r\n  computed: {\r\n    usersData() {\r\n      //console.log(JSON.stringify(this.$store.state.userManagement.users) );\r\n      return this.$store.state.userManagement.users;\r\n    },\r\n    paginationPageSize() {\r\n      if (this.gridApi) return this.gridApi.paginationGetPageSize();\r\n      else return 10;\r\n    },\r\n    totalPages() {\r\n      if (this.gridApi) return this.gridApi.paginationGetTotalPages();\r\n      else return 0;\r\n    },\r\n    currentPage: {\r\n      get() {\r\n        if (this.gridApi) return this.gridApi.paginationGetCurrentPage() + 1;\r\n        else return 1;\r\n      },\r\n      set(val) {\r\n        this.gridApi.paginationGoToPage(val - 1);\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    getList(){\r\n      let _this = this;\r\n      _this.$axios({\r\n        url:'/admin/Record/skinToSteam',\r\n        method: \"post\",\r\n        data:{\r\n          page:_this.currentPage,\r\n          pageSize:_this.pageSize,\r\n          status:_this.status,\r\n          searchKey:_this.searchQuery,\r\n          startTime:_this.startTime,\r\n          endTime:_this.endTime\r\n        },\r\n      }).then((res)=>{\r\n        if(res.data.status == 1){\r\n          _this.list = res.data.data.list;\r\n          _this.total = res.data.data.total;\r\n          _this.totalPages = _this.pageTotal(_this.total,_this.pageSize)\r\n        }else{\r\n          _this.list = [];\r\n          _this.total = 0;\r\n          _this.totalPages = 1;\r\n        }\r\n      })\r\n    },\r\n    //\"总条数\"：rowCount，\"每页总条数\"：pageSize\r\n    pageTotal(rowCount, pageSize) {\r\n      if (rowCount == null || rowCount == \"\") {\r\n        return 0;\r\n      } else {\r\n        if (pageSize != 0 && rowCount % pageSize == 0) {\r\n          return parseInt(rowCount / pageSize)\r\n        }\r\n        if (pageSize != 0 && rowCount % pageSize != 0) {\r\n          return parseInt(rowCount / pageSize) + 1;\r\n        }\r\n      }\r\n    },\r\n    search(){\r\n      this.currentPage = 1;\r\n      this.getList()\r\n    },\r\n    clear(){\r\n      if((this.startTime != '') || (this.endTime != '')){\r\n        this.startTime = '0000-00-00 00:00:00';\r\n        this.endTime   = this.dateFormat('y-m-d h:i:s',new Date());\r\n        this.searchQuery = '';\r\n        this.roleFilter = { label: '所有', value: '' };\r\n        this.getList()\r\n      }\r\n    },\r\n    //获取当天时间\r\n    geiTime() {\r\n      //今天的时间\r\n      var day2 = new Date();\r\n      day2.setTime(day2.getTime());\r\n      var s2 =\r\n        day2.getFullYear() + \"-\" + (day2.getMonth() + 1) + \"-\" + day2.getDate();\r\n      //明天的时间\r\n      var day3 = new Date();\r\n      day3.setTime(day3.getTime() + 24 * 60 * 60 * 1000);\r\n      var s3 =\r\n        day3.getFullYear() + \"-\" + (day3.getMonth() + 1) + \"-\" + day3.getDate();\r\n      this.input1 = s2;\r\n      this.input2 = s3;\r\n    },\r\n    setColumnFilter(column, val) {\r\n      const filter = this.gridApi.getFilterInstance(column);\r\n      let modelObj = null;\r\n\r\n      if (val !== \"all\") {\r\n        modelObj = { type: \"equals\", filter: val };\r\n      }\r\n\r\n      filter.setModel(modelObj);\r\n      this.gridApi.onFilterChanged();\r\n    },\r\n    resetColFilters() {\r\n      // Reset Grid Filter\r\n      this.gridApi.setFilterModel(null);\r\n      this.gridApi.onFilterChanged();\r\n\r\n      // Reset Filter Options\r\n      this.roleFilter = this.statusFilter = this.isVerifiedFilter = this.departmentFilter = {\r\n        label: \"All\",\r\n        value: \"all\",\r\n      };\r\n\r\n      this.$refs.filterCard.removeRefreshAnimation();\r\n    },\r\n    updateSearchQuery(val) {\r\n      this.gridApi.setQuickFilter(val);\r\n    },\r\n    dateFormat(formatStr, fdate){\r\n      var fTime, fStr = 'ymdhis';\r\n      if (!formatStr)\r\n        formatStr = \"y-m-d h:i:s\";\r\n      if (fdate)\r\n        fTime = new Date(fdate);\r\n      else\r\n        fTime = new Date();\r\n      var formatArr = [\r\n        fTime.getFullYear().toString(),\r\n        (fTime.getMonth()+1).toString(),\r\n        fTime.getDate().toString(),\r\n        fTime.getHours().toString(),\r\n        fTime.getMinutes().toString(),\r\n        fTime.getSeconds().toString()\r\n      ];\r\n      for (var i=0; i<formatArr.length; i++){\r\n        formatStr = formatStr.replace(fStr.charAt(i), formatArr[i]);\r\n      }\r\n      return formatStr;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getList();\r\n  },\r\n  created() {\r\n    if (!moduleUserManagement.isRegistered) {\r\n      this.$store.registerModule(\"userManagement\", moduleUserManagement);\r\n      moduleUserManagement.isRegistered = true;\r\n    }\r\n    this.$store.dispatch(\"userManagement/fetchUsers\").catch((err) => {\r\n      console.error(err);\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\r\n  #page-user-list {\r\n    .user-list-filters {\r\n      .vs__actions {\r\n        position: absolute;\r\n        right: 0;\r\n        top: 50%;\r\n        transform: translateY(-58%);\r\n      }\r\n    }\r\n  }\r\n  .search{\r\n    height: 36px;\r\n    width: 60px;\r\n    margin-top: 20px;\r\n    padding: 0!important;\r\n  }\r\n  .search:nth-child(2){\r\n    margin-left: 5px;\r\n  }\r\n\r\n</style>\r\n"]}]}