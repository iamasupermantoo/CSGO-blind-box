{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\src\\views\\ui-elements\\box\\AddSkinSider.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\src\\views\\ui-elements\\box\\AddSkinSider.vue","mtime":1621861322000},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664268236462},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\babel-loader\\lib\\index.js","mtime":1663908471338},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664268236462},{"path":"C:\\Users\\Administrator\\Desktop\\验收文件0516\\后台前端\\node_modules\\vue-loader\\lib\\index.js","mtime":1664268237964}],"contextDependencies":[],"result":["\r\n// import { AgGridVue } from \"ag-grid-vue\";\r\nimport \"@/assets/scss/vuexy/extraComponents/agGridStyleOverride.scss\";\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\n\r\nexport default {\r\n  name:'DataSiderSkin',\r\n  components: {\r\n    // AgGridVue\r\n  },\r\n  props: {\r\n    addSkinActive: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    data: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  components: {\r\n    VuePerfectScrollbar,\r\n  },\r\n  data() {\r\n    return {\r\n      dataBoxId: null,\r\n\r\n      settings: {\r\n        // perfectscrollbar settings\r\n        maxScrollbarLength: 60,\r\n        wheelSpeed: 0.6,\r\n      },\r\n      file:'',\r\n      skinTypeList:[],\r\n\r\n      selected: [],\r\n      isMounted: false,\r\n      addNewDataSidebar: false,\r\n      sidebarData: {},\r\n      products:[],\r\n      total:0,\r\n      currentPage:1,\r\n      pageSize: 10,\r\n      totalPages:0,\r\n      gridApi: null,\r\n      searchKey:''\r\n    };\r\n  },\r\n  watch: {\r\n    addSkinActive(val) {\r\n      if (!val) return;\r\n      if (Object.entries(this.data).length === 0) {\r\n        console.log(this.data);\r\n        this.getSkinList();\r\n      } else {\r\n        this.getSkinList();\r\n        this.dataBoxId = this.data.box_id;\r\n      }\r\n      this.skinTypeList = this.$parent.skinTypeList;\r\n    },\r\n    \"currentPage\":{\r\n      handler(val){\r\n        let _this = this;\r\n        _this.currentPage = val;\r\n        _this.getSkinList();\r\n      },\r\n      deep:true\r\n    },\r\n    'pageSize':{\r\n      handler(val){\r\n        let _this = this;\r\n        _this.pageSize = val;\r\n        _this.getSkinList();\r\n      },\r\n      deep:true\r\n    },\r\n  },\r\n  computed: {\r\n    addSkinActiveLocal: {\r\n      get() {\r\n        return this.addSkinActive;\r\n      },\r\n      set(val) {\r\n        if (!val) {\r\n          this.$emit(\"closeSidebar\");\r\n        }\r\n      },\r\n    },\r\n    isFormValid() {\r\n      return (\r\n        !this.errors.any() &&\r\n        this.dataName &&\r\n        this.dataCategory &&\r\n        this.dataPrice > 0\r\n      );\r\n    },\r\n    scrollbarTag() {\r\n      return this.$store.getters.scrollbarTag;\r\n    },\r\n  },\r\n  methods: {\r\n    btn(){\r\n      console.log(this.selected);\r\n      let _this = this;\r\n      _this.$axios({\r\n          url: \"/admin/Box/addToBoxByBatch\",\r\n          method: \"post\",\r\n          data:{\r\n              box_id: _this.dataBoxId,\r\n              skin_info:_this.selected\r\n          }\r\n      }).then((res) => {\r\n        if(res.data.status == 1){\r\n              _this.$emit(\"closeSidebar\");\r\n              _this.$parent.getBoxSkins();\r\n              _this.$vs.notify({\r\n                  color: 'success',\r\n                  title: '提示',\r\n                  text: res.data.msg\r\n              })\r\n          }else{\r\n              _this.$vs.notify({\r\n                  color: 'warning',\r\n                  title: '提示',\r\n                  text: res.data.msg\r\n              })\r\n          }\r\n      });\r\n    },\r\n    getSkinList(){\r\n        let _this = this;\r\n        _this.$axios({\r\n            url: \"/admin/all_skin/allSkinList\",\r\n            method: \"post\",\r\n            data:{\r\n                page:_this.currentPage,\r\n                pageSize:_this.pageSize,\r\n                searchKey:_this.searchKey\r\n            }\r\n        }).then((res) => {\r\n            _this.products = res.data.data.list;\r\n            _this.total =  res.data.data.total;\r\n            _this.totalPages = _this.pageTotal(_this.total,_this.pageSize);\r\n        });\r\n    },\r\n    addSkin(row) {\r\n        console.log(row);\r\n        let _this = this;\r\n        const pramas = {\r\n            box_id: _this.dataBoxId,\r\n            skin_id: row.id\r\n          };\r\n          console.log(pramas);\r\n        _this.$axios({\r\n            url: \"/admin/Box/putSkinToBox\",\r\n            method: \"post\",\r\n            data: {\r\n                skin_info:pramas\r\n            },\r\n        }).then((res) => {\r\n            //  console.log(res);\r\n            if(res.data.status == 1){\r\n                _this.$emit(\"closeSidebar\");\r\n                _this.$parent.getBoxSkins();\r\n                _this.$vs.notify({\r\n                    color: 'success',\r\n                    title: '提示',\r\n                    text: res.data.msg\r\n                })\r\n            }else{\r\n                _this.$vs.notify({\r\n                    color: 'warning',\r\n                    title: '提示',\r\n                    text: res.data.msg\r\n                })\r\n            }\r\n        });\r\n    },\r\n    //\"总条数\"：rowCount，\"每页总条数\"：pageSize\r\n    pageTotal(rowCount, pageSize) {\r\n      if (rowCount == null || rowCount == \"\") {\r\n            return 0;\r\n      } else {\r\n            if (pageSize != 0 && rowCount % pageSize == 0) {\r\n                    return parseInt(rowCount / pageSize)\r\n            }\r\n            if (pageSize != 0 && rowCount % pageSize != 0) {\r\n                    return parseInt(rowCount / pageSize) + 1;\r\n            }\r\n        }\r\n    },\r\n  },\r\n  mounted(){\r\n   \r\n    // console.log(this.skinTypeList);\r\n  }\r\n};\r\n",{"version":3,"sources":["AddSkinSider.vue"],"names":[],"mappings":";AAqKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"AddSkinSider.vue","sourceRoot":"src/views/ui-elements/box","sourcesContent":["<template>\r\n  <vs-sidebar\r\n    click-not-close\r\n    position-right\r\n    parent=\"body\"\r\n    default-index=\"1\"\r\n    color=\"primary\"\r\n    class=\"add-new-data-sidebar items-no-padding\"\r\n    spacer\r\n    v-model=\"addSkinActiveLocal\"\r\n  >\r\n    <div class=\"mt-6 flex items-center justify-between px-6\">\r\n      <h4>\r\n        添加饰品\r\n      </h4>\r\n      <feather-icon\r\n        icon=\"XIcon\"\r\n        @click.stop=\"addSkinActiveLocal = false,selected = [],pageSize = 10\"\r\n        class=\"cursor-pointer\"\r\n      ></feather-icon>\r\n    </div>\r\n    <vs-divider class=\"mb-0\"></vs-divider>\r\n\r\n    <component\r\n      :is=\"scrollbarTag\"\r\n      class=\"scroll-area--data-list-add-new\"\r\n      :settings=\"settings\"\r\n      :key=\"$vs.rtl\"\r\n    >\r\n      <div class=\"p-6\">\r\n        \r\n        <div id=\"data-list-list-view\" class=\"data-list-container\">\r\n\r\n            <!-- <skin-list :isSidebarActive=\"addNewDataSidebar\" @closeSidebar=\"toggleDataSidebar\" :data=\"sidebarData\" /> -->\r\n\r\n            <vs-table ref=\"table\" multiple v-model=\"selected\" :max-items=\"pageSize\" :data=\"products\">\r\n\r\n            <div slot=\"header\" class=\"flex flex-wrap-reverse items-center flex-grow justify-between t-s\">\r\n\r\n                <div class=\"flex flex-wrap-reverse items-center data-list-btn-container\">\r\n                    \r\n                </div>\r\n\r\n                \r\n\r\n                <!-- ITEMS PER PAGE -->\r\n                <!-- <vs-dropdown vs-trigger-click class=\"cursor-pointer mb-4 mr-4 items-per-page-handler\">\r\n                <div class=\"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium\">\r\n                    <span class=\"mr-2\">{{ currentPage * pageSize - (pageSize - 1) }} - {{  currentPage * pageSize }} of {{ total }}</span>\r\n                    <feather-icon icon=\"ChevronDownIcon\" svgClasses=\"h-4 w-4\" />\r\n                </div>\r\n                <vs-dropdown-menu>\r\n                    <vs-dropdown-item @click=\"pageSize=10\">\r\n                    <span>10</span>\r\n                    </vs-dropdown-item>\r\n                    <vs-dropdown-item @click=\"pageSize=20\">\r\n                    <span>20</span>\r\n                    </vs-dropdown-item>\r\n                    <vs-dropdown-item @click=\"pageSize=30\">\r\n                    <span>30</span>\r\n                    </vs-dropdown-item>\r\n                    <vs-dropdown-item @click=\"pageSize=50\">\r\n                    <span>50</span>\r\n                    </vs-dropdown-item>\r\n                </vs-dropdown-menu>\r\n                </vs-dropdown> -->\r\n\r\n                 <!-- ITEMS PER PAGE -->\r\n            <div class=\"flex-grow\">\r\n              <vs-dropdown vs-trigger-click class=\"cursor-pointer\">\r\n                <div\r\n                  class=\"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium\"\r\n                >\r\n                  <span class=\"mr-2\"\r\n                    >{{ currentPage * pageSize - (pageSize - 1) }}\r\n                    -\r\n                    {{ currentPage * pageSize }}\r\n                    of {{ total }}</span\r\n                  >\r\n                  <feather-icon icon=\"ChevronDownIcon\" svgClasses=\"h-4 w-4\" />\r\n                </div>\r\n                <!-- <vs-button class=\"btn-drop\" type=\"line\" color=\"primary\" icon-pack=\"feather\" icon=\"icon-chevron-down\"></vs-button> -->\r\n                <vs-dropdown-menu class=\"check\">\r\n                  <vs-dropdown-item @click=\"pageSize = 10\">\r\n                    <span>10</span>\r\n                  </vs-dropdown-item>\r\n                  <vs-dropdown-item @click=\"pageSize = 20\">\r\n                    <span>20</span>\r\n                  </vs-dropdown-item>\r\n                  <vs-dropdown-item @click=\"pageSize = 30\">\r\n                    <span>30</span>\r\n                  </vs-dropdown-item>\r\n                  <vs-dropdown-item @click=\"pageSize = 50\">\r\n                    <span>50</span>\r\n                  </vs-dropdown-item>\r\n                </vs-dropdown-menu>\r\n              </vs-dropdown>\r\n            </div>\r\n\r\n            <div class=\"vx-col md:w-1/4 sm:w-1/2 w-full\">\r\n              <vs-input\r\n                class=\"sm:mr-4 mr-0 sm:w-auto w-full sm:order-normal order-3 sm:mt-0 mt-4\"\r\n                v-model=\"searchKey\"\r\n                placeholder=\"关键字\"\r\n              />\r\n            </div>\r\n            <vs-button class=\"s-a-1\" @click=\"getSkinList\">搜索</vs-button>\r\n          </div>\r\n\r\n            <template slot=\"thead\">\r\n                <vs-th sort-key=\"imageUrl\">图片</vs-th>\r\n                <vs-th sort-key=\"itemName\">名称</vs-th>\r\n                <vs-th sort-key=\"priceInfo.price\">价格</vs-th>\r\n                <vs-th sort-key=\"rarityName\">分类</vs-th>\r\n                <vs-th>操作</vs-th>\r\n            </template>\r\n                <template slot-scope=\"{data}\">\r\n                <tbody>\r\n                    <vs-tr :data=\"tr\" :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n\r\n                    <vs-td class=\"img-container\">\r\n                        <img :src=\"tr.imageUrl\" class=\"product-img\" />\r\n                    </vs-td>\r\n\r\n                    <vs-td>\r\n                        <p class=\"product-name font-medium truncate\">{{ tr.itemName }}</p>\r\n                    </vs-td>\r\n\r\n                    <vs-td>\r\n                        <p class=\"product-price\">${{ tr.price }}</p>\r\n                    </vs-td>\r\n\r\n                    <vs-td>\r\n                        <p class=\"product-category\">{{ tr.rarityName }}</p>\r\n                    </vs-td>\r\n\r\n                    <vs-td class=\"whitespace-no-wrap\">\r\n                        <a @click.stop=\"addSkin(tr)\">添加</a>\r\n                    </vs-td>\r\n\r\n                    </vs-tr>\r\n                </tbody>\r\n                </template>\r\n            </vs-table>\r\n        </div> \r\n      </div>\r\n    </component>\r\n\r\n    <div class=\"flex flex-wrap items-center p-6 pagination\" slot=\"footer\" style=\"display:flex;\">\r\n      <!-- <vs-button class=\"mr-6\" @click=\"submitData\" :disabled=\"!isFormValid\" -->\r\n      <vs-button class=\"mr-6\" @click=\"btn\"\r\n        >提交</vs-button\r\n      >\r\n      <vs-button\r\n        type=\"border\"\r\n        color=\"danger\"\r\n        @click=\"addSkinActiveLocal = false,selected = [],pageSize = 10\"\r\n        >取消</vs-button\r\n      >\r\n       <vs-pagination :total=\"totalPages\" :max=\"7\" v-model=\"currentPage\" />\r\n    </div>\r\n  </vs-sidebar>\r\n</template>\r\n\r\n<script>\r\n// import { AgGridVue } from \"ag-grid-vue\";\r\nimport \"@/assets/scss/vuexy/extraComponents/agGridStyleOverride.scss\";\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\n\r\nexport default {\r\n  name:'DataSiderSkin',\r\n  components: {\r\n    // AgGridVue\r\n  },\r\n  props: {\r\n    addSkinActive: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    data: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  components: {\r\n    VuePerfectScrollbar,\r\n  },\r\n  data() {\r\n    return {\r\n      dataBoxId: null,\r\n\r\n      settings: {\r\n        // perfectscrollbar settings\r\n        maxScrollbarLength: 60,\r\n        wheelSpeed: 0.6,\r\n      },\r\n      file:'',\r\n      skinTypeList:[],\r\n\r\n      selected: [],\r\n      isMounted: false,\r\n      addNewDataSidebar: false,\r\n      sidebarData: {},\r\n      products:[],\r\n      total:0,\r\n      currentPage:1,\r\n      pageSize: 10,\r\n      totalPages:0,\r\n      gridApi: null,\r\n      searchKey:''\r\n    };\r\n  },\r\n  watch: {\r\n    addSkinActive(val) {\r\n      if (!val) return;\r\n      if (Object.entries(this.data).length === 0) {\r\n        console.log(this.data);\r\n        this.getSkinList();\r\n      } else {\r\n        this.getSkinList();\r\n        this.dataBoxId = this.data.box_id;\r\n      }\r\n      this.skinTypeList = this.$parent.skinTypeList;\r\n    },\r\n    \"currentPage\":{\r\n      handler(val){\r\n        let _this = this;\r\n        _this.currentPage = val;\r\n        _this.getSkinList();\r\n      },\r\n      deep:true\r\n    },\r\n    'pageSize':{\r\n      handler(val){\r\n        let _this = this;\r\n        _this.pageSize = val;\r\n        _this.getSkinList();\r\n      },\r\n      deep:true\r\n    },\r\n  },\r\n  computed: {\r\n    addSkinActiveLocal: {\r\n      get() {\r\n        return this.addSkinActive;\r\n      },\r\n      set(val) {\r\n        if (!val) {\r\n          this.$emit(\"closeSidebar\");\r\n        }\r\n      },\r\n    },\r\n    isFormValid() {\r\n      return (\r\n        !this.errors.any() &&\r\n        this.dataName &&\r\n        this.dataCategory &&\r\n        this.dataPrice > 0\r\n      );\r\n    },\r\n    scrollbarTag() {\r\n      return this.$store.getters.scrollbarTag;\r\n    },\r\n  },\r\n  methods: {\r\n    btn(){\r\n      console.log(this.selected);\r\n      let _this = this;\r\n      _this.$axios({\r\n          url: \"/admin/Box/addToBoxByBatch\",\r\n          method: \"post\",\r\n          data:{\r\n              box_id: _this.dataBoxId,\r\n              skin_info:_this.selected\r\n          }\r\n      }).then((res) => {\r\n        if(res.data.status == 1){\r\n              _this.$emit(\"closeSidebar\");\r\n              _this.$parent.getBoxSkins();\r\n              _this.$vs.notify({\r\n                  color: 'success',\r\n                  title: '提示',\r\n                  text: res.data.msg\r\n              })\r\n          }else{\r\n              _this.$vs.notify({\r\n                  color: 'warning',\r\n                  title: '提示',\r\n                  text: res.data.msg\r\n              })\r\n          }\r\n      });\r\n    },\r\n    getSkinList(){\r\n        let _this = this;\r\n        _this.$axios({\r\n            url: \"/admin/all_skin/allSkinList\",\r\n            method: \"post\",\r\n            data:{\r\n                page:_this.currentPage,\r\n                pageSize:_this.pageSize,\r\n                searchKey:_this.searchKey\r\n            }\r\n        }).then((res) => {\r\n            _this.products = res.data.data.list;\r\n            _this.total =  res.data.data.total;\r\n            _this.totalPages = _this.pageTotal(_this.total,_this.pageSize);\r\n        });\r\n    },\r\n    addSkin(row) {\r\n        console.log(row);\r\n        let _this = this;\r\n        const pramas = {\r\n            box_id: _this.dataBoxId,\r\n            skin_id: row.id\r\n          };\r\n          console.log(pramas);\r\n        _this.$axios({\r\n            url: \"/admin/Box/putSkinToBox\",\r\n            method: \"post\",\r\n            data: {\r\n                skin_info:pramas\r\n            },\r\n        }).then((res) => {\r\n            //  console.log(res);\r\n            if(res.data.status == 1){\r\n                _this.$emit(\"closeSidebar\");\r\n                _this.$parent.getBoxSkins();\r\n                _this.$vs.notify({\r\n                    color: 'success',\r\n                    title: '提示',\r\n                    text: res.data.msg\r\n                })\r\n            }else{\r\n                _this.$vs.notify({\r\n                    color: 'warning',\r\n                    title: '提示',\r\n                    text: res.data.msg\r\n                })\r\n            }\r\n        });\r\n    },\r\n    //\"总条数\"：rowCount，\"每页总条数\"：pageSize\r\n    pageTotal(rowCount, pageSize) {\r\n      if (rowCount == null || rowCount == \"\") {\r\n            return 0;\r\n      } else {\r\n            if (pageSize != 0 && rowCount % pageSize == 0) {\r\n                    return parseInt(rowCount / pageSize)\r\n            }\r\n            if (pageSize != 0 && rowCount % pageSize != 0) {\r\n                    return parseInt(rowCount / pageSize) + 1;\r\n            }\r\n        }\r\n    },\r\n  },\r\n  mounted(){\r\n   \r\n    // console.log(this.skinTypeList);\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.add-new-data-sidebar {\r\n  ::v-deep .vs-sidebar--background {\r\n    z-index: 52010;\r\n  }\r\n\r\n  ::v-deep .vs-sidebar {\r\n    z-index: 52010;\r\n    // width: 400px;\r\n    max-width: 90vw;\r\n    max-height: 90vh;\r\n    margin-top: 5vh;\r\n    margin-right: 4vw;\r\n\r\n    .img-upload {\r\n      margin-top: 2rem;\r\n\r\n      .con-img-upload {\r\n        padding: 0;\r\n      }\r\n\r\n      .con-input-upload {\r\n        width: 100%;\r\n        margin: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.scroll-area--data-list-add-new {\r\n  // height: calc(var(--vh, 1vh) * 100 - 4.3rem);\r\n  height: calc(var(--vh, 1vh) * 100 - 16px - 45px - 160px);\r\n\r\n  &:not(.ps) {\r\n    overflow-y: auto;\r\n  }\r\n}\r\n.img-container {\r\n    // width: 1rem;\r\n    // background: #fff;\r\n\r\n    span {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    }\r\n\r\n    .product-img {\r\n    height: 110px;\r\n    }\r\n}\r\n #data-list-list-view .vs-con-table .vs-table tr td {\r\n    padding: 5px 0;\r\n}\r\n.pagination .vs-row {\r\n    float: left;\r\n    margin-left: auto;\r\n    width: auto!important;\r\n}\r\n.td-check{\r\n    display: none;\r\n}\r\n.check{\r\n  z-index: 99999!important;\r\n}\r\n.t-s{\r\n  margin-bottom: 10px;\r\n}\r\n.s-a-1{\r\n  margin-top: 0px!important;\r\n}\r\n</style>\r\n"]}]}